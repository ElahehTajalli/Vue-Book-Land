{"remainingRequest":"/home/elaheh/Documents/University/project/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/elaheh/Documents/University/project/src/components/book/View.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/elaheh/Documents/University/project/src/components/book/View.vue","mtime":1629474705895},{"path":"/home/elaheh/Documents/University/project/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/elaheh/Documents/University/project/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/home/elaheh/Documents/University/project/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/elaheh/Documents/University/project/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCB7IG1hcEFjdGlvbnMsIG1hcEdldHRlcnMgfSBmcm9tICd2dWV4JwppbXBvcnQgQ3JpdGljaXNtIGZyb20gJ0AvY29tcG9uZW50cy9wb3N0L0NyaXRpY2lzbScKZXhwb3J0IGRlZmF1bHQgewogIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBpZDogMCwKICAgICAgYm9vazoge30sCiAgICAgIHBvc3RzOiBbXSwKICAgICAgbG9hZGluZzogZmFsc2UsCiAgICAgIGJ1dHRvbkxvYWRpbmc6IGZhbHNlLAogICAgICByYXRlOiAwLAogICAgICBsaXN0OiB7CiAgICAgICAgaXNSZWFkOiBmYWxzZSwKICAgICAgICBpc1JlYWRpbmc6IGZhbHNlLAogICAgICAgIGlzV2FudHNUb1JlYWQ6IGZhbHNlCiAgICAgIH0sCiAgICAgIGlzRmF2b3JpdGU6IGZhbHNlLAogICAgICBzaG93UmF0ZURpYWxvZzogZmFsc2UsCiAgICAgIGVkaXRCb29rOiB7CiAgICAgICAgcmF0ZTogMAogICAgICB9LAogICAgICBydWxlczogewogICAgICAgIHJhdGU6IFsKICAgICAgICAgIHsKICAgICAgICAgICAgcmVxdWlyZWQ6IHRydWUsCiAgICAgICAgICAgIG1lc3NhZ2U6IHRoaXMuJGkxOG4udCgnZmllbGRfcmVxdWlyZWQnKSwKICAgICAgICAgICAgdHJpZ2dlcjogJ2JsdXInCiAgICAgICAgICB9CiAgICAgICAgXQogICAgICB9CiAgICB9CiAgfSwKICBhc3luYyBjcmVhdGVkKCkgewogICAgYXdhaXQgdGhpcy5nZXRCb29rKCkKICAgIHRoaXMuc2VsZiA/IGF3YWl0IHRoaXMuZ2V0UGxhbigpIDogJycKICAgIHRoaXMuc2VsZiA/IGF3YWl0IHRoaXMuZ2V0RmF2b3JpdGUoKSA6ICcnCiAgICB0aGlzLmlzQXV0aGVudGljYXRlZCA/IGF3YWl0IHRoaXMuZ2V0UG9zdHMoKSA6ICcnCiAgfSwKICBjb21wdXRlZDogewogICAgLi4ubWFwR2V0dGVycyhbJ2lzQXV0aGVudGljYXRlZCcsICdzZWxmJ10pCiAgfSwKICBtZXRob2RzOiB7CiAgICAuLi5tYXBBY3Rpb25zKFsnaGFuZGxlUmVxdWVzdCddKSwKICAgIGdldEJvb2soKSB7CiAgICAgIHRoaXMubG9hZGluZyA9IHRydWUKICAgICAgdGhpcy5oYW5kbGVSZXF1ZXN0KHsKICAgICAgICBuYW1lOiAnYm9va3MnLAogICAgICAgIGFjdGlvbjogJ2dldE9uZScsCiAgICAgICAgZGF0YTogewogICAgICAgICAgaWQ6IHRoaXMuJHJvdXRlLnBhcmFtcy5pZAogICAgICAgIH0KICAgICAgfSkudGhlbigocmVzKSA9PiB7CiAgICAgICAgdGhpcy5ib29rID0gcmVzLmRhdGEKICAgICAgfSkKICAgIH0sCiAgICBnZXRQb3N0cygpIHsKICAgICAgdGhpcy5oYW5kbGVSZXF1ZXN0KHsKICAgICAgICBuYW1lOiAncG9zdHMvJywKICAgICAgICBhY3Rpb246ICdnZXRBbGwnLAogICAgICAgIGRhdGE6IHsKICAgICAgICAgIHF1ZXJ5OiB7CiAgICAgICAgICAgIGJvb2tfaWQ6IHRoaXMuJHJvdXRlLnBhcmFtcy5pZAogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfSkKICAgICAgICAudGhlbigocmVzKSA9PiB7CiAgICAgICAgICB0aGlzLnBvc3RzID0gcmVzLmRhdGEucG9zdHMKICAgICAgICB9KQogICAgICAgIC5maW5hbGx5KCgpID0+IHsKICAgICAgICAgIHRoaXMubG9hZGluZyA9IGZhbHNlCiAgICAgICAgfSkKICAgIH0sCiAgICBnZXRQbGFuKCkgewogICAgICB0aGlzLmhhbmRsZVJlcXVlc3QoewogICAgICAgIG5hbWU6ICdib29rcy9wbGFuJywKICAgICAgICBhY3Rpb246ICdnZXRBbGwnLAogICAgICAgIGRhdGE6IHsKICAgICAgICAgIHF1ZXJ5OiB7CiAgICAgICAgICAgIHVzZXI6IHRoaXMuc2VsZi5pZCwKICAgICAgICAgICAgYm9vazogdGhpcy4kcm91dGUucGFyYW1zLmlkCiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9KQogICAgICAgIC50aGVuKChyZXMpID0+IHsKICAgICAgICAgIHRoaXMubGlzdCA9IHJlcwogICAgICAgIH0pCiAgICAgICAgLmNhdGNoKChyZXMpID0+IHsKICAgICAgICAgIHRoaXMubGlzdCA9IHJlcy5yZXNwb25zZS5kYXRhCiAgICAgICAgfSkKICAgICAgICAuZmluYWxseSgoKSA9PiB7CiAgICAgICAgICAhdGhpcy5pc0F1dGhlbnRpY2F0ZWQgPyAodGhpcy5sb2FkaW5nID0gZmFsc2UpIDogJycKICAgICAgICB9KQogICAgfSwKICAgIGdldEZhdm9yaXRlKCkgewogICAgICB0aGlzLmhhbmRsZVJlcXVlc3QoewogICAgICAgIG5hbWU6ICdib29rcy9mYXZvcml0ZScsCiAgICAgICAgYWN0aW9uOiAnZ2V0QWxsJywKICAgICAgICBkYXRhOiB7CiAgICAgICAgICBxdWVyeTogewogICAgICAgICAgICBib29rOiB0aGlzLiRyb3V0ZS5wYXJhbXMuaWQKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0pCiAgICAgICAgLnRoZW4oKCkgPT4gewogICAgICAgICAgdGhpcy5pc0Zhdm9yaXRlID0gdHJ1ZQogICAgICAgIH0pCiAgICAgICAgLmNhdGNoKCgpID0+IHsKICAgICAgICAgIHRoaXMuaXNGYXZvcml0ZSA9IGZhbHNlCiAgICAgICAgfSkKICAgICAgICAuZmluYWxseSgoKSA9PiB7CiAgICAgICAgICAhdGhpcy5pc0F1dGhlbnRpY2F0ZWQgPyAodGhpcy5sb2FkaW5nID0gZmFsc2UpIDogJycKICAgICAgICB9KQogICAgfSwKICAgIHNldFJhdGUoKSB7CiAgICAgIHRoaXMuYnV0dG9uTG9hZGluZyA9IHRydWUKICAgICAgbGV0IGZvcm1EYXRhID0gbmV3IEZvcm1EYXRhKCkKICAgICAgZm9ybURhdGEuYXBwZW5kKCdib29rJywgdGhpcy4kcm91dGUucGFyYW1zLmlkKQogICAgICBmb3JtRGF0YS5hcHBlbmQoJ3VzZXInLCB0aGlzLnNlbGYuaWQpCiAgICAgIGZvcm1EYXRhLmFwcGVuZCgncmF0ZScsIHRoaXMuZWRpdEJvb2sucmF0ZSkKCiAgICAgIHRoaXMuaGFuZGxlUmVxdWVzdCh7CiAgICAgICAgbmFtZTogJ2Jvb2tzL3JhdGUnLAogICAgICAgIGFjdGlvbjogJ2NyZWF0ZScsCiAgICAgICAgZGF0YTogZm9ybURhdGEKICAgICAgfSkKICAgICAgICAudGhlbigocmVzKSA9PiB7CiAgICAgICAgICB0aGlzLmJvb2sucmF0ZSA9IHJlcy5yYXRlCiAgICAgICAgICB0aGlzLiRtZXNzYWdlKHsKICAgICAgICAgICAgdHlwZTogJ3N1Y2Nlc3MnLAogICAgICAgICAgICBtZXNzYWdlOiB0aGlzLiRpMThuLnQoJ3lvdXJfcmF0ZV93YXNfc3VjY2Vzc2Z1bGx5X2FkZGVkJyksCiAgICAgICAgICAgIGN1c3RvbUNsYXNzOiAnYmctc3VjY2Vzcy1kYXJrJwogICAgICAgICAgfSkKICAgICAgICAgIHRoaXMuc2hvd1JhdGVEaWFsb2cgPSBmYWxzZQogICAgICAgIH0pCiAgICAgICAgLmNhdGNoKChlcnJvcikgPT4gewogICAgICAgICAgdGhpcy4kbWVzc2FnZSh7CiAgICAgICAgICAgIHR5cGU6ICdlcnJvcicsCiAgICAgICAgICAgIG1lc3NhZ2U6IHRoaXMuJGkxOG4udChlcnJvci5yZXNwb25zZS5kYXRhLmVycm9ycyksCiAgICAgICAgICAgIGN1c3RvbUNsYXNzOiAnYmctZXJyb3ItZGFyaycKICAgICAgICAgIH0pCiAgICAgICAgfSkKICAgICAgICAuZmluYWxseSgoKSA9PiB7CiAgICAgICAgICB0aGlzLmJ1dHRvbkxvYWRpbmcgPSBmYWxzZQogICAgICAgIH0pCiAgICB9LAogICAgYWRkVG9QbGFuKGxpc3QpIHsKICAgICAgbGV0IGZvcm1EYXRhID0gbmV3IEZvcm1EYXRhKCkKICAgICAgZm9ybURhdGEuYXBwZW5kKCdib29rJywgdGhpcy4kcm91dGUucGFyYW1zLmlkKQogICAgICBmb3JtRGF0YS5hcHBlbmQoJ3VzZXInLCB0aGlzLnNlbGYuaWQpCiAgICAgIGZvcm1EYXRhLmFwcGVuZCgnbGlzdCcsIGxpc3QpCgogICAgICB0aGlzLmhhbmRsZVJlcXVlc3QoewogICAgICAgIG5hbWU6ICdib29rcy9wbGFuJywKICAgICAgICBhY3Rpb246ICdjcmVhdGUnLAogICAgICAgIGRhdGE6IGZvcm1EYXRhCiAgICAgIH0pLnRoZW4oKCkgPT4gewogICAgICAgIHRoaXMuZ2V0UGxhbigpCiAgICAgIH0pCiAgICB9LAogICAgc2V0RmF2b3JpdGUoKSB7CiAgICAgIGxldCBmb3JtRGF0YSA9IG5ldyBGb3JtRGF0YSgpCiAgICAgIGZvcm1EYXRhLmFwcGVuZCgnYm9vaycsIHRoaXMuJHJvdXRlLnBhcmFtcy5pZCkKCiAgICAgIHRoaXMuaGFuZGxlUmVxdWVzdCh7CiAgICAgICAgbmFtZTogJ2Jvb2tzL2Zhdm9yaXRlJywKICAgICAgICBhY3Rpb246ICdjcmVhdGUnLAogICAgICAgIGRhdGE6IGZvcm1EYXRhCiAgICAgIH0pCiAgICAgICAgLnRoZW4oKCkgPT4gewogICAgICAgICAgdGhpcy5pc0Zhdm9yaXRlID0gIXRoaXMuaXNGYXZvcml0ZQogICAgICAgICAgLy8gdGhpcy4kbWVzc2FnZSh7CiAgICAgICAgICAvLyAgIHR5cGU6ICdzdWNjZXNzJywKICAgICAgICAgIC8vICAgbWVzc2FnZTogdGhpcy4kaTE4bi50KCd5b3VyX3JhdGVfd2FzX3N1Y2Nlc3NmdWxseV9hZGRlZCcpLAogICAgICAgICAgLy8gICBjdXN0b21DbGFzczogJ2JnLXN1Y2Nlc3MtZGFyaycKICAgICAgICAgIC8vIH0pCiAgICAgICAgfSkKICAgICAgICAuY2F0Y2goKGVycm9yKSA9PiB7CiAgICAgICAgICB0aGlzLiRtZXNzYWdlKHsKICAgICAgICAgICAgdHlwZTogJ2Vycm9yJywKICAgICAgICAgICAgbWVzc2FnZTogdGhpcy4kaTE4bi50KGVycm9yLnJlc3BvbnNlLmRhdGEuZXJyb3JzKSwKICAgICAgICAgICAgY3VzdG9tQ2xhc3M6ICdiZy1lcnJvci1kYXJrJwogICAgICAgICAgfSkKICAgICAgICB9KQogICAgfQogIH0sCiAgd2F0Y2g6IHsKICAgIHNlbGYoKSB7CiAgICAgIHRoaXMuZ2V0UGxhbigpCiAgICAgIHRoaXMuZ2V0RmF2b3JpdGUoKQogICAgfQogIH0sCiAgY29tcG9uZW50czogewogICAgQ3JpdGljaXNtCiAgfQp9Cg=="},{"version":3,"sources":["View.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAgIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"View.vue","sourceRoot":"src/components/book","sourcesContent":["<template>\n  <div class=\"view-book\" v-loading.fullscreen.lock=\"loading\">\n    <el-card v-if=\"!loading\">\n      <div class=\"main\">\n        <div>\n          <img v-if=\"book.image\" :src=\"'http://127.0.0.1:8000' + book.image\" />\n          <img v-else src=\"../../assets/images/noBook.png\" />\n        </div>\n        <div class=\"book-information\">\n          <div class=\"information\">\n            <span class=\"name\"> {{ book.name }} </span>\n            <el-rate\n              :value=\"parseFloat((+book.rate).toFixed(2))\"\n              disabled\n              show-score\n              text-color=\"#ff9900\"\n            >\n            </el-rate>\n            <span v-if=\"book.author\">\n              {{ $t('book.author') }}: {{ book.author.name }}\n            </span>\n            <span v-if=\"book.translator\">\n              {{ $t('book.translator') }}: {{ book.translator.name }}\n            </span>\n            <span> {{ $t('book.publisher') }}: {{ book.publisher }} </span>\n            <span> {{ $t('book.genre') }}: {{ book.genre }} </span>\n            <span>\n              {{ $t('book.publication_year') }}: {{ book.publication_year }}\n            </span>\n          </div>\n          <div class=\"buttons\" v-if=\"isAuthenticated\">\n            <el-button\n              :type=\"list.isWantsToRead ? 'primary' : 'light'\"\n              size=\"mini\"\n              @click=\"addToPlan('wants_to_read')\"\n            >\n              {{ $t('want_to_read') }}</el-button\n            >\n            <el-button\n              :type=\"list.isReading ? 'primary' : 'light'\"\n              size=\"mini\"\n              @click=\"addToPlan('reading')\"\n            >\n              {{ $t('currently_reading') }}</el-button\n            >\n            <el-button\n              :type=\"list.isRead ? 'primary' : 'light'\"\n              size=\"mini\"\n              @click=\"addToPlan('read')\"\n            >\n              {{ $t('read') }}</el-button\n            >\n          </div>\n        </div>\n      </div>\n      <div class=\"favorite\">\n        <el-button type=\"primary\" size=\"mini\" @click=\"showRateDialog = true\">\n          {{ $t('rate_to_book') }}\n        </el-button>\n        <img\n          v-if=\"isFavorite\"\n          @click=\"setFavorite()\"\n          class=\"favorite\"\n          src=\"../../assets/images/favorite_red.svg\"\n        />\n        <img\n          v-else\n          @click=\"setFavorite()\"\n          class=\"favorite\"\n          src=\"../../assets/images/favorite_border_black.svg\"\n        />\n      </div>\n    </el-card>\n    <div class=\"post-summary\">\n      <el-card v-if=\"book.summary\">\n        <div slot=\"header\" class=\"clearfix\">\n          <span>{{ $t('book.summary') }}</span>\n        </div>\n        <span class=\"summary\"> {{ book.summary }} </span>\n      </el-card>\n      <div\n        class=\"post flexbox column-direction align-center\"\n        v-if=\"isAuthenticated && posts.length\"\n      >\n        <div class=\"criticisms-title\">\n          <span>{{ $t('criticisms') }}</span>\n        </div>\n        <Criticism v-for=\"p in posts\" :key=\"p.id\" :post=\"p\" />\n      </div>\n    </div>\n    <el-dialog\n      :title=\"$t('rating')\"\n      :visible.sync=\"showRateDialog\"\n      :close-on-click-modal=\"false\"\n      :close-on-escape=\"false\"\n      :show-close=\"false\"\n      width=\"40rem\"\n      top=\"7vh\"\n      class=\"small\"\n    >\n      <el-form :model=\"editBook\" ref=\"addRate\" :rules=\"rules\">\n        <el-form-item :label=\"$t('post.rate')\" prop=\"rate\">\n          <el-input-number\n            v-model=\"editBook.rate\"\n            :step=\"0.1\"\n            :min=\"0\"\n            :max=\"5\"\n          ></el-input-number>\n        </el-form-item>\n        <div class=\"text-center\">\n          <el-button\n            :loading=\"buttonLoading\"\n            class=\"ml-10\"\n            type=\"primary\"\n            @click=\"validateAndSubmitForm('addRate', setRate)\"\n          >\n            {{ $t('submit') }}\n          </el-button>\n          <el-button @click=\"showRateDialog = false\">\n            {{ $t('close') }}\n          </el-button>\n        </div>\n      </el-form>\n    </el-dialog>\n  </div>\n</template>\n\n<script>\n  import { mapActions, mapGetters } from 'vuex'\n  import Criticism from '@/components/post/Criticism'\n  export default {\n    data() {\n      return {\n        id: 0,\n        book: {},\n        posts: [],\n        loading: false,\n        buttonLoading: false,\n        rate: 0,\n        list: {\n          isRead: false,\n          isReading: false,\n          isWantsToRead: false\n        },\n        isFavorite: false,\n        showRateDialog: false,\n        editBook: {\n          rate: 0\n        },\n        rules: {\n          rate: [\n            {\n              required: true,\n              message: this.$i18n.t('field_required'),\n              trigger: 'blur'\n            }\n          ]\n        }\n      }\n    },\n    async created() {\n      await this.getBook()\n      this.self ? await this.getPlan() : ''\n      this.self ? await this.getFavorite() : ''\n      this.isAuthenticated ? await this.getPosts() : ''\n    },\n    computed: {\n      ...mapGetters(['isAuthenticated', 'self'])\n    },\n    methods: {\n      ...mapActions(['handleRequest']),\n      getBook() {\n        this.loading = true\n        this.handleRequest({\n          name: 'books',\n          action: 'getOne',\n          data: {\n            id: this.$route.params.id\n          }\n        }).then((res) => {\n          this.book = res.data\n        })\n      },\n      getPosts() {\n        this.handleRequest({\n          name: 'posts/',\n          action: 'getAll',\n          data: {\n            query: {\n              book_id: this.$route.params.id\n            }\n          }\n        })\n          .then((res) => {\n            this.posts = res.data.posts\n          })\n          .finally(() => {\n            this.loading = false\n          })\n      },\n      getPlan() {\n        this.handleRequest({\n          name: 'books/plan',\n          action: 'getAll',\n          data: {\n            query: {\n              user: this.self.id,\n              book: this.$route.params.id\n            }\n          }\n        })\n          .then((res) => {\n            this.list = res\n          })\n          .catch((res) => {\n            this.list = res.response.data\n          })\n          .finally(() => {\n            !this.isAuthenticated ? (this.loading = false) : ''\n          })\n      },\n      getFavorite() {\n        this.handleRequest({\n          name: 'books/favorite',\n          action: 'getAll',\n          data: {\n            query: {\n              book: this.$route.params.id\n            }\n          }\n        })\n          .then(() => {\n            this.isFavorite = true\n          })\n          .catch(() => {\n            this.isFavorite = false\n          })\n          .finally(() => {\n            !this.isAuthenticated ? (this.loading = false) : ''\n          })\n      },\n      setRate() {\n        this.buttonLoading = true\n        let formData = new FormData()\n        formData.append('book', this.$route.params.id)\n        formData.append('user', this.self.id)\n        formData.append('rate', this.editBook.rate)\n\n        this.handleRequest({\n          name: 'books/rate',\n          action: 'create',\n          data: formData\n        })\n          .then((res) => {\n            this.book.rate = res.rate\n            this.$message({\n              type: 'success',\n              message: this.$i18n.t('your_rate_was_successfully_added'),\n              customClass: 'bg-success-dark'\n            })\n            this.showRateDialog = false\n          })\n          .catch((error) => {\n            this.$message({\n              type: 'error',\n              message: this.$i18n.t(error.response.data.errors),\n              customClass: 'bg-error-dark'\n            })\n          })\n          .finally(() => {\n            this.buttonLoading = false\n          })\n      },\n      addToPlan(list) {\n        let formData = new FormData()\n        formData.append('book', this.$route.params.id)\n        formData.append('user', this.self.id)\n        formData.append('list', list)\n\n        this.handleRequest({\n          name: 'books/plan',\n          action: 'create',\n          data: formData\n        }).then(() => {\n          this.getPlan()\n        })\n      },\n      setFavorite() {\n        let formData = new FormData()\n        formData.append('book', this.$route.params.id)\n\n        this.handleRequest({\n          name: 'books/favorite',\n          action: 'create',\n          data: formData\n        })\n          .then(() => {\n            this.isFavorite = !this.isFavorite\n            // this.$message({\n            //   type: 'success',\n            //   message: this.$i18n.t('your_rate_was_successfully_added'),\n            //   customClass: 'bg-success-dark'\n            // })\n          })\n          .catch((error) => {\n            this.$message({\n              type: 'error',\n              message: this.$i18n.t(error.response.data.errors),\n              customClass: 'bg-error-dark'\n            })\n          })\n      }\n    },\n    watch: {\n      self() {\n        this.getPlan()\n        this.getFavorite()\n      }\n    },\n    components: {\n      Criticism\n    }\n  }\n</script>\n"]}]}
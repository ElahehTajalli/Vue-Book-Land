{"remainingRequest":"/home/elaheh/Documents/University/project/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/elaheh/Documents/University/project/src/components/book/Add.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/elaheh/Documents/University/project/src/components/book/Add.vue","mtime":1626026873918},{"path":"/home/elaheh/Documents/University/project/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/elaheh/Documents/University/project/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/home/elaheh/Documents/University/project/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/elaheh/Documents/University/project/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCB7IG1hcEFjdGlvbnMgfSBmcm9tICd2dWV4JwppbXBvcnQgeyBDcm9wcGVyIH0gZnJvbSAndnVlLWFkdmFuY2VkLWNyb3BwZXInCmltcG9ydCAndnVlLWFkdmFuY2VkLWNyb3BwZXIvZGlzdC9zdHlsZS5jc3MnCmV4cG9ydCBkZWZhdWx0IHsKICBwcm9wczogewogICAgZGlhbG9nVmlzaWJsZTogewogICAgICB0eXBlOiBCb29sZWFuLAogICAgICBkZWZhdWx0OiBmYWxzZQogICAgfQogIH0sCiAgZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIGF1dGhvcnM6IFtdLAogICAgICB0cmFuc2xhdG9yczogW10sCiAgICAgIGxvYWRpbmc6IGZhbHNlLAogICAgICBpYWxvZ1Nob3c6IGZhbHNlLAogICAgICBkaWFsb2dJbWFnZVVybDogJycsCiAgICAgIGRpc2FibGVkOiBmYWxzZSwKICAgICAgc2hvd0ltYWdlOiBmYWxzZSwKICAgICAgaW1hZ2VGaWxlOiAnJywKICAgICAgZmlsZTogJycsCiAgICAgIGltYWdlVXJsOiAnJywKICAgICAgaW1hZ2VFcnJvcjogJycsCiAgICAgIHNpemVFcnJvcjogJycsCiAgICAgIGltYWdlTGlzdDogW10sCiAgICAgIHNob3dDcm9wcGVyOiAnJywKICAgICAgZGlhbG9nU2hvdzogZmFsc2UsCiAgICAgIHNob3dDcm9wcEJ1dHRvbjogZmFsc2UsCiAgICAgIGFkZEJvb2tGb3JtOiB7CiAgICAgICAgbmFtZTogJycsCiAgICAgICAgYXV0aG9yOiAnJywKICAgICAgICBwdWJsaXNoZXI6ICcnLAogICAgICAgIGdlbnJlOiAnJywKICAgICAgICBwdWJsaWNhdGlvbl95ZWFyOiAnJywKICAgICAgICB0cmFuc2xhdG9yOiAnJywKICAgICAgICBpbWFnZTogJycsCiAgICAgICAgc3VtbWFyeTogJycKICAgICAgfSwKICAgICAgcnVsZXM6IHsKICAgICAgICBuYW1lOiBbCiAgICAgICAgICB7CiAgICAgICAgICAgIHJlcXVpcmVkOiB0cnVlLAogICAgICAgICAgICBtZXNzYWdlOiB0aGlzLiRpMThuLnQoJ2ZpZWxkX3JlcXVpcmVkJyksCiAgICAgICAgICAgIHRyaWdnZXI6ICdibHVyJwogICAgICAgICAgfQogICAgICAgIF0sCiAgICAgICAgYXV0aG9yOiBbCiAgICAgICAgICB7CiAgICAgICAgICAgIHJlcXVpcmVkOiB0cnVlLAogICAgICAgICAgICBtZXNzYWdlOiB0aGlzLiRpMThuLnQoJ2ZpZWxkX3JlcXVpcmVkJyksCiAgICAgICAgICAgIHRyaWdnZXI6ICdibHVyJwogICAgICAgICAgfQogICAgICAgIF0sCiAgICAgICAgcHVibGlzaGVyOiBbCiAgICAgICAgICB7CiAgICAgICAgICAgIHJlcXVpcmVkOiB0cnVlLAogICAgICAgICAgICBtZXNzYWdlOiB0aGlzLiRpMThuLnQoJ2ZpZWxkX3JlcXVpcmVkJyksCiAgICAgICAgICAgIHRyaWdnZXI6ICdibHVyJwogICAgICAgICAgfQogICAgICAgIF0sCiAgICAgICAgcHVibGljYXRpb25feWVhcjogWwogICAgICAgICAgewogICAgICAgICAgICByZXF1aXJlZDogdHJ1ZSwKICAgICAgICAgICAgbWVzc2FnZTogdGhpcy4kaTE4bi50KCdmaWVsZF9yZXF1aXJlZCcpLAogICAgICAgICAgICB0cmlnZ2VyOiAnYmx1cicKICAgICAgICAgIH0KICAgICAgICBdLAogICAgICAgIGdlbnJlOiBbCiAgICAgICAgICB7CiAgICAgICAgICAgIHJlcXVpcmVkOiB0cnVlLAogICAgICAgICAgICBtZXNzYWdlOiB0aGlzLiRpMThuLnQoJ2ZpZWxkX3JlcXVpcmVkJyksCiAgICAgICAgICAgIHRyaWdnZXI6ICdibHVyJwogICAgICAgICAgfQogICAgICAgIF0KICAgICAgfQogICAgfQogIH0sCiAgY3JlYXRlZCgpIHsKICAgIHRoaXMuaGFuZGxlR2V0QXV0aG9ycygpCiAgICB0aGlzLmhhbmRsZUdldFRyYW5zbGF0b3JzKCkKICB9LAogIG1ldGhvZHM6IHsKICAgIC4uLm1hcEFjdGlvbnMoWydoYW5kbGVSZXF1ZXN0J10pLAogICAgYWRkQm9vaygpIHsKICAgICAgdGhpcy5sb2FkaW5nID0gdHJ1ZQogICAgICBsZXQgZm9ybURhdGEgPSBuZXcgRm9ybURhdGEoKQogICAgICBmb3IgKGxldCBba2V5LCB2YWx1ZV0gb2YgT2JqZWN0LmVudHJpZXModGhpcy5hZGRCb29rRm9ybSkpIHsKICAgICAgICBpZiAodmFsdWUpIHsKICAgICAgICAgIGZvcm1EYXRhLmFwcGVuZChrZXksIHZhbHVlKQogICAgICAgIH0KICAgICAgfQogICAgICBmb3JtRGF0YS5hcHBlbmQoJ2ltYWdlJywgdGhpcy5pbWFnZUZpbGUpCiAgICAgIHRoaXMuaGFuZGxlUmVxdWVzdCh7CiAgICAgICAgbmFtZTogJ2Jvb2tzL2FkZCcsCiAgICAgICAgYWN0aW9uOiAnY3JlYXRlJywKICAgICAgICBkYXRhOiBmb3JtRGF0YQogICAgICB9KQogICAgICAgIC50aGVuKCgpID0+IHsKICAgICAgICAgIHRoaXMuJG1lc3NhZ2UoewogICAgICAgICAgICB0eXBlOiAnc3VjY2VzcycsCiAgICAgICAgICAgIG1lc3NhZ2U6IHRoaXMuJGkxOG4udCgndGhlX2Jvb2tfd2FzX3N1Y2Nlc3NmdWxseV9hZGRlZCcpCiAgICAgICAgICB9KQogICAgICAgICAgdGhpcy5oYW5kbGVDbG9zZSgpCiAgICAgICAgICAvLyB0aGlzLiRlbWl0KCdnZXQtYWR2ZXJ0aXNlbWVudHMnKQogICAgICAgICAgdGhpcy5sb2FkaW5nID0gZmFsc2UKICAgICAgICB9KQogICAgICAgIC5jYXRjaCgoKSA9PiB7CiAgICAgICAgICB0aGlzLmxvYWRpbmcgPSBmYWxzZQogICAgICAgICAgdGhpcy4kbWVzc2FnZSh7CiAgICAgICAgICAgIHR5cGU6ICdlcnJvcicsCiAgICAgICAgICAgIG1lc3NhZ2U6IHRoaXMuJGkxOG4udCgKICAgICAgICAgICAgICAneW91cl9yZXF1ZXN0X2hhc19lbmNvdW50ZXJlZF9hX3Byb2JsZW1fcGxlYXNlX3RyeV9hZ2FpbicKICAgICAgICAgICAgKQogICAgICAgICAgfSkKICAgICAgICB9KQogICAgfSwKICAgIGhhbmRsZUNsb3NlKCkgewogICAgICB0aGlzLiRlbWl0KCdjbG9zZS1kaWFsb2cnKQogICAgICB0aGlzLiRyZWZzWydhZGRCb29rJ10ucmVzZXRGaWVsZHMoKQogICAgICB0aGlzLmltYWdlTGlzdCA9IFtdCiAgICAgIHRoaXMuZmlsZSA9ICcnCiAgICAgIHRoaXMuaW1hZ2VGaWxlID0gJycKICAgICAgdGhpcy5zaG93SW1hZ2UgPSBmYWxzZQogICAgfSwKICAgIGhhbmRsZUdldEF1dGhvcnMoKSB7CiAgICAgIHRoaXMuaGFuZGxlUmVxdWVzdCh7CiAgICAgICAgbmFtZTogJ3VzZXJzL2dldF9hdXRob3JzJywKICAgICAgICBhY3Rpb246ICdnZXRBbGwnLAogICAgICAgIGRhdGE6IHsKICAgICAgICAgIHF1ZXJ5OiB7CiAgICAgICAgICAgIHNvcnQ6ICdyYXRlOmRlc2MnCiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9KS50aGVuKChyZXMpID0+IHsKICAgICAgICB0aGlzLmF1dGhvcnMgPSByZXMuZGF0YS5hdXRob3JzCiAgICAgIH0pCiAgICB9LAogICAgaGFuZGxlR2V0VHJhbnNsYXRvcnMoKSB7CiAgICAgIHRoaXMuaGFuZGxlUmVxdWVzdCh7CiAgICAgICAgbmFtZTogJ3VzZXJzL2dldF90cmFuc2xhdG9ycycsCiAgICAgICAgYWN0aW9uOiAnZ2V0QWxsJywKICAgICAgICBkYXRhOiB7CiAgICAgICAgICBxdWVyeTogewogICAgICAgICAgICBzb3J0OiAncmF0ZTpkZXNjJwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfSkudGhlbigocmVzKSA9PiB7CiAgICAgICAgdGhpcy50cmFuc2xhdG9ycyA9IHJlcy5kYXRhLnRyYW5zbGF0b3JzCiAgICAgIH0pCiAgICB9LAogICAgaGFuZGxlUmVtb3ZlKCkgewogICAgICB0aGlzLmltYWdlTGlzdCA9IFtdCiAgICAgIHRoaXMuc2hvd0ltYWdlID0gZmFsc2UKICAgICAgdGhpcy5zaG93Q3JvcHBlciA9ICdibG9jaycKICAgIH0sCiAgICBoYW5kbGVBdmF0YXJTdWNjZXNzKHJlcywgZmlsZSkgewogICAgICBsZXQgaW5kZXggPSBmaWxlLmxlbmd0aCAtIDEKICAgICAgY29uc3QgaXNKUEcgPQogICAgICAgIGZpbGVbaW5kZXhdLnJhdy50eXBlID09PSAnaW1hZ2UvcG5nJyB8fAogICAgICAgIGZpbGVbaW5kZXhdLnJhdy50eXBlID09PSAnaW1hZ2UvanBnJyB8fAogICAgICAgIGZpbGVbaW5kZXhdLnJhdy50eXBlID09PSAnaW1hZ2UvanBlZycKICAgICAgY29uc3QgaXNMdDJNID0gZmlsZVtpbmRleF0uc2l6ZSAvIDEwMjQgLyAxMDI0IDwgMQogICAgICBpZiAoIWlzSlBHKSB7CiAgICAgICAgdGhpcy5pbWFnZUVycm9yID0gdGhpcy4kaTE4bi50KCd1bnN1cHBvcnRlZF9pbWFnZV90eXBlJykKICAgICAgfQogICAgICBpZiAoIWlzTHQyTSkgewogICAgICAgIHRoaXMuc2l6ZUVycm9yID0gdGhpcy4kaTE4bi50KCdleHRyYV9zaXplJykKICAgICAgfQogICAgICBpZiAoaXNKUEcgJiYgaXNMdDJNKSB7CiAgICAgICAgdGhpcy5zaXplRXJyb3IgPSAnJwogICAgICAgIHRoaXMuaW1hZ2VFcnJvciA9ICcnCiAgICAgICAgdGhpcy5maWxlID0gZmlsZVtpbmRleF0KICAgICAgICB0aGlzLmltYWdlRmlsZSA9IGZpbGVbaW5kZXhdLnJhdwogICAgICAgIHRoaXMuaW1hZ2VMaXN0ID0gW2ZpbGVbaW5kZXhdXQogICAgICAgIHRoaXMuaW1hZ2VVcmwgPSBVUkwuY3JlYXRlT2JqZWN0VVJMKGZpbGVbaW5kZXhdLnJhdykKICAgICAgICB0aGlzLnNob3dJbWFnZSA9IHRydWUKICAgICAgICB0aGlzLnNob3dDcm9wcEJ1dHRvbiA9IHRydWUKICAgICAgfSBlbHNlIHsKICAgICAgICBpZiAodGhpcy5pbWFnZUVycm9yKSB7CiAgICAgICAgICB0aGlzLiRtZXNzYWdlLmVycm9yKHRoaXMuaW1hZ2VFcnJvcikKICAgICAgICB9IGVsc2UgewogICAgICAgICAgdGhpcy4kbWVzc2FnZS5lcnJvcih0aGlzLnNpemVFcnJvcikKICAgICAgICB9CiAgICAgICAgdGhpcy5zaG93SW1hZ2UgPSBmYWxzZQogICAgICAgIHRoaXMuaW1hZ2VMaXN0ID0gW10KICAgICAgfQogICAgfSwKICAgIHNhdmVJbWFnZSgpIHsKICAgICAgY29uc3QgeyBjYW52YXMgfSA9IHRoaXMuJHJlZnMuY3JvcHBlci5nZXRSZXN1bHQoKQogICAgICB0aGlzLnNob3dDcm9wcGVyID0gJ25vbmUnCiAgICAgIHRoaXMuc2hvd0Nyb3BwQnV0dG9uID0gZmFsc2UKICAgICAgdGhpcy5pbWFnZVVybCA9IGNhbnZhcy50b0RhdGFVUkwoKQogICAgICBjYW52YXMudG9CbG9iKChibG9iKSA9PiB7CiAgICAgICAgdGhpcy5maWxlID0gbmV3IEZpbGUoW2Jsb2JdLCB0aGlzLmZpbGUubmFtZSkKICAgICAgICB0aGlzLmltYWdlRmlsZSA9IG5ldyBGaWxlKFtibG9iXSwgdGhpcy5maWxlLm5hbWUpCiAgICAgIH0sIHRoaXMuZmlsZS5yYXcudHlwZSkKICAgIH0KICB9LAogIGNvbXBvbmVudHM6IHsKICAgIENyb3BwZXIKICB9Cn0K"},{"version":3,"sources":["Add.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA4JA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Add.vue","sourceRoot":"src/components/book","sourcesContent":["<template>\n  <div>\n    <el-dialog\n      :title=\"$t('add_book')\"\n      :visible.sync=\"dialogVisible\"\n      :close-on-click-modal=\"false\"\n      :close-on-escape=\"false\"\n      :show-close=\"false\"\n      width=\"40rem\"\n      top=\"7vh\"\n      class=\"small add-book\"\n    >\n      <el-form :model=\"addBookForm\" ref=\"addBook\" :rules=\"rules\">\n        <div class=\"flexbox wrap item\">\n          <el-form-item :label=\"$t('book.name')\" prop=\"name\">\n            <el-input v-model=\"addBookForm.name\"></el-input>\n          </el-form-item>\n          <el-form-item :label=\"$t('book.author')\" prop=\"author\">\n            <el-select\n              v-model=\"addBookForm.author\"\n              filterable\n              allow-create\n              default-first-option\n              :placeholder=\"$t('choose')\"\n            >\n              <el-option\n                v-for=\"item in authors\"\n                :key=\"item.id\"\n                :label=\"item.name\"\n                :value=\"item.id\"\n              >\n              </el-option>\n            </el-select>\n          </el-form-item>\n        </div>\n        <div class=\"flexbox wrap item\">\n          <el-form-item :label=\"$t('book.publisher')\" prop=\"publisher\">\n            <el-input v-model=\"addBookForm.publisher\"></el-input>\n          </el-form-item>\n          <el-form-item :label=\"$t('book.genre')\" prop=\"genre\">\n            <el-input v-model=\"addBookForm.genre\"></el-input>\n          </el-form-item>\n        </div>\n        <div class=\"flexbox wrap item\">\n          <el-form-item\n            :label=\"$t('book.publication_year')\"\n            prop=\"publication_year\"\n          >\n            <el-input\n              type=\"number\"\n              v-model=\"addBookForm.publication_year\"\n            ></el-input>\n          </el-form-item>\n          <el-form-item :label=\"$t('book.translator')\" prop=\"translator\">\n            <el-select\n              v-model=\"addBookForm.translator\"\n              filterable\n              allow-create\n              default-first-option\n              :placeholder=\"$t('choose')\"\n            >\n              <el-option\n                v-for=\"item in translators\"\n                :key=\"item.id\"\n                :label=\"item.name\"\n                :value=\"item.id\"\n              >\n              </el-option>\n            </el-select>\n          </el-form-item>\n        </div>\n        <el-form-item :label=\"$t('book.summary')\" prop=\"summary\">\n          <el-input\n            type=\"textarea\"\n            class=\"rtl\"\n            resize=\"none\"\n            v-model=\"addBookForm.summary\"\n          ></el-input>\n        </el-form-item>\n        <el-form-item :label=\"$t('book.image')\" prop=\"image\">\n          <el-upload\n            :class=\"showImage ? 'hide-with-add-photo' : ''\"\n            action=\"#\"\n            id=\"pick-avatar\"\n            :disabled=\"showImage\"\n            :show-file-list=\"showImage\"\n            :file-list=\"imageList\"\n            list-type=\"picture-card\"\n            :on-change=\"handleAvatarSuccess\"\n            :auto-upload=\"false\"\n          >\n            <i slot=\"default\" class=\"el-icon-plus\" />\n            <div slot=\"file\" slot-scope=\"{ file }\">\n              <img\n                class=\"el-upload-list__item-thumbnail\"\n                :src=\"imageUrl\"\n                alt=\"\"\n              />\n              <span class=\"el-upload-list__item-actions\">\n                <span\n                  v-if=\"!disabled\"\n                  class=\"el-upload-list__item-delete\"\n                  @click=\"handleRemove(file)\"\n                >\n                  <i class=\"el-icon-delete\"></i>\n                </span>\n              </span>\n            </div>\n          </el-upload>\n          <el-dialog :visible.sync=\"dialogShow\">\n            <img width=\"100%\" :src=\"dialogImageUrl\" alt=\"\" />\n          </el-dialog>\n        </el-form-item>\n        <div class=\"text-center\">\n          <el-button\n            :loading=\"loading\"\n            class=\"ml-10\"\n            type=\"primary\"\n            @click=\"validateAndSubmitForm('addBook', addBook)\"\n          >\n            {{ $t('add') }}\n          </el-button>\n          <el-button @click=\"handleClose\"> {{ $t('close') }} </el-button>\n        </div>\n      </el-form>\n    </el-dialog>\n    <el-dialog\n      :visible.sync=\"showCroppButton\"\n      :close-on-click-modal=\"false\"\n      :close-on-escape=\"false\"\n      width=\"40rem\"\n      top=\"7vh\"\n      class=\"show-image\"\n    >\n      <cropper\n        :style=\"`display:${showCropper}`\"\n        :src=\"imageUrl\"\n        ref=\"cropper\"\n        :stencil-props=\"{\n          aspectRatio: 2 / 3\n        }\"\n      ></cropper>\n      <div class=\"flexbox align-center justify-center mt-2-rem\">\n        <el-button @click=\"saveImage\">{{ $t('crop') }}</el-button>\n        <el-button @click=\"$refs.cropper.zoom(1.5)\"\n          ><i class=\"el-icon-zoom-in\"></i\n        ></el-button>\n        <el-button @click=\"$refs.cropper.zoom(0.5)\"\n          ><i class=\"el-icon-zoom-out\"></i\n        ></el-button>\n      </div>\n    </el-dialog>\n  </div>\n</template>\n\n<script>\n  import { mapActions } from 'vuex'\n  import { Cropper } from 'vue-advanced-cropper'\n  import 'vue-advanced-cropper/dist/style.css'\n  export default {\n    props: {\n      dialogVisible: {\n        type: Boolean,\n        default: false\n      }\n    },\n    data() {\n      return {\n        authors: [],\n        translators: [],\n        loading: false,\n        ialogShow: false,\n        dialogImageUrl: '',\n        disabled: false,\n        showImage: false,\n        imageFile: '',\n        file: '',\n        imageUrl: '',\n        imageError: '',\n        sizeError: '',\n        imageList: [],\n        showCropper: '',\n        dialogShow: false,\n        showCroppButton: false,\n        addBookForm: {\n          name: '',\n          author: '',\n          publisher: '',\n          genre: '',\n          publication_year: '',\n          translator: '',\n          image: '',\n          summary: ''\n        },\n        rules: {\n          name: [\n            {\n              required: true,\n              message: this.$i18n.t('field_required'),\n              trigger: 'blur'\n            }\n          ],\n          author: [\n            {\n              required: true,\n              message: this.$i18n.t('field_required'),\n              trigger: 'blur'\n            }\n          ],\n          publisher: [\n            {\n              required: true,\n              message: this.$i18n.t('field_required'),\n              trigger: 'blur'\n            }\n          ],\n          publication_year: [\n            {\n              required: true,\n              message: this.$i18n.t('field_required'),\n              trigger: 'blur'\n            }\n          ],\n          genre: [\n            {\n              required: true,\n              message: this.$i18n.t('field_required'),\n              trigger: 'blur'\n            }\n          ]\n        }\n      }\n    },\n    created() {\n      this.handleGetAuthors()\n      this.handleGetTranslators()\n    },\n    methods: {\n      ...mapActions(['handleRequest']),\n      addBook() {\n        this.loading = true\n        let formData = new FormData()\n        for (let [key, value] of Object.entries(this.addBookForm)) {\n          if (value) {\n            formData.append(key, value)\n          }\n        }\n        formData.append('image', this.imageFile)\n        this.handleRequest({\n          name: 'books/add',\n          action: 'create',\n          data: formData\n        })\n          .then(() => {\n            this.$message({\n              type: 'success',\n              message: this.$i18n.t('the_book_was_successfully_added')\n            })\n            this.handleClose()\n            // this.$emit('get-advertisements')\n            this.loading = false\n          })\n          .catch(() => {\n            this.loading = false\n            this.$message({\n              type: 'error',\n              message: this.$i18n.t(\n                'your_request_has_encountered_a_problem_please_try_again'\n              )\n            })\n          })\n      },\n      handleClose() {\n        this.$emit('close-dialog')\n        this.$refs['addBook'].resetFields()\n        this.imageList = []\n        this.file = ''\n        this.imageFile = ''\n        this.showImage = false\n      },\n      handleGetAuthors() {\n        this.handleRequest({\n          name: 'users/get_authors',\n          action: 'getAll',\n          data: {\n            query: {\n              sort: 'rate:desc'\n            }\n          }\n        }).then((res) => {\n          this.authors = res.data.authors\n        })\n      },\n      handleGetTranslators() {\n        this.handleRequest({\n          name: 'users/get_translators',\n          action: 'getAll',\n          data: {\n            query: {\n              sort: 'rate:desc'\n            }\n          }\n        }).then((res) => {\n          this.translators = res.data.translators\n        })\n      },\n      handleRemove() {\n        this.imageList = []\n        this.showImage = false\n        this.showCropper = 'block'\n      },\n      handleAvatarSuccess(res, file) {\n        let index = file.length - 1\n        const isJPG =\n          file[index].raw.type === 'image/png' ||\n          file[index].raw.type === 'image/jpg' ||\n          file[index].raw.type === 'image/jpeg'\n        const isLt2M = file[index].size / 1024 / 1024 < 1\n        if (!isJPG) {\n          this.imageError = this.$i18n.t('unsupported_image_type')\n        }\n        if (!isLt2M) {\n          this.sizeError = this.$i18n.t('extra_size')\n        }\n        if (isJPG && isLt2M) {\n          this.sizeError = ''\n          this.imageError = ''\n          this.file = file[index]\n          this.imageFile = file[index].raw\n          this.imageList = [file[index]]\n          this.imageUrl = URL.createObjectURL(file[index].raw)\n          this.showImage = true\n          this.showCroppButton = true\n        } else {\n          if (this.imageError) {\n            this.$message.error(this.imageError)\n          } else {\n            this.$message.error(this.sizeError)\n          }\n          this.showImage = false\n          this.imageList = []\n        }\n      },\n      saveImage() {\n        const { canvas } = this.$refs.cropper.getResult()\n        this.showCropper = 'none'\n        this.showCroppButton = false\n        this.imageUrl = canvas.toDataURL()\n        canvas.toBlob((blob) => {\n          this.file = new File([blob], this.file.name)\n          this.imageFile = new File([blob], this.file.name)\n        }, this.file.raw.type)\n      }\n    },\n    components: {\n      Cropper\n    }\n  }\n</script>\n"]}]}
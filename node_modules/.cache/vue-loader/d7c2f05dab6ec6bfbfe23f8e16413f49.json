{"remainingRequest":"/home/elaheh/Documents/University/project/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/elaheh/Documents/University/project/src/components/TopNav.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/elaheh/Documents/University/project/src/components/TopNav.vue","mtime":1630013696676},{"path":"/home/elaheh/Documents/University/project/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/elaheh/Documents/University/project/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/home/elaheh/Documents/University/project/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/elaheh/Documents/University/project/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCB7IG1hcEdldHRlcnMsIG1hcEFjdGlvbnMgfSBmcm9tICd2dWV4JwpleHBvcnQgZGVmYXVsdCB7CiAgZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIHdpbmRvd1dpZHRoOiB3aW5kb3cuaW5uZXJXaWR0aCwKICAgICAgb3B0aW9uczogW10sCiAgICAgIHNlYXJjaDogW10sCiAgICAgIGJvb2tzOiBbXSwKICAgICAgbG9hZGluZzogZmFsc2UKICAgIH0KICB9LAogIGNvbXB1dGVkOiB7CiAgICAuLi5tYXBHZXR0ZXJzKFsnaXNBdXRoZW50aWNhdGVkJywgJ3NlbGYnLCAnc2hvd01lbnUnXSkKICB9LAogIG1ldGhvZHM6IHsKICAgIC4uLm1hcEFjdGlvbnMoWwogICAgICAnaGFuZGxlUmVxdWVzdCcsCiAgICAgICdzZXRGdWxsc2NyZWVuJywKICAgICAgJ3NldFNlbGYnLAogICAgICAnc2V0U2hvd01lbnUnCiAgICBdKSwKICAgIGdldERhdGEoKSB7CiAgICAgIHRoaXMuaGFuZGxlUmVxdWVzdCh7CiAgICAgICAgbmFtZTogJ3VzZXJzL3NlbGYnLAogICAgICAgIGFjdGlvbjogJ2dldEFsbCcKICAgICAgfSkKICAgICAgICAudGhlbigocmVzKSA9PiB7CiAgICAgICAgICB0aGlzLnNldFNlbGYocmVzLmRhdGEpCiAgICAgICAgfSkKICAgICAgICAuY2F0Y2goKCkgPT4gewogICAgICAgICAgLy8gaWYgKAogICAgICAgICAgLy8gICB0aGlzLiRyb3V0ZS5uYW1lICE9PSAnRGFzaGJvYXJkJyAmJgogICAgICAgICAgLy8gICB0aGlzLiRyb3V0ZS5uYW1lICE9PSAnQWR2ZXJ0aXNlbWVudHMnICYmCiAgICAgICAgICAvLyAgIHRoaXMuJHJvdXRlLm5hbWUgIT09ICdWaWV3JwogICAgICAgICAgLy8gKSB7CiAgICAgICAgICAvLyAgIHRoaXMuJHJvdXRlci5wdXNoKHsKICAgICAgICAgIC8vICAgICBuYW1lOiAnRGFzaGJvYXJkJywKICAgICAgICAgIC8vICAgICBwYXJhbXM6IHsgc2hvd0FsZXJ0OiBmYWxzZSB9CiAgICAgICAgICAvLyAgIH0pCiAgICAgICAgICAvLyB9CiAgICAgICAgICAvLyB0aGlzLmxvZ291dCgpCiAgICAgICAgfSkKICAgICAgICAuZmluYWxseSgoKSA9PiB7CiAgICAgICAgICB0aGlzLnNldEZ1bGxzY3JlZW4oZmFsc2UpCiAgICAgICAgfSkKICAgIH0sCiAgICBnZXRXaWR0aE9uUmVzaXplKCkgewogICAgICB0aGlzLndpbmRvd1dpZHRoID0gd2luZG93LmlubmVyV2lkdGgKICAgIH0sCiAgICByZW1vdGVNZXRob2QocXVlcnkpIHsKICAgICAgaWYgKHF1ZXJ5ICE9PSAnJykgewogICAgICAgIHRoaXMubG9hZGluZyA9IHRydWUKICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHsKICAgICAgICAgIHRoaXMubG9hZGluZyA9IGZhbHNlCiAgICAgICAgICB0aGlzLm9wdGlvbnMgPSB0aGlzLmJvb2tzLmZpbHRlcigoaXRlbSkgPT4gewogICAgICAgICAgICByZXR1cm4gaXRlbS5uYW1lLnRvTG93ZXJDYXNlKCkuaW5kZXhPZihxdWVyeS50b0xvd2VyQ2FzZSgpKSA+IC0xCiAgICAgICAgICB9KQogICAgICAgIH0sIDIwMCkKICAgICAgfSBlbHNlIHsKICAgICAgICB0aGlzLm9wdGlvbnMgPSBbXQogICAgICB9CiAgICB9LAogICAgZ2V0Qm9va3MoKSB7CiAgICAgIHRoaXMuaGFuZGxlUmVxdWVzdCh7CiAgICAgICAgbmFtZTogJ2Jvb2tzL2xpc3QnLAogICAgICAgIGFjdGlvbjogJ2dldEFsbCcsCiAgICAgICAgZGF0YTogewogICAgICAgICAgcXVlcnk6IHsKICAgICAgICAgICAgc29ydDogJ2NyZWF0ZWRfYXQ6ZGVzYycKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0pLnRoZW4oKHJlcykgPT4gewogICAgICAgIHRoaXMuYm9va3MgPSByZXMuZGF0YS5ib29rcwogICAgICB9KQogICAgfSwKICAgIGhhbmRsZVJvdXRpbmcobmFtZSkgewogICAgICBpZiAodGhpcy4kcm91dGVyLmhpc3RvcnkuY3VycmVudC5uYW1lICE9PSBuYW1lKSB7CiAgICAgICAgdGhpcy4kcm91dGVyLnB1c2goeyBuYW1lIH0pCiAgICAgIH0KICAgIH0sCiAgICB0b2dnbGUoKSB7CiAgICAgIHRoaXMuc2V0U2hvd01lbnUoIXRoaXMuc2hvd01lbnUpCiAgICB9CiAgfSwKICBjcmVhdGVkKCkgewogICAgdGhpcy5nZXREYXRhKCkKICAgIHRoaXMuZ2V0Qm9va3MoKQogICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ3Jlc2l6ZScsIHRoaXMuZ2V0V2lkdGhPblJlc2l6ZSkKICB9LAogIGRlc3Ryb3llZCgpIHsKICAgIHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKCdyZXNpemUnLCB0aGlzLmdldFdpZHRoT25SZXNpemUpCiAgfSwKICBjb21wb25lbnRzOiB7CiAgICBxdWlja01lbnUKICB9Cn0K"},{"version":3,"sources":["TopNav.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA8GA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"TopNav.vue","sourceRoot":"src/components","sourcesContent":["<template>\n  <div\n    :class=\"`main-topnav flexbox ${windowWidth <= 940 ? 'mobile-topnav' : ''}`\"\n  >\n    <div class=\"topnav\">\n      <div class=\"flexbox align-center justify-center\">\n        <img\n          v-if=\"isAuthenticated\"\n          @click=\"toggle\"\n          class=\"menu\"\n          src=\"https://img.icons8.com/material-outlined/24/FFFFFF/menu--v1.png\"\n        />\n        <img\n          class=\"logo\"\n          @click=\"handleRouting('Dashboard')\"\n          src=\"../assets/images/BookLand.png\"\n        />\n        <!-- <b @click=\"handleRouting('Dashboard')\">\n          {{ $t('book_land') }}\n        </b> -->\n        <el-select\n          v-if=\"windowWidth > 940\"\n          v-model=\"search\"\n          filterable\n          remote\n          reserve-keyword\n          :placeholder=\"$t('search_book')\"\n          :remote-method=\"remoteMethod\"\n          :loading=\"loading\"\n        >\n          <el-option\n            v-for=\"item in options\"\n            :key=\"item.id\"\n            :label=\"item.name\"\n            :value=\"item.id\"\n          >\n            <span>{{ item.name }}</span>\n            <span style=\"display:block\">{{ item.author.name }}</span>\n          </el-option>\n        </el-select>\n      </div>\n      <div class=\"flexbox align-center justify-center\" v-if=\"!isAuthenticated\">\n        <el-button\n          type=\"text\"\n          class=\"signup\"\n          @click=\"$router.push({ name: 'SignUp' })\"\n        >\n          {{ $t('signup') }}\n        </el-button>\n        <el-button class=\"login mr-10\" @click=\"$router.push({ name: 'Login' })\">\n          {{ $t('login') }}\n        </el-button>\n      </div>\n      <div\n        class=\"flexbox align-center justify-center\"\n        v-if=\"isAuthenticated && windowWidth > 940\"\n      >\n        <span class=\"email ml-10\" v-if=\"self\">\n          {{ self.persian_username }}\n        </span>\n        <el-button type=\"text\" class=\"signup\" @click=\"handleRouting('Home')\">\n          {{ $t('my_page') }}\n        </el-button>\n        <el-button class=\"login mr-10\" @click=\"logout\">\n          {{ $t('logout') }}\n        </el-button>\n      </div>\n      <el-dropdown v-if=\"isAuthenticated && windowWidth <= 940\" trigger=\"click\">\n        <span class=\"email el-dropdown-link\" v-if=\"self\">\n          {{ self.persian_username }}\n          <i class=\"el-icon-arrow-down el-icon--right\"></i>\n        </span>\n        <el-dropdown-menu slot=\"dropdown\" v-if=\"self\">\n          <el-dropdown-item>\n            <span @click=\"handleRouting('Home')\">\n              {{ $t('my_page') }}\n            </span>\n          </el-dropdown-item>\n          <el-dropdown-item class=\"text-center\">\n            <span @click=\"logout\">\n              {{ $t('logout') }}\n            </span>\n          </el-dropdown-item>\n        </el-dropdown-menu>\n      </el-dropdown>\n    </div>\n    <el-select\n      v-if=\"windowWidth <= 940\"\n      v-model=\"search\"\n      filterable\n      remote\n      reserve-keyword\n      :placeholder=\"$t('search_book')\"\n      :remote-method=\"remoteMethod\"\n      :loading=\"loading\"\n    >\n      <el-option\n        v-for=\"item in options\"\n        :key=\"item.id\"\n        :label=\"item.name\"\n        :value=\"item.id\"\n      >\n        <span>{{ item.name }}</span>\n        <span style=\"display:block\">{{ item.author.name }}</span>\n      </el-option>\n    </el-select>\n  </div>\n</template>\n\n<script>\n  import { mapGetters, mapActions } from 'vuex'\n  export default {\n    data() {\n      return {\n        windowWidth: window.innerWidth,\n        options: [],\n        search: [],\n        books: [],\n        loading: false\n      }\n    },\n    computed: {\n      ...mapGetters(['isAuthenticated', 'self', 'showMenu'])\n    },\n    methods: {\n      ...mapActions([\n        'handleRequest',\n        'setFullscreen',\n        'setSelf',\n        'setShowMenu'\n      ]),\n      getData() {\n        this.handleRequest({\n          name: 'users/self',\n          action: 'getAll'\n        })\n          .then((res) => {\n            this.setSelf(res.data)\n          })\n          .catch(() => {\n            // if (\n            //   this.$route.name !== 'Dashboard' &&\n            //   this.$route.name !== 'Advertisements' &&\n            //   this.$route.name !== 'View'\n            // ) {\n            //   this.$router.push({\n            //     name: 'Dashboard',\n            //     params: { showAlert: false }\n            //   })\n            // }\n            // this.logout()\n          })\n          .finally(() => {\n            this.setFullscreen(false)\n          })\n      },\n      getWidthOnResize() {\n        this.windowWidth = window.innerWidth\n      },\n      remoteMethod(query) {\n        if (query !== '') {\n          this.loading = true\n          setTimeout(() => {\n            this.loading = false\n            this.options = this.books.filter((item) => {\n              return item.name.toLowerCase().indexOf(query.toLowerCase()) > -1\n            })\n          }, 200)\n        } else {\n          this.options = []\n        }\n      },\n      getBooks() {\n        this.handleRequest({\n          name: 'books/list',\n          action: 'getAll',\n          data: {\n            query: {\n              sort: 'created_at:desc'\n            }\n          }\n        }).then((res) => {\n          this.books = res.data.books\n        })\n      },\n      handleRouting(name) {\n        if (this.$router.history.current.name !== name) {\n          this.$router.push({ name })\n        }\n      },\n      toggle() {\n        this.setShowMenu(!this.showMenu)\n      }\n    },\n    created() {\n      this.getData()\n      this.getBooks()\n      window.addEventListener('resize', this.getWidthOnResize)\n    },\n    destroyed() {\n      window.removeEventListener('resize', this.getWidthOnResize)\n    },\n    components: {\n      quickMenu\n    }\n  }\n</script>\n"]}]}
{"remainingRequest":"/home/elaheh/Documents/University/project/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/elaheh/Documents/University/project/src/components/book/Add.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/elaheh/Documents/University/project/src/components/book/Add.vue","mtime":1626436487146},{"path":"/home/elaheh/Documents/University/project/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/elaheh/Documents/University/project/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/home/elaheh/Documents/University/project/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/elaheh/Documents/University/project/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCB7IG1hcEFjdGlvbnMgfSBmcm9tICd2dWV4JwppbXBvcnQgeyBDcm9wcGVyIH0gZnJvbSAndnVlLWFkdmFuY2VkLWNyb3BwZXInCmltcG9ydCAndnVlLWFkdmFuY2VkLWNyb3BwZXIvZGlzdC9zdHlsZS5jc3MnCmV4cG9ydCBkZWZhdWx0IHsKICBwcm9wczogewogICAgZGlhbG9nVmlzaWJsZTogewogICAgICB0eXBlOiBCb29sZWFuLAogICAgICBkZWZhdWx0OiBmYWxzZQogICAgfQogIH0sCiAgZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIGF1dGhvcnM6IFtdLAogICAgICB0cmFuc2xhdG9yczogW10sCiAgICAgIGxvYWRpbmc6IGZhbHNlLAogICAgICBkaWFsb2dJbWFnZVVybDogJycsCiAgICAgIGRpc2FibGVkOiBmYWxzZSwKICAgICAgc2hvd0ltYWdlOiBmYWxzZSwKICAgICAgaW1hZ2VGaWxlOiAnJywKICAgICAgZmlsZTogJycsCiAgICAgIGltYWdlVXJsOiAnJywKICAgICAgaW1hZ2VFcnJvcjogJycsCiAgICAgIHNpemVFcnJvcjogJycsCiAgICAgIGltYWdlTGlzdDogW10sCiAgICAgIHNob3dDcm9wcGVyOiAnJywKICAgICAgZGlhbG9nU2hvdzogZmFsc2UsCiAgICAgIHNob3dDcm9wcEJ1dHRvbjogZmFsc2UsCiAgICAgIGFkZEJvb2tGb3JtOiB7CiAgICAgICAgbmFtZTogJycsCiAgICAgICAgYXV0aG9yOiAnJywKICAgICAgICBwdWJsaXNoZXI6ICcnLAogICAgICAgIGdlbnJlOiAnJywKICAgICAgICBwdWJsaWNhdGlvbl95ZWFyOiAnJywKICAgICAgICB0cmFuc2xhdG9yOiAnJywKICAgICAgICBpbWFnZTogJycsCiAgICAgICAgc3VtbWFyeTogJycKICAgICAgfSwKICAgICAgcnVsZXM6IHsKICAgICAgICBuYW1lOiBbCiAgICAgICAgICB7CiAgICAgICAgICAgIHJlcXVpcmVkOiB0cnVlLAogICAgICAgICAgICBtZXNzYWdlOiB0aGlzLiRpMThuLnQoJ2ZpZWxkX3JlcXVpcmVkJyksCiAgICAgICAgICAgIHRyaWdnZXI6ICdibHVyJwogICAgICAgICAgfQogICAgICAgIF0sCiAgICAgICAgYXV0aG9yOiBbCiAgICAgICAgICB7CiAgICAgICAgICAgIHJlcXVpcmVkOiB0cnVlLAogICAgICAgICAgICBtZXNzYWdlOiB0aGlzLiRpMThuLnQoJ2ZpZWxkX3JlcXVpcmVkJykKICAgICAgICAgIH0KICAgICAgICBdLAogICAgICAgIHB1Ymxpc2hlcjogWwogICAgICAgICAgewogICAgICAgICAgICByZXF1aXJlZDogdHJ1ZSwKICAgICAgICAgICAgbWVzc2FnZTogdGhpcy4kaTE4bi50KCdmaWVsZF9yZXF1aXJlZCcpLAogICAgICAgICAgICB0cmlnZ2VyOiAnYmx1cicKICAgICAgICAgIH0KICAgICAgICBdLAogICAgICAgIHB1YmxpY2F0aW9uX3llYXI6IFsKICAgICAgICAgIHsKICAgICAgICAgICAgcmVxdWlyZWQ6IHRydWUsCiAgICAgICAgICAgIG1lc3NhZ2U6IHRoaXMuJGkxOG4udCgnZmllbGRfcmVxdWlyZWQnKSwKICAgICAgICAgICAgdHJpZ2dlcjogJ2JsdXInCiAgICAgICAgICB9CiAgICAgICAgXSwKICAgICAgICBnZW5yZTogWwogICAgICAgICAgewogICAgICAgICAgICByZXF1aXJlZDogdHJ1ZSwKICAgICAgICAgICAgbWVzc2FnZTogdGhpcy4kaTE4bi50KCdmaWVsZF9yZXF1aXJlZCcpLAogICAgICAgICAgICB0cmlnZ2VyOiAnYmx1cicKICAgICAgICAgIH0KICAgICAgICBdCiAgICAgIH0KICAgIH0KICB9LAogIGNyZWF0ZWQoKSB7CiAgICB0aGlzLmhhbmRsZUdldEF1dGhvcnMoKQogICAgdGhpcy5oYW5kbGVHZXRUcmFuc2xhdG9ycygpCiAgfSwKICBtZXRob2RzOiB7CiAgICAuLi5tYXBBY3Rpb25zKFsnaGFuZGxlUmVxdWVzdCddKSwKICAgIGFkZEJvb2soKSB7CiAgICAgIHRoaXMubG9hZGluZyA9IHRydWUKICAgICAgbGV0IGZvcm1EYXRhID0gbmV3IEZvcm1EYXRhKCkKICAgICAgZm9yIChsZXQgW2tleSwgdmFsdWVdIG9mIE9iamVjdC5lbnRyaWVzKHRoaXMuYWRkQm9va0Zvcm0pKSB7CiAgICAgICAgaWYgKHZhbHVlKSB7CiAgICAgICAgICBmb3JtRGF0YS5hcHBlbmQoa2V5LCB2YWx1ZSkKICAgICAgICB9CiAgICAgIH0KICAgICAgZm9ybURhdGEuYXBwZW5kKCdpbWFnZScsIHRoaXMuaW1hZ2VGaWxlKQogICAgICB0aGlzLmhhbmRsZVJlcXVlc3QoewogICAgICAgIG5hbWU6ICdib29rcy9hZGQnLAogICAgICAgIGFjdGlvbjogJ2NyZWF0ZScsCiAgICAgICAgZGF0YTogZm9ybURhdGEKICAgICAgfSkKICAgICAgICAudGhlbigoKSA9PiB7CiAgICAgICAgICB0aGlzLiRtZXNzYWdlKHsKICAgICAgICAgICAgdHlwZTogJ3N1Y2Nlc3MnLAogICAgICAgICAgICBtZXNzYWdlOiB0aGlzLiRpMThuLnQoJ3RoZV9ib29rX3dhc19zdWNjZXNzZnVsbHlfYWRkZWQnKQogICAgICAgICAgfSkKICAgICAgICAgIHRoaXMuaGFuZGxlQ2xvc2UoKQogICAgICAgICAgLy8gdGhpcy4kZW1pdCgnZ2V0LWFkdmVydGlzZW1lbnRzJykKICAgICAgICAgIHRoaXMubG9hZGluZyA9IGZhbHNlCiAgICAgICAgfSkKICAgICAgICAuY2F0Y2goKCkgPT4gewogICAgICAgICAgdGhpcy5sb2FkaW5nID0gZmFsc2UKICAgICAgICAgIHRoaXMuJG1lc3NhZ2UoewogICAgICAgICAgICB0eXBlOiAnZXJyb3InLAogICAgICAgICAgICBtZXNzYWdlOiB0aGlzLiRpMThuLnQoCiAgICAgICAgICAgICAgJ3lvdXJfcmVxdWVzdF9oYXNfZW5jb3VudGVyZWRfYV9wcm9ibGVtX3BsZWFzZV90cnlfYWdhaW4nCiAgICAgICAgICAgICkKICAgICAgICAgIH0pCiAgICAgICAgfSkKICAgIH0sCiAgICBoYW5kbGVDbG9zZSgpIHsKICAgICAgdGhpcy4kZW1pdCgnY2xvc2UtZGlhbG9nJykKICAgICAgdGhpcy4kcmVmc1snYWRkQm9vayddLnJlc2V0RmllbGRzKCkKICAgICAgdGhpcy5pbWFnZUxpc3QgPSBbXQogICAgICB0aGlzLmZpbGUgPSAnJwogICAgICB0aGlzLmltYWdlRmlsZSA9ICcnCiAgICAgIHRoaXMuc2hvd0ltYWdlID0gZmFsc2UKICAgIH0sCiAgICBoYW5kbGVHZXRBdXRob3JzKCkgewogICAgICB0aGlzLmhhbmRsZVJlcXVlc3QoewogICAgICAgIG5hbWU6ICd1c2Vycy9nZXRfYXV0aG9ycycsCiAgICAgICAgYWN0aW9uOiAnZ2V0QWxsJywKICAgICAgICBkYXRhOiB7CiAgICAgICAgICBxdWVyeTogewogICAgICAgICAgICBzb3J0OiAncmF0ZTpkZXNjJwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfSkudGhlbigocmVzKSA9PiB7CiAgICAgICAgdGhpcy5hdXRob3JzID0gcmVzLmRhdGEuYXV0aG9ycwogICAgICB9KQogICAgfSwKICAgIGhhbmRsZUdldFRyYW5zbGF0b3JzKCkgewogICAgICB0aGlzLmhhbmRsZVJlcXVlc3QoewogICAgICAgIG5hbWU6ICd1c2Vycy9nZXRfdHJhbnNsYXRvcnMnLAogICAgICAgIGFjdGlvbjogJ2dldEFsbCcsCiAgICAgICAgZGF0YTogewogICAgICAgICAgcXVlcnk6IHsKICAgICAgICAgICAgc29ydDogJ3JhdGU6ZGVzYycKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0pLnRoZW4oKHJlcykgPT4gewogICAgICAgIHRoaXMudHJhbnNsYXRvcnMgPSByZXMuZGF0YS50cmFuc2xhdG9ycwogICAgICB9KQogICAgfSwKICAgIGhhbmRsZVJlbW92ZSgpIHsKICAgICAgdGhpcy5pbWFnZUxpc3QgPSBbXQogICAgICB0aGlzLnNob3dJbWFnZSA9IGZhbHNlCiAgICAgIHRoaXMuc2hvd0Nyb3BwZXIgPSAnYmxvY2snCiAgICB9LAogICAgaGFuZGxlQXZhdGFyU3VjY2VzcyhyZXMsIGZpbGUpIHsKICAgICAgbGV0IGluZGV4ID0gZmlsZS5sZW5ndGggLSAxCiAgICAgIGNvbnN0IGlzSlBHID0KICAgICAgICBmaWxlW2luZGV4XS5yYXcudHlwZSA9PT0gJ2ltYWdlL3BuZycgfHwKICAgICAgICBmaWxlW2luZGV4XS5yYXcudHlwZSA9PT0gJ2ltYWdlL2pwZycgfHwKICAgICAgICBmaWxlW2luZGV4XS5yYXcudHlwZSA9PT0gJ2ltYWdlL2pwZWcnCiAgICAgIGNvbnN0IGlzTHQyTSA9IGZpbGVbaW5kZXhdLnNpemUgLyAxMDI0IC8gMTAyNCA8IDEKICAgICAgaWYgKCFpc0pQRykgewogICAgICAgIHRoaXMuaW1hZ2VFcnJvciA9IHRoaXMuJGkxOG4udCgndW5zdXBwb3J0ZWRfaW1hZ2VfdHlwZScpCiAgICAgIH0KICAgICAgaWYgKCFpc0x0Mk0pIHsKICAgICAgICB0aGlzLnNpemVFcnJvciA9IHRoaXMuJGkxOG4udCgnZXh0cmFfc2l6ZScpCiAgICAgIH0KICAgICAgaWYgKGlzSlBHICYmIGlzTHQyTSkgewogICAgICAgIHRoaXMuc2l6ZUVycm9yID0gJycKICAgICAgICB0aGlzLmltYWdlRXJyb3IgPSAnJwogICAgICAgIHRoaXMuZmlsZSA9IGZpbGVbaW5kZXhdCiAgICAgICAgdGhpcy5pbWFnZUZpbGUgPSBmaWxlW2luZGV4XS5yYXcKICAgICAgICB0aGlzLmltYWdlTGlzdCA9IFtmaWxlW2luZGV4XV0KICAgICAgICB0aGlzLmltYWdlVXJsID0gVVJMLmNyZWF0ZU9iamVjdFVSTChmaWxlW2luZGV4XS5yYXcpCiAgICAgICAgdGhpcy5zaG93SW1hZ2UgPSB0cnVlCiAgICAgICAgdGhpcy5zaG93Q3JvcHBCdXR0b24gPSB0cnVlCiAgICAgIH0gZWxzZSB7CiAgICAgICAgaWYgKHRoaXMuaW1hZ2VFcnJvcikgewogICAgICAgICAgdGhpcy4kbWVzc2FnZS5lcnJvcih0aGlzLmltYWdlRXJyb3IpCiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIHRoaXMuJG1lc3NhZ2UuZXJyb3IodGhpcy5zaXplRXJyb3IpCiAgICAgICAgfQogICAgICAgIHRoaXMuc2hvd0ltYWdlID0gZmFsc2UKICAgICAgICB0aGlzLmltYWdlTGlzdCA9IFtdCiAgICAgIH0KICAgIH0sCiAgICBzYXZlSW1hZ2UoKSB7CiAgICAgIGNvbnN0IHsgY2FudmFzIH0gPSB0aGlzLiRyZWZzLmNyb3BwZXIuZ2V0UmVzdWx0KCkKICAgICAgdGhpcy5zaG93Q3JvcHBlciA9ICdub25lJwogICAgICB0aGlzLnNob3dDcm9wcEJ1dHRvbiA9IGZhbHNlCiAgICAgIHRoaXMuaW1hZ2VVcmwgPSBjYW52YXMudG9EYXRhVVJMKCkKICAgICAgY2FudmFzLnRvQmxvYigoYmxvYikgPT4gewogICAgICAgIHRoaXMuZmlsZSA9IG5ldyBGaWxlKFtibG9iXSwgdGhpcy5maWxlLm5hbWUpCiAgICAgICAgdGhpcy5pbWFnZUZpbGUgPSBuZXcgRmlsZShbYmxvYl0sIHRoaXMuZmlsZS5uYW1lKQogICAgICB9LCB0aGlzLmZpbGUucmF3LnR5cGUpCiAgICB9CiAgfSwKICBjb21wb25lbnRzOiB7CiAgICBDcm9wcGVyCiAgfQp9Cg=="},{"version":3,"sources":["Add.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA4JA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Add.vue","sourceRoot":"src/components/book","sourcesContent":["<template>\n  <div>\n    <el-dialog\n      :title=\"$t('add_book')\"\n      :visible.sync=\"dialogVisible\"\n      :close-on-click-modal=\"false\"\n      :close-on-escape=\"false\"\n      :show-close=\"false\"\n      width=\"40rem\"\n      top=\"7vh\"\n      class=\"small add-book\"\n    >\n      <el-form :model=\"addBookForm\" ref=\"addBook\" :rules=\"rules\">\n        <div class=\"flexbox wrap item\">\n          <el-form-item :label=\"$t('book.name')\" prop=\"name\">\n            <el-input v-model=\"addBookForm.name\"></el-input>\n          </el-form-item>\n          <el-form-item :label=\"$t('book.author')\" prop=\"author\">\n            <el-select\n              v-model=\"addBookForm.author\"\n              filterable\n              allow-create\n              default-first-option\n              :placeholder=\"$t('choose')\"\n            >\n              <el-option\n                v-for=\"item in authors\"\n                :key=\"item.id\"\n                :label=\"item.name\"\n                :value=\"item.id\"\n              >\n              </el-option>\n            </el-select>\n          </el-form-item>\n        </div>\n        <div class=\"flexbox wrap item\">\n          <el-form-item :label=\"$t('book.publisher')\" prop=\"publisher\">\n            <el-input v-model=\"addBookForm.publisher\"></el-input>\n          </el-form-item>\n          <el-form-item :label=\"$t('book.genre')\" prop=\"genre\">\n            <el-input v-model=\"addBookForm.genre\"></el-input>\n          </el-form-item>\n        </div>\n        <div class=\"flexbox wrap item\">\n          <el-form-item\n            :label=\"$t('book.publication_year')\"\n            prop=\"publication_year\"\n          >\n            <el-input\n              type=\"number\"\n              v-model=\"addBookForm.publication_year\"\n            ></el-input>\n          </el-form-item>\n          <el-form-item :label=\"$t('book.translator')\" prop=\"translator\">\n            <el-select\n              v-model=\"addBookForm.translator\"\n              filterable\n              allow-create\n              default-first-option\n              :placeholder=\"$t('choose')\"\n            >\n              <el-option\n                v-for=\"item in translators\"\n                :key=\"item.id\"\n                :label=\"item.name\"\n                :value=\"item.id\"\n              >\n              </el-option>\n            </el-select>\n          </el-form-item>\n        </div>\n        <el-form-item :label=\"$t('book.summary')\" prop=\"summary\">\n          <el-input\n            type=\"textarea\"\n            class=\"rtl\"\n            resize=\"none\"\n            v-model=\"addBookForm.summary\"\n          ></el-input>\n        </el-form-item>\n        <el-form-item :label=\"$t('book.image')\" prop=\"image\">\n          <el-upload\n            :class=\"showImage ? 'hide-with-add-photo' : ''\"\n            action=\"#\"\n            id=\"pick-avatar\"\n            :disabled=\"showImage\"\n            :show-file-list=\"showImage\"\n            :file-list=\"imageList\"\n            list-type=\"picture-card\"\n            :on-change=\"handleAvatarSuccess\"\n            :auto-upload=\"false\"\n          >\n            <i slot=\"default\" class=\"el-icon-plus\" />\n            <div slot=\"file\" slot-scope=\"{ file }\">\n              <img\n                class=\"el-upload-list__item-thumbnail\"\n                :src=\"imageUrl\"\n                alt=\"\"\n              />\n              <span class=\"el-upload-list__item-actions\">\n                <span\n                  v-if=\"!disabled\"\n                  class=\"el-upload-list__item-delete\"\n                  @click=\"handleRemove(file)\"\n                >\n                  <i class=\"el-icon-delete\"></i>\n                </span>\n              </span>\n            </div>\n          </el-upload>\n          <el-dialog :visible.sync=\"dialogShow\">\n            <img width=\"100%\" :src=\"dialogImageUrl\" alt=\"\" />\n          </el-dialog>\n        </el-form-item>\n        <div class=\"text-center\">\n          <el-button\n            :loading=\"loading\"\n            class=\"ml-10\"\n            type=\"primary\"\n            @click=\"validateAndSubmitForm('addBook', addBook)\"\n          >\n            {{ $t('add') }}\n          </el-button>\n          <el-button @click=\"handleClose\"> {{ $t('close') }} </el-button>\n        </div>\n      </el-form>\n    </el-dialog>\n    <el-dialog\n      :visible.sync=\"showCroppButton\"\n      :close-on-click-modal=\"false\"\n      :close-on-escape=\"false\"\n      width=\"40rem\"\n      top=\"7vh\"\n      class=\"show-image\"\n    >\n      <cropper\n        :style=\"`display:${showCropper}`\"\n        :src=\"imageUrl\"\n        ref=\"cropper\"\n        :stencil-props=\"{\n          aspectRatio: 2 / 3\n        }\"\n      ></cropper>\n      <div class=\"flexbox align-center justify-center mt-2-rem\">\n        <el-button @click=\"saveImage\">{{ $t('crop') }}</el-button>\n        <el-button @click=\"$refs.cropper.zoom(1.5)\"\n          ><i class=\"el-icon-zoom-in\"></i\n        ></el-button>\n        <el-button @click=\"$refs.cropper.zoom(0.5)\"\n          ><i class=\"el-icon-zoom-out\"></i\n        ></el-button>\n      </div>\n    </el-dialog>\n  </div>\n</template>\n\n<script>\n  import { mapActions } from 'vuex'\n  import { Cropper } from 'vue-advanced-cropper'\n  import 'vue-advanced-cropper/dist/style.css'\n  export default {\n    props: {\n      dialogVisible: {\n        type: Boolean,\n        default: false\n      }\n    },\n    data() {\n      return {\n        authors: [],\n        translators: [],\n        loading: false,\n        dialogImageUrl: '',\n        disabled: false,\n        showImage: false,\n        imageFile: '',\n        file: '',\n        imageUrl: '',\n        imageError: '',\n        sizeError: '',\n        imageList: [],\n        showCropper: '',\n        dialogShow: false,\n        showCroppButton: false,\n        addBookForm: {\n          name: '',\n          author: '',\n          publisher: '',\n          genre: '',\n          publication_year: '',\n          translator: '',\n          image: '',\n          summary: ''\n        },\n        rules: {\n          name: [\n            {\n              required: true,\n              message: this.$i18n.t('field_required'),\n              trigger: 'blur'\n            }\n          ],\n          author: [\n            {\n              required: true,\n              message: this.$i18n.t('field_required')\n            }\n          ],\n          publisher: [\n            {\n              required: true,\n              message: this.$i18n.t('field_required'),\n              trigger: 'blur'\n            }\n          ],\n          publication_year: [\n            {\n              required: true,\n              message: this.$i18n.t('field_required'),\n              trigger: 'blur'\n            }\n          ],\n          genre: [\n            {\n              required: true,\n              message: this.$i18n.t('field_required'),\n              trigger: 'blur'\n            }\n          ]\n        }\n      }\n    },\n    created() {\n      this.handleGetAuthors()\n      this.handleGetTranslators()\n    },\n    methods: {\n      ...mapActions(['handleRequest']),\n      addBook() {\n        this.loading = true\n        let formData = new FormData()\n        for (let [key, value] of Object.entries(this.addBookForm)) {\n          if (value) {\n            formData.append(key, value)\n          }\n        }\n        formData.append('image', this.imageFile)\n        this.handleRequest({\n          name: 'books/add',\n          action: 'create',\n          data: formData\n        })\n          .then(() => {\n            this.$message({\n              type: 'success',\n              message: this.$i18n.t('the_book_was_successfully_added')\n            })\n            this.handleClose()\n            // this.$emit('get-advertisements')\n            this.loading = false\n          })\n          .catch(() => {\n            this.loading = false\n            this.$message({\n              type: 'error',\n              message: this.$i18n.t(\n                'your_request_has_encountered_a_problem_please_try_again'\n              )\n            })\n          })\n      },\n      handleClose() {\n        this.$emit('close-dialog')\n        this.$refs['addBook'].resetFields()\n        this.imageList = []\n        this.file = ''\n        this.imageFile = ''\n        this.showImage = false\n      },\n      handleGetAuthors() {\n        this.handleRequest({\n          name: 'users/get_authors',\n          action: 'getAll',\n          data: {\n            query: {\n              sort: 'rate:desc'\n            }\n          }\n        }).then((res) => {\n          this.authors = res.data.authors\n        })\n      },\n      handleGetTranslators() {\n        this.handleRequest({\n          name: 'users/get_translators',\n          action: 'getAll',\n          data: {\n            query: {\n              sort: 'rate:desc'\n            }\n          }\n        }).then((res) => {\n          this.translators = res.data.translators\n        })\n      },\n      handleRemove() {\n        this.imageList = []\n        this.showImage = false\n        this.showCropper = 'block'\n      },\n      handleAvatarSuccess(res, file) {\n        let index = file.length - 1\n        const isJPG =\n          file[index].raw.type === 'image/png' ||\n          file[index].raw.type === 'image/jpg' ||\n          file[index].raw.type === 'image/jpeg'\n        const isLt2M = file[index].size / 1024 / 1024 < 1\n        if (!isJPG) {\n          this.imageError = this.$i18n.t('unsupported_image_type')\n        }\n        if (!isLt2M) {\n          this.sizeError = this.$i18n.t('extra_size')\n        }\n        if (isJPG && isLt2M) {\n          this.sizeError = ''\n          this.imageError = ''\n          this.file = file[index]\n          this.imageFile = file[index].raw\n          this.imageList = [file[index]]\n          this.imageUrl = URL.createObjectURL(file[index].raw)\n          this.showImage = true\n          this.showCroppButton = true\n        } else {\n          if (this.imageError) {\n            this.$message.error(this.imageError)\n          } else {\n            this.$message.error(this.sizeError)\n          }\n          this.showImage = false\n          this.imageList = []\n        }\n      },\n      saveImage() {\n        const { canvas } = this.$refs.cropper.getResult()\n        this.showCropper = 'none'\n        this.showCroppButton = false\n        this.imageUrl = canvas.toDataURL()\n        canvas.toBlob((blob) => {\n          this.file = new File([blob], this.file.name)\n          this.imageFile = new File([blob], this.file.name)\n        }, this.file.raw.type)\n      }\n    },\n    components: {\n      Cropper\n    }\n  }\n</script>\n"]}]}
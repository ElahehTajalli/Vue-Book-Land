{"remainingRequest":"/home/elaheh/Documents/University/project/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/elaheh/Documents/University/project/src/components/EditProfile.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/elaheh/Documents/University/project/src/components/EditProfile.vue","mtime":1629486113269},{"path":"/home/elaheh/Documents/University/project/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/elaheh/Documents/University/project/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/home/elaheh/Documents/University/project/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/elaheh/Documents/University/project/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCB7IG1hcEFjdGlvbnMgfSBmcm9tICd2dWV4JwppbXBvcnQgeyBDcm9wcGVyIH0gZnJvbSAndnVlLWFkdmFuY2VkLWNyb3BwZXInCmltcG9ydCAndnVlLWFkdmFuY2VkLWNyb3BwZXIvZGlzdC9zdHlsZS5jc3MnCmV4cG9ydCBkZWZhdWx0IHsKICBwcm9wczogewogICAgZGlhbG9nVmlzaWJsZTogewogICAgICB0eXBlOiBCb29sZWFuLAogICAgICBkZWZhdWx0OiBmYWxzZQogICAgfSwKICAgIHNlbGY6IHsKICAgICAgdHlwZW9mOiBPYmplY3QsCiAgICAgIGRlZmF1bHQ6ICgpID0+IHt9CiAgICB9CiAgfSwKICBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgbG9hZGluZzogZmFsc2UsCiAgICAgIGRpYWxvZ0ltYWdlVXJsOiAnJywKICAgICAgc2hvd0ltYWdlOiBmYWxzZSwKICAgICAgaW1hZ2VGaWxlOiAnJywKICAgICAgZmlsZTogJycsCiAgICAgIGltYWdlVXJsOiAnJywKICAgICAgaW1hZ2VFcnJvcjogJycsCiAgICAgIHNpemVFcnJvcjogJycsCiAgICAgIGltYWdlTGlzdDogW10sCiAgICAgIHNob3dDcm9wcGVyOiAnJywKICAgICAgZGlhbG9nU2hvdzogZmFsc2UsCiAgICAgIHNob3dDcm9wcEJ1dHRvbjogZmFsc2UsCiAgICAgIHBhc3NMZW5ndGg6IGZhbHNlLAogICAgICBsYXRpblBhc3M6IGZhbHNlLAogICAgICBwYXNzTnVtYmVyOiBmYWxzZSwKICAgICAgcGVyc2lhblBhc3M6IGZhbHNlLAogICAgICBpc0VtYWlsRXhpc3RzOiBmYWxzZSwKICAgICAgaXNTaG93OiBmYWxzZSwKICAgICAgb2xkSW1hZ2U6IHRoaXMuc2VsZj8uaW1hZ2UsCiAgICAgIGVkaXRGb3JtOiB7CiAgICAgICAgZmlyc3RfbmFtZTogdGhpcy5zZWxmPy5maXJzdF9uYW1lLAogICAgICAgIGxhc3RfbmFtZTogdGhpcy5zZWxmPy5sYXN0X25hbWUsCiAgICAgICAgcGVyc2lhbl91c2VybmFtZTogdGhpcy5zZWxmPy5wZXJzaWFuX3VzZXJuYW1lLAogICAgICAgIGltYWdlOiAnJwogICAgICB9LAogICAgICBydWxlczogewogICAgICAgIGZpcnN0X25hbWU6IFsKICAgICAgICAgIHsKICAgICAgICAgICAgcmVxdWlyZWQ6IHRydWUsCiAgICAgICAgICAgIG1lc3NhZ2U6IHRoaXMuJGkxOG4udCgnZmllbGRfcmVxdWlyZWQnKSwKICAgICAgICAgICAgdHJpZ2dlcjogJ2JsdXInCiAgICAgICAgICB9CiAgICAgICAgXSwKICAgICAgICBsYXN0X25hbWU6IFsKICAgICAgICAgIHsKICAgICAgICAgICAgcmVxdWlyZWQ6IHRydWUsCiAgICAgICAgICAgIG1lc3NhZ2U6IHRoaXMuJGkxOG4udCgnZmllbGRfcmVxdWlyZWQnKQogICAgICAgICAgfQogICAgICAgIF0sCiAgICAgICAgcGVyc2lhbl91c2VybmFtZTogWwogICAgICAgICAgewogICAgICAgICAgICByZXF1aXJlZDogdHJ1ZSwKICAgICAgICAgICAgbWVzc2FnZTogdGhpcy4kaTE4bi50KCdmaWVsZF9yZXF1aXJlZCcpCiAgICAgICAgICB9CiAgICAgICAgXQogICAgICB9CiAgICB9CiAgfSwKICBtZXRob2RzOiB7CiAgICAuLi5tYXBBY3Rpb25zKFsnaGFuZGxlUmVxdWVzdCcsICdzZXRTZWxmJ10pLAogICAgZWRpdFVzZXIoKSB7CiAgICAgIHRoaXMubG9hZGluZyA9IHRydWUKICAgICAgbGV0IGZvcm1EYXRhID0gbmV3IEZvcm1EYXRhKCkKICAgICAgZm9yIChsZXQgW2tleSwgdmFsdWVdIG9mIE9iamVjdC5lbnRyaWVzKHRoaXMuZWRpdEZvcm0pKSB7CiAgICAgICAgaWYgKHZhbHVlKSB7CiAgICAgICAgICBmb3JtRGF0YS5hcHBlbmQoa2V5LCB2YWx1ZSkKICAgICAgICB9CiAgICAgIH0KICAgICAgaWYgKHRoaXMuaW1hZ2VGaWxlKSB7CiAgICAgICAgZm9ybURhdGEuYXBwZW5kKCdpbWFnZScsIHRoaXMuaW1hZ2VGaWxlKQogICAgICB9CiAgICAgIGZvcm1EYXRhLmFwcGVuZCgnZW1haWwnLCB0aGlzLnNlbGYuZW1haWwpCiAgICAgIHRoaXMuaGFuZGxlUmVxdWVzdCh7CiAgICAgICAgbmFtZTogJ3VzZXJzL2VkaXQnLAogICAgICAgIGFjdGlvbjogJ3BhdGNoJywKICAgICAgICBkYXRhOiB7IHRvUGF0Y2g6IGZvcm1EYXRhIH0KICAgICAgfSkKICAgICAgICAudGhlbigocmVzKSA9PiB7CiAgICAgICAgICB0aGlzLiRtZXNzYWdlKHsKICAgICAgICAgICAgdHlwZTogJ3N1Y2Nlc3MnLAogICAgICAgICAgICBtZXNzYWdlOiB0aGlzLiRpMThuLnQoJ3lvdXJfcHJvZmlsZV93YXNfc3VjY2Vzc2Z1bGx5X2VkaXRlZCcpCiAgICAgICAgICB9KQogICAgICAgICAgdGhpcy5zZXRTZWxmKHJlcy5kYXRhKQogICAgICAgICAgdGhpcy5oYW5kbGVDbG9zZSgpCiAgICAgICAgICB0aGlzLmxvYWRpbmcgPSBmYWxzZQogICAgICAgIH0pCiAgICAgICAgLmNhdGNoKChlcnJvcikgPT4gewogICAgICAgICAgdGhpcy5sb2FkaW5nID0gZmFsc2UKICAgICAgICAgIGlmIChlcnJvci5yZXNwb25zZS5zdGF0dXMgPT09IDQwMCkgewogICAgICAgICAgICB0aGlzLiRtZXNzYWdlKHsKICAgICAgICAgICAgICB0eXBlOiAnZXJyb3InLAogICAgICAgICAgICAgIG1lc3NhZ2U6IHRoaXMuJGkxOG4udCgKICAgICAgICAgICAgICAgICd1c2VyX3dpdGhfdGhpc19wZXJzaWFuX3VzZXJuYW1lX2FscmVhZHlfZXhpc3RzJwogICAgICAgICAgICAgICkKICAgICAgICAgICAgfSkKICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIHRoaXMuJG1lc3NhZ2UoewogICAgICAgICAgICAgIHR5cGU6ICdlcnJvcicsCiAgICAgICAgICAgICAgbWVzc2FnZTogdGhpcy4kaTE4bi50KAogICAgICAgICAgICAgICAgJ3lvdXJfcmVxdWVzdF9oYXNfZW5jb3VudGVyZWRfYV9wcm9ibGVtX3BsZWFzZV90cnlfYWdhaW4nCiAgICAgICAgICAgICAgKQogICAgICAgICAgICB9KQogICAgICAgICAgfQogICAgICAgIH0pCiAgICB9LAogICAgaGFuZGxlQ2xvc2UoKSB7CiAgICAgIHRoaXMuJGVtaXQoJ2Nsb3NlLWRpYWxvZycpCiAgICAgIHRoaXMuJHJlZnNbJ2VkaXRVc2VyJ10ucmVzZXRGaWVsZHMoKQogICAgICB0aGlzLmltYWdlTGlzdCA9IFtdCiAgICAgIHRoaXMuZmlsZSA9ICcnCiAgICAgIHRoaXMuaW1hZ2VGaWxlID0gJycKICAgICAgdGhpcy5zaG93SW1hZ2UgPSBmYWxzZQogICAgICB0aGlzLm9sZEltYWdlID0gdGhpcy5zZWxmLmltYWdlCiAgICB9LAogICAgaGFuZGxlUmVtb3ZlKCkgewogICAgICB0aGlzLmltYWdlTGlzdCA9IFtdCiAgICAgIHRoaXMuaW1hZ2VGaWxlID0gJycKICAgICAgdGhpcy5zaG93SW1hZ2UgPSBmYWxzZQogICAgICB0aGlzLnNob3dDcm9wcGVyID0gJ2Jsb2NrJwogICAgfSwKICAgIGhhbmRsZURlbGV0ZVBob3RvKCkgewogICAgICB0aGlzLm9sZEltYWdlID0gJycKICAgIH0sCiAgICBoYW5kbGVBdmF0YXJTdWNjZXNzKHJlcywgZmlsZSkgewogICAgICBsZXQgaW5kZXggPSBmaWxlLmxlbmd0aCAtIDEKICAgICAgY29uc3QgaXNKUEcgPQogICAgICAgIGZpbGVbaW5kZXhdLnJhdy50eXBlID09PSAnaW1hZ2UvcG5nJyB8fAogICAgICAgIGZpbGVbaW5kZXhdLnJhdy50eXBlID09PSAnaW1hZ2UvanBnJyB8fAogICAgICAgIGZpbGVbaW5kZXhdLnJhdy50eXBlID09PSAnaW1hZ2UvanBlZycKICAgICAgY29uc3QgaXNMdDJNID0gZmlsZVtpbmRleF0uc2l6ZSAvIDEwMjQgLyAxMDI0IDwgMQogICAgICBpZiAoIWlzSlBHKSB7CiAgICAgICAgdGhpcy5pbWFnZUVycm9yID0gdGhpcy4kaTE4bi50KCd1bnN1cHBvcnRlZF9pbWFnZV90eXBlJykKICAgICAgfQogICAgICBpZiAoIWlzTHQyTSkgewogICAgICAgIHRoaXMuc2l6ZUVycm9yID0gdGhpcy4kaTE4bi50KCdleHRyYV9zaXplJykKICAgICAgfQogICAgICBpZiAoaXNKUEcgJiYgaXNMdDJNKSB7CiAgICAgICAgdGhpcy5zaXplRXJyb3IgPSAnJwogICAgICAgIHRoaXMuaW1hZ2VFcnJvciA9ICcnCiAgICAgICAgdGhpcy5maWxlID0gZmlsZVtpbmRleF0KICAgICAgICB0aGlzLmltYWdlRmlsZSA9IGZpbGVbaW5kZXhdLnJhdwogICAgICAgIHRoaXMuaW1hZ2VMaXN0ID0gW2ZpbGVbaW5kZXhdXQogICAgICAgIHRoaXMuaW1hZ2VVcmwgPSBVUkwuY3JlYXRlT2JqZWN0VVJMKGZpbGVbaW5kZXhdLnJhdykKICAgICAgICB0aGlzLnNob3dJbWFnZSA9IHRydWUKICAgICAgICB0aGlzLnNob3dDcm9wcEJ1dHRvbiA9IHRydWUKICAgICAgfSBlbHNlIHsKICAgICAgICBpZiAodGhpcy5pbWFnZUVycm9yKSB7CiAgICAgICAgICB0aGlzLiRtZXNzYWdlLmVycm9yKHRoaXMuaW1hZ2VFcnJvcikKICAgICAgICB9IGVsc2UgewogICAgICAgICAgdGhpcy4kbWVzc2FnZS5lcnJvcih0aGlzLnNpemVFcnJvcikKICAgICAgICB9CiAgICAgICAgdGhpcy5zaG93SW1hZ2UgPSBmYWxzZQogICAgICAgIHRoaXMuaW1hZ2VMaXN0ID0gW10KICAgICAgfQogICAgfSwKICAgIHNhdmVJbWFnZSgpIHsKICAgICAgY29uc3QgeyBjYW52YXMgfSA9IHRoaXMuJHJlZnMuY3JvcHBlci5nZXRSZXN1bHQoKQogICAgICB0aGlzLnNob3dDcm9wcGVyID0gJ25vbmUnCiAgICAgIHRoaXMuc2hvd0Nyb3BwQnV0dG9uID0gZmFsc2UKICAgICAgdGhpcy5pbWFnZVVybCA9IGNhbnZhcy50b0RhdGFVUkwoKQogICAgICBjYW52YXMudG9CbG9iKChibG9iKSA9PiB7CiAgICAgICAgdGhpcy5maWxlID0gbmV3IEZpbGUoW2Jsb2JdLCB0aGlzLmZpbGUubmFtZSkKICAgICAgICB0aGlzLmltYWdlRmlsZSA9IG5ldyBGaWxlKFtibG9iXSwgdGhpcy5maWxlLm5hbWUpCiAgICAgIH0sIHRoaXMuZmlsZS5yYXcudHlwZSkKICAgIH0KICB9LAogIHdhdGNoOiB7CiAgICBzZWxmKCkgewogICAgICB0aGlzLmVkaXRGb3JtLmZpcnN0X25hbWUgPSB0aGlzLnNlbGYuZmlyc3RfbmFtZQogICAgICB0aGlzLmVkaXRGb3JtLmxhc3RfbmFtZSA9IHRoaXMuc2VsZi5sYXN0X25hbWUKICAgICAgdGhpcy5lZGl0Rm9ybS5wZXJzaWFuX3VzZXJuYW1lID0gdGhpcy5zZWxmLnBlcnNpYW5fdXNlcm5hbWUKICAgICAgdGhpcy5vbGRJbWFnZSA9IHRoaXMuc2VsZi5pbWFnZQogICAgfQogIH0sCiAgY29tcG9uZW50czogewogICAgQ3JvcHBlcgogIH0KfQo="},{"version":3,"sources":["EditProfile.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAiHA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"EditProfile.vue","sourceRoot":"src/components","sourcesContent":["<template>\n  <div>\n    <el-dialog\n      :title=\"$t('edit_information')\"\n      :visible.sync=\"dialogVisible\"\n      :close-on-click-modal=\"false\"\n      :close-on-escape=\"false\"\n      :show-close=\"false\"\n      width=\"40rem\"\n      top=\"7vh\"\n      class=\"small add-book\"\n    >\n      <el-form :model=\"editForm\" ref=\"editUser\" :rules=\"rules\">\n        <div class=\"flexbox wrap item\">\n          <el-form-item :label=\"$t('first_name')\" prop=\"first_name\">\n            <el-input v-model=\"editForm.first_name\"></el-input>\n          </el-form-item>\n          <el-form-item :label=\"$t('last_name')\" prop=\"last_name\">\n            <el-input v-model=\"editForm.last_name\"></el-input>\n          </el-form-item>\n        </div>\n        <div class=\"flexbox wrap item\">\n          <el-form-item :label=\"$t('persian_username')\" prop=\"persian_username\">\n            <el-input v-model=\"editForm.persian_username\"></el-input>\n          </el-form-item>\n        </div>\n        <el-form-item :label=\"$t('image')\" prop=\"image\">\n          <div v-if=\"oldImage\" class=\"old-image\">\n            <img :src=\"'http://127.0.0.1:8000' + oldImage\" />\n            <span class=\"el-upload-list__item-actions\" slot=\"default\">\n              <span\n                class=\"el-upload-list__item-delete\"\n                @click=\"handleDeletePhoto()\"\n              >\n                <i class=\"el-icon-delete\"></i>\n              </span>\n            </span>\n          </div>\n          <el-upload\n            :class=\"showImage ? 'hide-with-add-photo' : ''\"\n            action=\"#\"\n            id=\"pick-avatar\"\n            :disabled=\"showImage\"\n            :show-file-list=\"showImage\"\n            :file-list=\"imageList\"\n            list-type=\"picture-card\"\n            :on-change=\"handleAvatarSuccess\"\n            :auto-upload=\"false\"\n          >\n            <i v-if=\"!oldImage\" slot=\"default\" class=\"el-icon-plus\" />\n            <div slot=\"file\" slot-scope=\"{ file }\">\n              <img\n                class=\"el-upload-list__item-thumbnail\"\n                :src=\"imageUrl\"\n                alt=\"\"\n              />\n              <span class=\"el-upload-list__item-actions\">\n                <span\n                  class=\"el-upload-list__item-delete\"\n                  @click=\"handleRemove(file)\"\n                >\n                  <i class=\"el-icon-delete\"></i>\n                </span>\n              </span>\n            </div>\n          </el-upload>\n          <el-dialog :visible.sync=\"dialogShow\">\n            <img width=\"100%\" :src=\"dialogImageUrl\" alt=\"\" />\n          </el-dialog>\n        </el-form-item>\n        <div class=\"text-center\">\n          <el-button\n            :loading=\"loading\"\n            class=\"ml-10\"\n            type=\"primary\"\n            @click=\"validateAndSubmitForm('editUser', editUser)\"\n          >\n            {{ $t('edit') }}\n          </el-button>\n          <el-button @click=\"handleClose\"> {{ $t('close') }} </el-button>\n        </div>\n      </el-form>\n    </el-dialog>\n    <el-dialog\n      :visible.sync=\"showCroppButton\"\n      :close-on-click-modal=\"false\"\n      :close-on-escape=\"false\"\n      width=\"40rem\"\n      top=\"7vh\"\n      class=\"show-image\"\n    >\n      <cropper\n        :style=\"`display:${showCropper}`\"\n        :src=\"imageUrl\"\n        ref=\"cropper\"\n        :stencil-props=\"{\n          aspectRatio: 1\n        }\"\n      ></cropper>\n      <div class=\"flexbox align-center justify-center mt-2-rem\">\n        <el-button @click=\"saveImage\">{{ $t('crop') }}</el-button>\n        <el-button @click=\"$refs.cropper.zoom(1.5)\"\n          ><i class=\"el-icon-zoom-in\"></i\n        ></el-button>\n        <el-button @click=\"$refs.cropper.zoom(0.5)\"\n          ><i class=\"el-icon-zoom-out\"></i\n        ></el-button>\n      </div>\n    </el-dialog>\n  </div>\n</template>\n\n<script>\n  import { mapActions } from 'vuex'\n  import { Cropper } from 'vue-advanced-cropper'\n  import 'vue-advanced-cropper/dist/style.css'\n  export default {\n    props: {\n      dialogVisible: {\n        type: Boolean,\n        default: false\n      },\n      self: {\n        typeof: Object,\n        default: () => {}\n      }\n    },\n    data() {\n      return {\n        loading: false,\n        dialogImageUrl: '',\n        showImage: false,\n        imageFile: '',\n        file: '',\n        imageUrl: '',\n        imageError: '',\n        sizeError: '',\n        imageList: [],\n        showCropper: '',\n        dialogShow: false,\n        showCroppButton: false,\n        passLength: false,\n        latinPass: false,\n        passNumber: false,\n        persianPass: false,\n        isEmailExists: false,\n        isShow: false,\n        oldImage: this.self?.image,\n        editForm: {\n          first_name: this.self?.first_name,\n          last_name: this.self?.last_name,\n          persian_username: this.self?.persian_username,\n          image: ''\n        },\n        rules: {\n          first_name: [\n            {\n              required: true,\n              message: this.$i18n.t('field_required'),\n              trigger: 'blur'\n            }\n          ],\n          last_name: [\n            {\n              required: true,\n              message: this.$i18n.t('field_required')\n            }\n          ],\n          persian_username: [\n            {\n              required: true,\n              message: this.$i18n.t('field_required')\n            }\n          ]\n        }\n      }\n    },\n    methods: {\n      ...mapActions(['handleRequest', 'setSelf']),\n      editUser() {\n        this.loading = true\n        let formData = new FormData()\n        for (let [key, value] of Object.entries(this.editForm)) {\n          if (value) {\n            formData.append(key, value)\n          }\n        }\n        if (this.imageFile) {\n          formData.append('image', this.imageFile)\n        }\n        formData.append('email', this.self.email)\n        this.handleRequest({\n          name: 'users/edit',\n          action: 'patch',\n          data: { toPatch: formData }\n        })\n          .then((res) => {\n            this.$message({\n              type: 'success',\n              message: this.$i18n.t('your_profile_was_successfully_edited')\n            })\n            this.setSelf(res.data)\n            this.handleClose()\n            this.loading = false\n          })\n          .catch((error) => {\n            this.loading = false\n            if (error.response.status === 400) {\n              this.$message({\n                type: 'error',\n                message: this.$i18n.t(\n                  'user_with_this_persian_username_already_exists'\n                )\n              })\n            } else {\n              this.$message({\n                type: 'error',\n                message: this.$i18n.t(\n                  'your_request_has_encountered_a_problem_please_try_again'\n                )\n              })\n            }\n          })\n      },\n      handleClose() {\n        this.$emit('close-dialog')\n        this.$refs['editUser'].resetFields()\n        this.imageList = []\n        this.file = ''\n        this.imageFile = ''\n        this.showImage = false\n        this.oldImage = this.self.image\n      },\n      handleRemove() {\n        this.imageList = []\n        this.imageFile = ''\n        this.showImage = false\n        this.showCropper = 'block'\n      },\n      handleDeletePhoto() {\n        this.oldImage = ''\n      },\n      handleAvatarSuccess(res, file) {\n        let index = file.length - 1\n        const isJPG =\n          file[index].raw.type === 'image/png' ||\n          file[index].raw.type === 'image/jpg' ||\n          file[index].raw.type === 'image/jpeg'\n        const isLt2M = file[index].size / 1024 / 1024 < 1\n        if (!isJPG) {\n          this.imageError = this.$i18n.t('unsupported_image_type')\n        }\n        if (!isLt2M) {\n          this.sizeError = this.$i18n.t('extra_size')\n        }\n        if (isJPG && isLt2M) {\n          this.sizeError = ''\n          this.imageError = ''\n          this.file = file[index]\n          this.imageFile = file[index].raw\n          this.imageList = [file[index]]\n          this.imageUrl = URL.createObjectURL(file[index].raw)\n          this.showImage = true\n          this.showCroppButton = true\n        } else {\n          if (this.imageError) {\n            this.$message.error(this.imageError)\n          } else {\n            this.$message.error(this.sizeError)\n          }\n          this.showImage = false\n          this.imageList = []\n        }\n      },\n      saveImage() {\n        const { canvas } = this.$refs.cropper.getResult()\n        this.showCropper = 'none'\n        this.showCroppButton = false\n        this.imageUrl = canvas.toDataURL()\n        canvas.toBlob((blob) => {\n          this.file = new File([blob], this.file.name)\n          this.imageFile = new File([blob], this.file.name)\n        }, this.file.raw.type)\n      }\n    },\n    watch: {\n      self() {\n        this.editForm.first_name = this.self.first_name\n        this.editForm.last_name = this.self.last_name\n        this.editForm.persian_username = this.self.persian_username\n        this.oldImage = this.self.image\n      }\n    },\n    components: {\n      Cropper\n    }\n  }\n</script>\n"]}]}
{"remainingRequest":"/home/elaheh/Documents/University/Vue-Book-Land/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/elaheh/Documents/University/Vue-Book-Land/src/components/auth/EditInformation.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/elaheh/Documents/University/Vue-Book-Land/src/components/auth/EditInformation.vue","mtime":1630619124880},{"path":"/home/elaheh/Documents/University/Vue-Book-Land/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/elaheh/Documents/University/Vue-Book-Land/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/home/elaheh/Documents/University/Vue-Book-Land/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/elaheh/Documents/University/Vue-Book-Land/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCB7IG1hcEFjdGlvbnMsIG1hcEdldHRlcnMgfSBmcm9tICd2dWV4JwppbXBvcnQgewogIHBhc3N3b3JkTGVuZ3RoLAogIGxhdGluUGFzc3dvcmQsCiAgcGFzc3dvcmROdW1iZXIsCiAgcGVyc2lhblBhc3N3b3JkLAogIGNvcnJlY3RQYXNzd29yZAp9IGZyb20gJ0AvdXRpbHMvcGF0dGVybnMnCmV4cG9ydCBkZWZhdWx0IHsKICBkYXRhKCkgewogICAgY29uc3QgZ2V0U3VibWl0Rm9ybSA9ICgpID0+IHsKICAgICAgcmV0dXJuIHsKICAgICAgICBwZXJzaWFuX3VzZXJuYW1lOiAnJywKICAgICAgICBwYXNzd29yZDogJycsCiAgICAgICAgY29uZmlybV9wYXNzd29yZDogJycKICAgICAgfQogICAgfQogICAgY29uc3QgY2hlY2tQYXNzd29yZCA9IChydWxlLCB2YWx1ZSwgY2FsbGJhY2spID0+IHsKICAgICAgdGhpcy5yZXNldFBhc3N3b3JkVmFsaWRhdGlvbigpCiAgICAgIGlmICh2YWx1ZSA9PT0gJycpIHsKICAgICAgICBjYWxsYmFjayhuZXcgRXJyb3IodGhpcy4kaTE4bi50KCdpbnNlcnRfeW91cl9wYXNzd29yZCcpKSkKICAgICAgfSBlbHNlIGlmICgKICAgICAgICAhY29ycmVjdFBhc3N3b3JkLnRlc3QodmFsdWUpIHx8CiAgICAgICAgcGVyc2lhblBhc3N3b3JkLnRlc3QodmFsdWUpCiAgICAgICkgewogICAgICAgIGlmIChwYXNzd29yZExlbmd0aC50ZXN0KHZhbHVlKSkgewogICAgICAgICAgdGhpcy5wYXNzTGVuZ3RoID0gdHJ1ZQogICAgICAgICAgY2FsbGJhY2sobmV3IEVycm9yKHRoaXMuJGkxOG4udCgnd3JvbmdfcGFzc3dvcmQnKSkpCiAgICAgICAgfQogICAgICAgIGlmIChsYXRpblBhc3N3b3JkLnRlc3QodmFsdWUpKSB7CiAgICAgICAgICB0aGlzLmxhdGluUGFzcyA9IHRydWUKICAgICAgICAgIGNhbGxiYWNrKG5ldyBFcnJvcih0aGlzLiRpMThuLnQoJ3dyb25nX3Bhc3N3b3JkJykpKQogICAgICAgIH0KICAgICAgICBpZiAocGFzc3dvcmROdW1iZXIudGVzdCh2YWx1ZSkpIHsKICAgICAgICAgIHRoaXMucGFzc051bWJlciA9IHRydWUKICAgICAgICAgIGNhbGxiYWNrKG5ldyBFcnJvcih0aGlzLiRpMThuLnQoJ3dyb25nX3Bhc3N3b3JkJykpKQogICAgICAgIH0KICAgICAgICBpZiAoIXBlcnNpYW5QYXNzd29yZC50ZXN0KHZhbHVlKSAmJiB2YWx1ZS5sZW5ndGgpIHsKICAgICAgICAgIHRoaXMucGVyc2lhblBhc3MgPSB0cnVlCiAgICAgICAgICBjYWxsYmFjayhuZXcgRXJyb3IodGhpcy4kaTE4bi50KCd3cm9uZ19wYXNzd29yZCcpKSkKICAgICAgICB9CiAgICAgIH0gZWxzZSB7CiAgICAgICAgdGhpcy5zZXRQYXNzd29yZFZhbGlkYXRpb24oKQogICAgICAgIGNhbGxiYWNrKCkKICAgICAgfQogICAgfQogICAgY29uc3QgY2hlY2tDb25maXJtUGFzc3dvcmQgPSAocnVsZSwgdmFsdWUsIGNhbGxiYWNrKSA9PiB7CiAgICAgIGlmICh2YWx1ZSA9PT0gJycpIHsKICAgICAgICBjYWxsYmFjaygKICAgICAgICAgIG5ldyBFcnJvcih0aGlzLiRpMThuLnQoJ3BsZWFzZV9pbnNlcnRfcGFzc3dvcmRfY29uZmlybWF0aW9uJykpCiAgICAgICAgKQogICAgICB9IGVsc2UgaWYgKHZhbHVlICE9PSB0aGlzLnN1Ym1pdEZvcm0ucGFzc3dvcmQpIHsKICAgICAgICBjYWxsYmFjayhuZXcgRXJyb3IodGhpcy4kaTE4bi50KCdwYXNzd29yZHNfZG9fbm90X21hdGNoJykpKQogICAgICB9IGVsc2UgewogICAgICAgIGNhbGxiYWNrKCkKICAgICAgfQogICAgfQoKICAgIHJldHVybiB7CiAgICAgIGxvYWRpbmc6IGZhbHNlLAogICAgICBydWxlczogewogICAgICAgIHBlcnNpYW5fdXNlcm5hbWU6IFsKICAgICAgICAgIHsKICAgICAgICAgICAgcmVxdWlyZWQ6IHRydWUsCiAgICAgICAgICAgIG1lc3NhZ2U6IHRoaXMuJGkxOG4udCgnZmllbGRfcmVxdWlyZWQnKQogICAgICAgICAgfQogICAgICAgIF0sCiAgICAgICAgcGFzc3dvcmQ6IFsKICAgICAgICAgIHsKICAgICAgICAgICAgdmFsaWRhdG9yOiBjaGVja1Bhc3N3b3JkLAogICAgICAgICAgICByZXF1aXJlZDogdHJ1ZQogICAgICAgICAgfQogICAgICAgIF0sCiAgICAgICAgY29uZmlybV9wYXNzd29yZDogWwogICAgICAgICAgewogICAgICAgICAgICB2YWxpZGF0b3I6IGNoZWNrQ29uZmlybVBhc3N3b3JkLAogICAgICAgICAgICByZXF1aXJlZDogdHJ1ZSwKICAgICAgICAgICAgdHJpZ2dlcjogJ2JsdXInCiAgICAgICAgICB9CiAgICAgICAgXQogICAgICB9LAogICAgICBzdWJtaXRGb3JtOiBnZXRTdWJtaXRGb3JtKCksCiAgICAgIGlzU2hvdzogZmFsc2UsCiAgICAgIHBhc3NMZW5ndGg6IGZhbHNlLAogICAgICBsYXRpblBhc3M6IGZhbHNlLAogICAgICBwYXNzTnVtYmVyOiBmYWxzZSwKICAgICAgcGVyc2lhblBhc3M6IGZhbHNlLAogICAgICBpc0VtYWlsRXhpc3RzOiBmYWxzZQogICAgfQogIH0sCiAgY29tcHV0ZWQ6IHsKICAgIC4uLm1hcEdldHRlcnMoWyd1c2VyJ10pCiAgfSwKICBtZXRob2RzOiB7CiAgICAuLi5tYXBBY3Rpb25zKFsnaGFuZGxlUmVxdWVzdCddKSwKICAgIGRpc2FibGVMb2FkaW5nKCkgewogICAgICB0aGlzLmxvYWRpbmcgPSBmYWxzZQogICAgfSwKICAgIHJlc2V0UGFzc3dvcmRWYWxpZGF0aW9uKCkgewogICAgICB0aGlzLnBhc3NMZW5ndGggPSBmYWxzZQogICAgICB0aGlzLmxhdGluUGFzcyA9IGZhbHNlCiAgICAgIHRoaXMucGFzc051bWJlciA9IGZhbHNlCiAgICAgIHRoaXMucGVyc2lhblBhc3MgPSBmYWxzZQogICAgfSwKICAgIHNldFBhc3N3b3JkVmFsaWRhdGlvbigpIHsKICAgICAgdGhpcy5wYXNzTGVuZ3RoID0gdHJ1ZQogICAgICB0aGlzLmxhdGluUGFzcyA9IHRydWUKICAgICAgdGhpcy5wYXNzTnVtYmVyID0gdHJ1ZQogICAgICB0aGlzLnBlcnNpYW5QYXNzID0gdHJ1ZQogICAgfSwKICAgIGhhbmRsZVN1Ym1pdEZvcm0oKSB7CiAgICAgIHRoaXMuJHJlZnMuc3VibWl0Rm9ybS52YWxpZGF0ZSgodmFsaWQpID0+IHsKICAgICAgICBpZiAodmFsaWQpIHsKICAgICAgICAgIHRoaXMubG9hZGluZyA9IHRydWUKICAgICAgICAgIHRoaXMuaGFuZGxlU3VibWl0KCkKICAgICAgICB9IGVsc2UgewogICAgICAgICAgcmV0dXJuIGZhbHNlCiAgICAgICAgfQogICAgICB9KQogICAgfSwKICAgIGhhbmRsZVN1Ym1pdCgpIHsKICAgICAgbGV0IGZvcm1EYXRhID0gbmV3IEZvcm1EYXRhKCkKICAgICAgZm9ybURhdGEuYXBwZW5kKCdwZXJzaWFuX3VzZXJuYW1lJywgdGhpcy5zdWJtaXRGb3JtLnBlcnNpYW5fdXNlcm5hbWUpCiAgICAgIGZvcm1EYXRhLmFwcGVuZCgncGFzc3dvcmQnLCB0aGlzLnN1Ym1pdEZvcm0ucGFzc3dvcmQpCiAgICAgIGZvcm1EYXRhLmFwcGVuZCgnZW1haWwnLCB0aGlzLiRyb3V0ZS5xdWVyeS5lbWFpbCkKICAgICAgdGhpcy5oYW5kbGVSZXF1ZXN0KHsKICAgICAgICBuYW1lOiAndXNlcnMvZWRpdF9pbmZvJywKICAgICAgICBhY3Rpb246ICdwYXRjaCcsCiAgICAgICAgZGF0YTogeyB0b1BhdGNoOiBmb3JtRGF0YSB9CiAgICAgIH0pCiAgICAgICAgLnRoZW4oKHJlcykgPT4gewogICAgICAgICAgdGhpcy5kaXNhYmxlTG9hZGluZygpCiAgICAgICAgICB0aGlzLnNldFRva2VucyhyZXMudG9rZW4pCiAgICAgICAgICB0aGlzLiRyb3V0ZXIucHVzaCh7IHBhdGg6IGAvaG9tZWAgfSkKICAgICAgICB9KQogICAgICAgIC5jYXRjaCgoZXJyb3IpID0+IHsKICAgICAgICAgIHRoaXMuZGlzYWJsZUxvYWRpbmcoKQogICAgICAgICAgdGhpcy4kbWVzc2FnZSh7CiAgICAgICAgICAgIHR5cGU6ICdlcnJvcicsCiAgICAgICAgICAgIG1lc3NhZ2U6IHRoaXMuJGkxOG4udCgKICAgICAgICAgICAgICBlcnJvci5yZXNwb25zZS5kYXRhLmVycm9ycy5wZXJzaWFuX3VzZXJuYW1lCiAgICAgICAgICAgICksCiAgICAgICAgICAgIGN1c3RvbUNsYXNzOiAnYmctZXJyb3ItZGFyaycKICAgICAgICAgIH0pCiAgICAgICAgfSkKICAgIH0sCiAgICBoYW5kbGVLZXlQcmVzcyhlKSB7CiAgICAgIGxldCB7IGtleSB9ID0gZQogICAgICBpZiAoa2V5ID09PSAnRW50ZXInKSB7CiAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpCiAgICAgICAgLy8gdGhpcy5oYW5kbGVMb2dpbkZvcm1TdWJtaXQoKQogICAgICB9CiAgICB9LAogICAgY2hhbmdlUm91dGUobmFtZSkgewogICAgICB0aGlzLiRyb3V0ZXIucHVzaCh7IG5hbWUgfSkKICAgIH0KICB9LAogIGNyZWF0ZWQoKSB7CiAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdrZXlwcmVzcycsIHRoaXMuaGFuZGxlS2V5UHJlc3MpCiAgfSwKICBiZWZvcmVEZXN0cm95KCkgewogICAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcigna2V5cHJlc3MnLCB0aGlzLmhhbmRsZUtleVByZXNzKQogIH0KfQo="},{"version":3,"sources":["EditInformation.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAyEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"EditInformation.vue","sourceRoot":"src/components/auth","sourcesContent":["<template>\n  <div class=\"signup-page\">\n    <div class=\"logo text-center mb-10\" @click=\"changeRoute('Dashboard')\">\n      {{ $t('book_land') }}\n    </div>\n    <el-card>\n      <div slot=\"header\" class=\"clearfix\">\n        <span>{{ $t('complete_profile') }}</span>\n      </div>\n      <div>\n        <el-form\n          :model=\"submitForm\"\n          :rules=\"rules\"\n          ref=\"submitForm\"\n          label-position=\"top\"\n          :disabled=\"loading\"\n        >\n          <el-form-item prop=\"persian_username\">\n            <el-input\n              v-model=\"submitForm.persian_username\"\n              :placeholder=\"$t('persian_username')\"\n            ></el-input>\n          </el-form-item>\n          <el-form-item prop=\"password\">\n            <el-input\n              autocomplete=\"new-password\"\n              type=\"password\"\n              class=\"ltr text-right\"\n              @focus=\"isShow = true\"\n              @blur=\"isShow = false\"\n              v-model=\"submitForm.password\"\n              :placeholder=\"$t('password')\"\n            ></el-input>\n            <div v-if=\"isShow\" class=\"password-validation\">\n              <el-checkbox v-model=\"passLength\" disabled>{{\n                $t('eight_characters_or_longer')\n              }}</el-checkbox>\n              <el-checkbox v-model=\"latinPass\" disabled>{{\n                $t('contain_at_least_one_alphabetical_character')\n              }}</el-checkbox>\n              <el-checkbox v-model=\"passNumber\" disabled>{{\n                $t('contain_at_least_one_numeric_character')\n              }}</el-checkbox>\n              <el-checkbox v-model=\"persianPass\" disabled>{{\n                $t('use_english_character_and_numbers')\n              }}</el-checkbox>\n            </div>\n          </el-form-item>\n          <el-form-item prop=\"confirm_password\">\n            <el-input\n              class=\"ltr text-right\"\n              type=\"password\"\n              :placeholder=\"$t('confirm_password')\"\n              v-model=\"submitForm.confirm_password\"\n            >\n            </el-input>\n          </el-form-item>\n          <el-form-item class=\"flexbox align-center justify-center no_margin\">\n            <el-button\n              type=\"primary\"\n              @click=\"handleSubmitForm\"\n              :loading=\"loading\"\n            >\n              {{ $t('submit') }}\n            </el-button>\n          </el-form-item>\n        </el-form>\n      </div>\n    </el-card>\n  </div>\n</template>\n\n<script>\n  import { mapActions, mapGetters } from 'vuex'\n  import {\n    passwordLength,\n    latinPassword,\n    passwordNumber,\n    persianPassword,\n    correctPassword\n  } from '@/utils/patterns'\n  export default {\n    data() {\n      const getSubmitForm = () => {\n        return {\n          persian_username: '',\n          password: '',\n          confirm_password: ''\n        }\n      }\n      const checkPassword = (rule, value, callback) => {\n        this.resetPasswordValidation()\n        if (value === '') {\n          callback(new Error(this.$i18n.t('insert_your_password')))\n        } else if (\n          !correctPassword.test(value) ||\n          persianPassword.test(value)\n        ) {\n          if (passwordLength.test(value)) {\n            this.passLength = true\n            callback(new Error(this.$i18n.t('wrong_password')))\n          }\n          if (latinPassword.test(value)) {\n            this.latinPass = true\n            callback(new Error(this.$i18n.t('wrong_password')))\n          }\n          if (passwordNumber.test(value)) {\n            this.passNumber = true\n            callback(new Error(this.$i18n.t('wrong_password')))\n          }\n          if (!persianPassword.test(value) && value.length) {\n            this.persianPass = true\n            callback(new Error(this.$i18n.t('wrong_password')))\n          }\n        } else {\n          this.setPasswordValidation()\n          callback()\n        }\n      }\n      const checkConfirmPassword = (rule, value, callback) => {\n        if (value === '') {\n          callback(\n            new Error(this.$i18n.t('please_insert_password_confirmation'))\n          )\n        } else if (value !== this.submitForm.password) {\n          callback(new Error(this.$i18n.t('passwords_do_not_match')))\n        } else {\n          callback()\n        }\n      }\n\n      return {\n        loading: false,\n        rules: {\n          persian_username: [\n            {\n              required: true,\n              message: this.$i18n.t('field_required')\n            }\n          ],\n          password: [\n            {\n              validator: checkPassword,\n              required: true\n            }\n          ],\n          confirm_password: [\n            {\n              validator: checkConfirmPassword,\n              required: true,\n              trigger: 'blur'\n            }\n          ]\n        },\n        submitForm: getSubmitForm(),\n        isShow: false,\n        passLength: false,\n        latinPass: false,\n        passNumber: false,\n        persianPass: false,\n        isEmailExists: false\n      }\n    },\n    computed: {\n      ...mapGetters(['user'])\n    },\n    methods: {\n      ...mapActions(['handleRequest']),\n      disableLoading() {\n        this.loading = false\n      },\n      resetPasswordValidation() {\n        this.passLength = false\n        this.latinPass = false\n        this.passNumber = false\n        this.persianPass = false\n      },\n      setPasswordValidation() {\n        this.passLength = true\n        this.latinPass = true\n        this.passNumber = true\n        this.persianPass = true\n      },\n      handleSubmitForm() {\n        this.$refs.submitForm.validate((valid) => {\n          if (valid) {\n            this.loading = true\n            this.handleSubmit()\n          } else {\n            return false\n          }\n        })\n      },\n      handleSubmit() {\n        let formData = new FormData()\n        formData.append('persian_username', this.submitForm.persian_username)\n        formData.append('password', this.submitForm.password)\n        formData.append('email', this.$route.query.email)\n        this.handleRequest({\n          name: 'users/edit_info',\n          action: 'patch',\n          data: { toPatch: formData }\n        })\n          .then((res) => {\n            this.disableLoading()\n            this.setTokens(res.token)\n            this.$router.push({ path: `/home` })\n          })\n          .catch((error) => {\n            this.disableLoading()\n            this.$message({\n              type: 'error',\n              message: this.$i18n.t(\n                error.response.data.errors.persian_username\n              ),\n              customClass: 'bg-error-dark'\n            })\n          })\n      },\n      handleKeyPress(e) {\n        let { key } = e\n        if (key === 'Enter') {\n          e.preventDefault()\n          // this.handleLoginFormSubmit()\n        }\n      },\n      changeRoute(name) {\n        this.$router.push({ name })\n      }\n    },\n    created() {\n      document.addEventListener('keypress', this.handleKeyPress)\n    },\n    beforeDestroy() {\n      document.removeEventListener('keypress', this.handleKeyPress)\n    }\n  }\n</script>\n"]}]}
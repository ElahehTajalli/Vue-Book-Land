{"remainingRequest":"/home/elaheh/Documents/University/project/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/elaheh/Documents/University/project/src/components/TopNav.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/elaheh/Documents/University/project/src/components/TopNav.vue","mtime":1625857228466},{"path":"/home/elaheh/Documents/University/project/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/elaheh/Documents/University/project/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/home/elaheh/Documents/University/project/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/elaheh/Documents/University/project/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCB7IG1hcEdldHRlcnMsIG1hcEFjdGlvbnMgfSBmcm9tICd2dWV4JwpleHBvcnQgZGVmYXVsdCB7CiAgZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIHdpbmRvd1dpZHRoOiB3aW5kb3cuaW5uZXJXaWR0aCwKICAgICAgbmFtZTogJycsCiAgICAgIG9wdGlvbnM6IFtdLAogICAgICBzZWFyY2g6IFtdLAogICAgICBib29rczogW10sCiAgICAgIGxvYWRpbmc6IGZhbHNlCiAgICB9CiAgfSwKICBjb21wdXRlZDogewogICAgLi4ubWFwR2V0dGVycyhbJ2lzQXV0aGVudGljYXRlZCddKQogIH0sCiAgbWV0aG9kczogewogICAgLi4ubWFwQWN0aW9ucyhbJ2hhbmRsZVJlcXVlc3QnLCAnc2V0RnVsbHNjcmVlbicsICdzZXRTZWxmJ10pLAogICAgZ2V0RGF0YSgpIHsKICAgICAgdGhpcy5oYW5kbGVSZXF1ZXN0KHsKICAgICAgICBuYW1lOiAndXNlcnMvc2VsZicsCiAgICAgICAgYWN0aW9uOiAnZ2V0QWxsJwogICAgICB9KQogICAgICAgIC50aGVuKChyZXMpID0+IHsKICAgICAgICAgIHRoaXMuc2V0U2VsZihyZXMuZGF0YSkKICAgICAgICAgIHRoaXMubmFtZSA9IHJlcy5kYXRhLmZpcnN0X25hbWUgKyAnICcgKyByZXMuZGF0YS5sYXN0X25hbWUKICAgICAgICB9KQogICAgICAgIC5jYXRjaCgoKSA9PiB7CiAgICAgICAgICAvLyBpZiAoCiAgICAgICAgICAvLyAgIHRoaXMuJHJvdXRlLm5hbWUgIT09ICdEYXNoYm9hcmQnICYmCiAgICAgICAgICAvLyAgIHRoaXMuJHJvdXRlLm5hbWUgIT09ICdBZHZlcnRpc2VtZW50cycgJiYKICAgICAgICAgIC8vICAgdGhpcy4kcm91dGUubmFtZSAhPT0gJ1ZpZXcnCiAgICAgICAgICAvLyApIHsKICAgICAgICAgIC8vICAgdGhpcy4kcm91dGVyLnB1c2goewogICAgICAgICAgLy8gICAgIG5hbWU6ICdEYXNoYm9hcmQnLAogICAgICAgICAgLy8gICAgIHBhcmFtczogeyBzaG93QWxlcnQ6IGZhbHNlIH0KICAgICAgICAgIC8vICAgfSkKICAgICAgICAgIC8vIH0KICAgICAgICAgIC8vIHRoaXMubG9nb3V0KCkKICAgICAgICB9KQogICAgICAgIC5maW5hbGx5KCgpID0+IHsKICAgICAgICAgIHRoaXMuc2V0RnVsbHNjcmVlbihmYWxzZSkKICAgICAgICB9KQogICAgfSwKICAgIGdldFdpZHRoT25SZXNpemUoKSB7CiAgICAgIHRoaXMud2luZG93V2lkdGggPSB3aW5kb3cuaW5uZXJXaWR0aAogICAgfSwKICAgIHJlbW90ZU1ldGhvZChxdWVyeSkgewogICAgICBpZiAocXVlcnkgIT09ICcnKSB7CiAgICAgICAgdGhpcy5sb2FkaW5nID0gdHJ1ZQogICAgICAgIHNldFRpbWVvdXQoKCkgPT4gewogICAgICAgICAgdGhpcy5sb2FkaW5nID0gZmFsc2UKICAgICAgICAgIHRoaXMub3B0aW9ucyA9IHRoaXMuYm9va3MuZmlsdGVyKChpdGVtKSA9PiB7CiAgICAgICAgICAgIHJldHVybiBpdGVtLm5hbWUudG9Mb3dlckNhc2UoKS5pbmRleE9mKHF1ZXJ5LnRvTG93ZXJDYXNlKCkpID4gLTEKICAgICAgICAgIH0pCiAgICAgICAgfSwgMjAwKQogICAgICB9IGVsc2UgewogICAgICAgIHRoaXMub3B0aW9ucyA9IFtdCiAgICAgIH0KICAgIH0sCiAgICBnZXRCb29rcygpIHsKICAgICAgdGhpcy5oYW5kbGVSZXF1ZXN0KHsKICAgICAgICBuYW1lOiAnYm9va3MvZ2V0JywKICAgICAgICBhY3Rpb246ICdnZXRBbGwnLAogICAgICAgIGRhdGE6IHsKICAgICAgICAgIHF1ZXJ5OiB7CiAgICAgICAgICAgIHNvcnQ6ICdjcmVhdGVkX2F0OmRlc2MnCiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9KS50aGVuKChyZXMpID0+IHsKICAgICAgICB0aGlzLmJvb2tzID0gcmVzLmRhdGEuYm9va3MKICAgICAgfSkKICAgIH0KICB9LAogIGNyZWF0ZWQoKSB7CiAgICB0aGlzLmdldERhdGEoKQogICAgdGhpcy5nZXRCb29rcygpCiAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcigncmVzaXplJywgdGhpcy5nZXRXaWR0aE9uUmVzaXplKQogIH0sCiAgZGVzdHJveWVkKCkgewogICAgd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ3Jlc2l6ZScsIHRoaXMuZ2V0V2lkdGhPblJlc2l6ZSkKICB9Cn0K"},{"version":3,"sources":["TopNav.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAkDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"TopNav.vue","sourceRoot":"src/components","sourcesContent":["<template>\n  <div class=\"topnav\">\n    <div class=\"flexbox align-center justify-center\">\n      <b>\n        {{ $t('book_land') }}\n      </b>\n      <el-select\n        v-model=\"search\"\n        filterable\n        remote\n        reserve-keyword\n        :placeholder=\"$t('search_book')\"\n        :remote-method=\"remoteMethod\"\n        :loading=\"loading\"\n      >\n        <el-option\n          v-for=\"item in options\"\n          :key=\"item.id\"\n          :label=\"item.name\"\n          :value=\"item.id\"\n        >\n          <span>{{ item.name }}</span>\n          <span style=\"display:block\">{{ item.author.name }}</span>\n        </el-option>\n      </el-select>\n    </div>\n    <div class=\"flexbox align-center justify-center\" v-if=\"!isAuthenticated\">\n      <el-button\n        type=\"text\"\n        class=\"signup\"\n        @click=\"$router.push({ name: 'SignUp' })\"\n      >\n        {{ $t('signup') }}\n      </el-button>\n      <el-button class=\"login mr-10\" @click=\"$router.push({ name: 'Login' })\">\n        {{ $t('login') }}\n      </el-button>\n    </div>\n    <div class=\"flexbox align-center justify-center\" v-if=\"isAuthenticated\">\n      <span class=\"email ml-10\">\n        {{ name }}\n      </span>\n      <el-button class=\"login mr-10\" @click=\"logout\">\n        {{ $t('logout') }}\n      </el-button>\n    </div>\n  </div>\n</template>\n\n<script>\n  import { mapGetters, mapActions } from 'vuex'\n  export default {\n    data() {\n      return {\n        windowWidth: window.innerWidth,\n        name: '',\n        options: [],\n        search: [],\n        books: [],\n        loading: false\n      }\n    },\n    computed: {\n      ...mapGetters(['isAuthenticated'])\n    },\n    methods: {\n      ...mapActions(['handleRequest', 'setFullscreen', 'setSelf']),\n      getData() {\n        this.handleRequest({\n          name: 'users/self',\n          action: 'getAll'\n        })\n          .then((res) => {\n            this.setSelf(res.data)\n            this.name = res.data.first_name + ' ' + res.data.last_name\n          })\n          .catch(() => {\n            // if (\n            //   this.$route.name !== 'Dashboard' &&\n            //   this.$route.name !== 'Advertisements' &&\n            //   this.$route.name !== 'View'\n            // ) {\n            //   this.$router.push({\n            //     name: 'Dashboard',\n            //     params: { showAlert: false }\n            //   })\n            // }\n            // this.logout()\n          })\n          .finally(() => {\n            this.setFullscreen(false)\n          })\n      },\n      getWidthOnResize() {\n        this.windowWidth = window.innerWidth\n      },\n      remoteMethod(query) {\n        if (query !== '') {\n          this.loading = true\n          setTimeout(() => {\n            this.loading = false\n            this.options = this.books.filter((item) => {\n              return item.name.toLowerCase().indexOf(query.toLowerCase()) > -1\n            })\n          }, 200)\n        } else {\n          this.options = []\n        }\n      },\n      getBooks() {\n        this.handleRequest({\n          name: 'books/get',\n          action: 'getAll',\n          data: {\n            query: {\n              sort: 'created_at:desc'\n            }\n          }\n        }).then((res) => {\n          this.books = res.data.books\n        })\n      }\n    },\n    created() {\n      this.getData()\n      this.getBooks()\n      window.addEventListener('resize', this.getWidthOnResize)\n    },\n    destroyed() {\n      window.removeEventListener('resize', this.getWidthOnResize)\n    }\n  }\n</script>\n"]}]}
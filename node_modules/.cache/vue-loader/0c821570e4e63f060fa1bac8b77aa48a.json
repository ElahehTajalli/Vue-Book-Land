{"remainingRequest":"/home/elaheh/Documents/University/Vue-Book-Land/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/elaheh/Documents/University/Vue-Book-Land/src/components/EditPassword.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/elaheh/Documents/University/Vue-Book-Land/src/components/EditPassword.vue","mtime":1629486873370},{"path":"/home/elaheh/Documents/University/Vue-Book-Land/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/elaheh/Documents/University/Vue-Book-Land/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/home/elaheh/Documents/University/Vue-Book-Land/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/elaheh/Documents/University/Vue-Book-Land/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCB7IG1hcEFjdGlvbnMgfSBmcm9tICd2dWV4JwppbXBvcnQgewogIHBhc3N3b3JkTGVuZ3RoLAogIGxhdGluUGFzc3dvcmQsCiAgcGFzc3dvcmROdW1iZXIsCiAgcGVyc2lhblBhc3N3b3JkLAogIGNvcnJlY3RQYXNzd29yZAp9IGZyb20gJ0AvdXRpbHMvcGF0dGVybnMnCmV4cG9ydCBkZWZhdWx0IHsKICBwcm9wczogewogICAgZGlhbG9nVmlzaWJsZTogewogICAgICB0eXBlOiBCb29sZWFuLAogICAgICBkZWZhdWx0OiBmYWxzZQogICAgfSwKICAgIHNlbGY6IHsKICAgICAgdHlwZW9mOiBPYmplY3QsCiAgICAgIGRlZmF1bHQ6ICgpID0+IHt9CiAgICB9CiAgfSwKICBkYXRhKCkgewogICAgY29uc3QgY2hlY2tQYXNzd29yZCA9IChydWxlLCB2YWx1ZSwgY2FsbGJhY2spID0+IHsKICAgICAgdGhpcy5yZXNldFBhc3N3b3JkVmFsaWRhdGlvbigpCiAgICAgIGlmICh2YWx1ZSA9PT0gJycpIHsKICAgICAgICBjYWxsYmFjayhuZXcgRXJyb3IodGhpcy4kaTE4bi50KCdpbnNlcnRfeW91cl9wYXNzd29yZCcpKSkKICAgICAgfSBlbHNlIGlmICgKICAgICAgICAhY29ycmVjdFBhc3N3b3JkLnRlc3QodmFsdWUpIHx8CiAgICAgICAgcGVyc2lhblBhc3N3b3JkLnRlc3QodmFsdWUpCiAgICAgICkgewogICAgICAgIGlmIChwYXNzd29yZExlbmd0aC50ZXN0KHZhbHVlKSkgewogICAgICAgICAgdGhpcy5wYXNzTGVuZ3RoID0gdHJ1ZQogICAgICAgICAgY2FsbGJhY2sobmV3IEVycm9yKHRoaXMuJGkxOG4udCgnd3JvbmdfcGFzc3dvcmQnKSkpCiAgICAgICAgfQogICAgICAgIGlmIChsYXRpblBhc3N3b3JkLnRlc3QodmFsdWUpKSB7CiAgICAgICAgICB0aGlzLmxhdGluUGFzcyA9IHRydWUKICAgICAgICAgIGNhbGxiYWNrKG5ldyBFcnJvcih0aGlzLiRpMThuLnQoJ3dyb25nX3Bhc3N3b3JkJykpKQogICAgICAgIH0KICAgICAgICBpZiAocGFzc3dvcmROdW1iZXIudGVzdCh2YWx1ZSkpIHsKICAgICAgICAgIHRoaXMucGFzc051bWJlciA9IHRydWUKICAgICAgICAgIGNhbGxiYWNrKG5ldyBFcnJvcih0aGlzLiRpMThuLnQoJ3dyb25nX3Bhc3N3b3JkJykpKQogICAgICAgIH0KICAgICAgICBpZiAoIXBlcnNpYW5QYXNzd29yZC50ZXN0KHZhbHVlKSAmJiB2YWx1ZS5sZW5ndGgpIHsKICAgICAgICAgIHRoaXMucGVyc2lhblBhc3MgPSB0cnVlCiAgICAgICAgICBjYWxsYmFjayhuZXcgRXJyb3IodGhpcy4kaTE4bi50KCd3cm9uZ19wYXNzd29yZCcpKSkKICAgICAgICB9CiAgICAgIH0gZWxzZSB7CiAgICAgICAgY29uc29sZS5sb2coJ2Vsc2UnKQogICAgICAgIHRoaXMuc2V0UGFzc3dvcmRWYWxpZGF0aW9uKCkKICAgICAgICBjYWxsYmFjaygpCiAgICAgIH0KICAgIH0KICAgIHJldHVybiB7CiAgICAgIGxvYWRpbmc6IGZhbHNlLAogICAgICBkaWFsb2dJbWFnZVVybDogJycsCiAgICAgIHBhc3NMZW5ndGg6IGZhbHNlLAogICAgICBsYXRpblBhc3M6IGZhbHNlLAogICAgICBwYXNzTnVtYmVyOiBmYWxzZSwKICAgICAgcGVyc2lhblBhc3M6IGZhbHNlLAogICAgICBpc1Nob3c6IGZhbHNlLAogICAgICBlZGl0Rm9ybTogewogICAgICAgIHBhc3N3b3JkOiAnJwogICAgICB9LAogICAgICBydWxlczogewogICAgICAgIHBhc3N3b3JkOiBbCiAgICAgICAgICB7CiAgICAgICAgICAgIHJlcXVpcmVkOiB0cnVlLAogICAgICAgICAgICB2YWxpZGF0b3I6IGNoZWNrUGFzc3dvcmQKICAgICAgICAgIH0KICAgICAgICBdCiAgICAgIH0KICAgIH0KICB9LAogIG1ldGhvZHM6IHsKICAgIC4uLm1hcEFjdGlvbnMoWydoYW5kbGVSZXF1ZXN0JywgJ3NldFNlbGYnXSksCiAgICByZXNldFBhc3N3b3JkVmFsaWRhdGlvbigpIHsKICAgICAgdGhpcy5wYXNzTGVuZ3RoID0gZmFsc2UKICAgICAgdGhpcy5sYXRpblBhc3MgPSBmYWxzZQogICAgICB0aGlzLnBhc3NOdW1iZXIgPSBmYWxzZQogICAgICB0aGlzLnBlcnNpYW5QYXNzID0gZmFsc2UKICAgIH0sCiAgICBzZXRQYXNzd29yZFZhbGlkYXRpb24oKSB7CiAgICAgIHRoaXMucGFzc0xlbmd0aCA9IHRydWUKICAgICAgdGhpcy5sYXRpblBhc3MgPSB0cnVlCiAgICAgIHRoaXMucGFzc051bWJlciA9IHRydWUKICAgICAgdGhpcy5wZXJzaWFuUGFzcyA9IHRydWUKICAgIH0sCiAgICBlZGl0VXNlcigpIHsKICAgICAgdGhpcy5sb2FkaW5nID0gdHJ1ZQoKICAgICAgdGhpcy5oYW5kbGVSZXF1ZXN0KHsKICAgICAgICBuYW1lOiAndXNlcnMvZm9yZ290X3Bhc3N3b3JkJywKICAgICAgICBhY3Rpb246ICdwYXRjaFVzZXInLAogICAgICAgIGRhdGE6IHsKICAgICAgICAgIHRvUGF0Y2g6IHsKICAgICAgICAgICAgZW1haWw6IHRoaXMuc2VsZi5lbWFpbCwKICAgICAgICAgICAgcGFzc3dvcmQ6IHRoaXMuZWRpdEZvcm0ucGFzc3dvcmQKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0pCiAgICAgICAgLnRoZW4oKCkgPT4gewogICAgICAgICAgdGhpcy4kbWVzc2FnZSh7CiAgICAgICAgICAgIHR5cGU6ICdzdWNjZXNzJywKICAgICAgICAgICAgbWVzc2FnZTogdGhpcy4kaTE4bi50KCd5b3VyX3Bhc3N3b3JkX3dhc19zdWNjZXNzZnVsbHlfZWRpdGVkJykKICAgICAgICAgIH0pCiAgICAgICAgICB0aGlzLmhhbmRsZUNsb3NlKCkKICAgICAgICAgIHRoaXMubG9hZGluZyA9IGZhbHNlCiAgICAgICAgfSkKICAgICAgICAuY2F0Y2goKGVycm9yKSA9PiB7CiAgICAgICAgICB0aGlzLmxvYWRpbmcgPSBmYWxzZQogICAgICAgICAgaWYgKGVycm9yLnJlc3BvbnNlLnN0YXR1cyA9PT0gNDAwKSB7CiAgICAgICAgICAgIHRoaXMuJG1lc3NhZ2UoewogICAgICAgICAgICAgIHR5cGU6ICdlcnJvcicsCiAgICAgICAgICAgICAgbWVzc2FnZTogdGhpcy4kaTE4bi50KAogICAgICAgICAgICAgICAgJ3VzZXJfd2l0aF90aGlzX3BlcnNpYW5fdXNlcm5hbWVfYWxyZWFkeV9leGlzdHMnCiAgICAgICAgICAgICAgKQogICAgICAgICAgICB9KQogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgdGhpcy4kbWVzc2FnZSh7CiAgICAgICAgICAgICAgdHlwZTogJ2Vycm9yJywKICAgICAgICAgICAgICBtZXNzYWdlOiB0aGlzLiRpMThuLnQoCiAgICAgICAgICAgICAgICAneW91cl9yZXF1ZXN0X2hhc19lbmNvdW50ZXJlZF9hX3Byb2JsZW1fcGxlYXNlX3RyeV9hZ2FpbicKICAgICAgICAgICAgICApCiAgICAgICAgICAgIH0pCiAgICAgICAgICB9CiAgICAgICAgfSkKICAgIH0sCiAgICBoYW5kbGVDbG9zZSgpIHsKICAgICAgdGhpcy4kZW1pdCgnY2xvc2UtZGlhbG9nJykKICAgICAgdGhpcy4kcmVmc1snZWRpdFVzZXInXS5yZXNldEZpZWxkcygpCiAgICB9CiAgfQp9Cg=="},{"version":3,"sources":["EditPassword.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAqDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"EditPassword.vue","sourceRoot":"src/components","sourcesContent":["<template>\n  <div>\n    <el-dialog\n      :title=\"$t('edit_password')\"\n      :visible.sync=\"dialogVisible\"\n      :close-on-click-modal=\"false\"\n      :close-on-escape=\"false\"\n      :show-close=\"false\"\n      width=\"40rem\"\n      top=\"7vh\"\n      class=\"small add-book\"\n    >\n      <el-form :model=\"editForm\" ref=\"editUser\" :rules=\"rules\">\n        <el-form-item :label=\"$t('password')\" prop=\"password\">\n          <el-input\n            autocomplete=\"new-password\"\n            @focus=\"isShow = true\"\n            @blur=\"isShow = false\"\n            type=\"password\"\n            v-model=\"editForm.password\"\n          ></el-input>\n          <div v-if=\"isShow\" class=\"password-validation\">\n            <el-checkbox v-model=\"passLength\" disabled>{{\n              $t('eight_characters_or_longer')\n            }}</el-checkbox>\n            <el-checkbox v-model=\"latinPass\" disabled>{{\n              $t('contain_at_least_one_alphabetical_character')\n            }}</el-checkbox>\n            <el-checkbox v-model=\"passNumber\" disabled>{{\n              $t('contain_at_least_one_numeric_character')\n            }}</el-checkbox>\n            <el-checkbox v-model=\"persianPass\" disabled>{{\n              $t('use_english_character_and_numbers')\n            }}</el-checkbox>\n          </div>\n        </el-form-item>\n        <div class=\"text-center\" style=\"paddingTop:1rem\">\n          <el-button\n            :loading=\"loading\"\n            class=\"ml-10\"\n            type=\"primary\"\n            @click=\"validateAndSubmitForm('editUser', editUser)\"\n          >\n            {{ $t('edit') }}\n          </el-button>\n          <el-button @click=\"handleClose\"> {{ $t('close') }} </el-button>\n        </div>\n      </el-form>\n    </el-dialog>\n  </div>\n</template>\n\n<script>\n  import { mapActions } from 'vuex'\n  import {\n    passwordLength,\n    latinPassword,\n    passwordNumber,\n    persianPassword,\n    correctPassword\n  } from '@/utils/patterns'\n  export default {\n    props: {\n      dialogVisible: {\n        type: Boolean,\n        default: false\n      },\n      self: {\n        typeof: Object,\n        default: () => {}\n      }\n    },\n    data() {\n      const checkPassword = (rule, value, callback) => {\n        this.resetPasswordValidation()\n        if (value === '') {\n          callback(new Error(this.$i18n.t('insert_your_password')))\n        } else if (\n          !correctPassword.test(value) ||\n          persianPassword.test(value)\n        ) {\n          if (passwordLength.test(value)) {\n            this.passLength = true\n            callback(new Error(this.$i18n.t('wrong_password')))\n          }\n          if (latinPassword.test(value)) {\n            this.latinPass = true\n            callback(new Error(this.$i18n.t('wrong_password')))\n          }\n          if (passwordNumber.test(value)) {\n            this.passNumber = true\n            callback(new Error(this.$i18n.t('wrong_password')))\n          }\n          if (!persianPassword.test(value) && value.length) {\n            this.persianPass = true\n            callback(new Error(this.$i18n.t('wrong_password')))\n          }\n        } else {\n          console.log('else')\n          this.setPasswordValidation()\n          callback()\n        }\n      }\n      return {\n        loading: false,\n        dialogImageUrl: '',\n        passLength: false,\n        latinPass: false,\n        passNumber: false,\n        persianPass: false,\n        isShow: false,\n        editForm: {\n          password: ''\n        },\n        rules: {\n          password: [\n            {\n              required: true,\n              validator: checkPassword\n            }\n          ]\n        }\n      }\n    },\n    methods: {\n      ...mapActions(['handleRequest', 'setSelf']),\n      resetPasswordValidation() {\n        this.passLength = false\n        this.latinPass = false\n        this.passNumber = false\n        this.persianPass = false\n      },\n      setPasswordValidation() {\n        this.passLength = true\n        this.latinPass = true\n        this.passNumber = true\n        this.persianPass = true\n      },\n      editUser() {\n        this.loading = true\n\n        this.handleRequest({\n          name: 'users/forgot_password',\n          action: 'patchUser',\n          data: {\n            toPatch: {\n              email: this.self.email,\n              password: this.editForm.password\n            }\n          }\n        })\n          .then(() => {\n            this.$message({\n              type: 'success',\n              message: this.$i18n.t('your_password_was_successfully_edited')\n            })\n            this.handleClose()\n            this.loading = false\n          })\n          .catch((error) => {\n            this.loading = false\n            if (error.response.status === 400) {\n              this.$message({\n                type: 'error',\n                message: this.$i18n.t(\n                  'user_with_this_persian_username_already_exists'\n                )\n              })\n            } else {\n              this.$message({\n                type: 'error',\n                message: this.$i18n.t(\n                  'your_request_has_encountered_a_problem_please_try_again'\n                )\n              })\n            }\n          })\n      },\n      handleClose() {\n        this.$emit('close-dialog')\n        this.$refs['editUser'].resetFields()\n      }\n    }\n  }\n</script>\n"]}]}
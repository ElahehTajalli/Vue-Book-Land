{"remainingRequest":"/home/elaheh/Documents/University/project/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/elaheh/Documents/University/project/src/components/UserProfile.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/elaheh/Documents/University/project/src/components/UserProfile.vue","mtime":1628261661438},{"path":"/home/elaheh/Documents/University/project/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/elaheh/Documents/University/project/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/home/elaheh/Documents/University/project/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/elaheh/Documents/University/project/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCB7IG1hcEdldHRlcnMsIG1hcEFjdGlvbnMgfSBmcm9tICd2dWV4JwppbXBvcnQgQ3JpdGljaXNtIGZyb20gJ0AvY29tcG9uZW50cy9wb3N0L0NyaXRpY2lzbScKaW1wb3J0IEZvbGxvd2luZ0ZvbGxvd2VycyBmcm9tICdAL2NvbXBvbmVudHMvRm9sbG93aW5nRm9sbG93ZXJzJwoKZXhwb3J0IGRlZmF1bHQgewogIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICB1c2VyOiB7fSwKICAgICAgbG9hZGluZzogZmFsc2UsCiAgICAgIGJ1dHRvbkxvYWRpbmc6IGZhbHNlLAogICAgICBpc0ZvbGxvd0J1dHRvbjogdHJ1ZSwKICAgICAgZm9sbG93aW5nOiBbXSwKICAgICAgZm9sbG93ZXJzOiBbXSwKICAgICAgdG90YWxfZm9sbG93aW5nOiAwLAogICAgICB0b3RhbF9mb2xsb3dlcnM6IDAsCiAgICAgIHBvc3RzOiBbXSwKICAgICAgZGlhbG9nVmlzaWJsZTogZmFsc2UsCiAgICAgIGxpc3ROYW1lOiAnJwogICAgfQogIH0sCiAgYXN5bmMgY3JlYXRlZCgpIHsKICAgIGF3YWl0IHRoaXMuZ2V0VXNlcigpCiAgICBhd2FpdCB0aGlzLmdldFJlbGF0aW9uc2hpcHMoJ2ZvbGxvd2luZycsICd0b3RhbF9mb2xsb3dpbmcnLCB7CiAgICAgIGZvbGxvd2VyX2lkOiB0aGlzLiRyb3V0ZS5wYXJhbXMuaWQKICAgIH0pCiAgICBhd2FpdCB0aGlzLmdldFJlbGF0aW9uc2hpcHMoJ2ZvbGxvd2VycycsICd0b3RhbF9mb2xsb3dlcnMnLCB7CiAgICAgIGZvbGxvd2luZ19pZDogdGhpcy4kcm91dGUucGFyYW1zLmlkCiAgICB9KQogICAgaWYgKHRoaXMuc2VsZikgewogICAgICBhd2FpdCB0aGlzLmdldFBvc3RzKCkKICAgICAgYXdhaXQgdGhpcy5jaGVja1JlbGF0aW9uc2hpcCgpCiAgICB9CiAgfSwKICBjb21wdXRlZDogewogICAgLi4ubWFwR2V0dGVycyhbJ3NlbGYnXSkKICB9LAogIG1ldGhvZHM6IHsKICAgIC4uLm1hcEFjdGlvbnMoWydoYW5kbGVSZXF1ZXN0J10pLAogICAgZ2V0VXNlcigpIHsKICAgICAgdGhpcy5sb2FkaW5nID0gdHJ1ZQogICAgICB0aGlzLmhhbmRsZVJlcXVlc3QoewogICAgICAgIG5hbWU6ICd1c2VycycsCiAgICAgICAgYWN0aW9uOiAnZ2V0T25lJywKICAgICAgICBkYXRhOiB7CiAgICAgICAgICBpZDogdGhpcy4kcm91dGUucGFyYW1zLmlkCiAgICAgICAgfQogICAgICB9KS50aGVuKChyZXMpID0+IHsKICAgICAgICB0aGlzLnVzZXIgPSByZXMuZGF0YS51c2VyCiAgICAgIH0pCiAgICB9LAogICAgZ2V0UmVsYXRpb25zaGlwcyhwYXJhbSwgdG90YWwsIHF1ZXJ5KSB7CiAgICAgIHRoaXMuaGFuZGxlUmVxdWVzdCh7CiAgICAgICAgbmFtZTogJ3VzZXJzL2dldFJlbGF0aW9uc2hpcHMnLAogICAgICAgIGFjdGlvbjogJ2dldEFsbCcsCiAgICAgICAgZGF0YTogewogICAgICAgICAgcXVlcnkKICAgICAgICB9CiAgICAgIH0pLnRoZW4oKHJlcykgPT4gewogICAgICAgIHRoaXNbcGFyYW1dID0gcmVzLmRhdGEucmVsYXRpb25zaGlwcwogICAgICAgIHRoaXNbdG90YWxdID0gcmVzLnRvdGFsCiAgICAgIH0pCiAgICB9LAogICAgY2hlY2tSZWxhdGlvbnNoaXAoKSB7CiAgICAgIGxldCBmb3JtRGF0YSA9IG5ldyBGb3JtRGF0YSgpCiAgICAgIGZvcm1EYXRhLmFwcGVuZCgnZm9sbG93aW5nJywgdGhpcy4kcm91dGUucGFyYW1zLmlkKQogICAgICBmb3JtRGF0YS5hcHBlbmQoJ2ZvbGxvd2VyJywgdGhpcy5zZWxmLmlkKQoKICAgICAgdGhpcy5oYW5kbGVSZXF1ZXN0KHsKICAgICAgICBuYW1lOiAndXNlcnMvY2hlY2tSZWxhdGlvbnNoaXAnLAogICAgICAgIGFjdGlvbjogJ2NyZWF0ZScsCiAgICAgICAgZGF0YTogZm9ybURhdGEKICAgICAgfSkKICAgICAgICAudGhlbigoKSA9PiB7CiAgICAgICAgICBjb25zb2xlLmxvZwogICAgICAgICAgdGhpcy5pc0ZvbGxvd0J1dHRvbiA9IGZhbHNlCiAgICAgICAgfSkKICAgICAgICAuY2F0Y2goKCkgPT4gKHRoaXMuaXNGb2xsb3dCdXR0b24gPSB0cnVlKSkKICAgICAgICAuZmluYWxseSgoKSA9PiAodGhpcy5sb2FkaW5nID0gZmFsc2UpKQogICAgfSwKICAgIGdldFBvc3RzKCkgewogICAgICB0aGlzLmxvYWRpbmcgPSB0cnVlCiAgICAgIHRoaXMuaGFuZGxlUmVxdWVzdCh7CiAgICAgICAgbmFtZTogJ3Bvc3RzLycsCiAgICAgICAgYWN0aW9uOiAnZ2V0QWxsJywKICAgICAgICBkYXRhOiB7CiAgICAgICAgICBxdWVyeTogewogICAgICAgICAgICB1c2VyX2lkOiB0aGlzLiRyb3V0ZS5wYXJhbXMuaWQKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0pLnRoZW4oKHJlcykgPT4gewogICAgICAgIHRoaXMucG9zdHMgPSByZXMuZGF0YS5wb3N0cwogICAgICB9KQogICAgfSwKICAgIGhhbmRsZUZvbGxvdygpIHsKICAgICAgdGhpcy5idXR0b25Mb2FkaW5nID0gdHJ1ZQogICAgICBsZXQgZm9ybURhdGEgPSBuZXcgRm9ybURhdGEoKQogICAgICBmb3JtRGF0YS5hcHBlbmQoJ2ZvbGxvd2luZycsIHRoaXMuJHJvdXRlLnBhcmFtcy5pZCkKICAgICAgZm9ybURhdGEuYXBwZW5kKCdmb2xsb3dlcicsIHRoaXMuc2VsZi5pZCkKCiAgICAgIHRoaXMuaGFuZGxlUmVxdWVzdCh7CiAgICAgICAgbmFtZTogJ3VzZXJzL2ZvbGxvdycsCiAgICAgICAgYWN0aW9uOiAnY3JlYXRlJywKICAgICAgICBkYXRhOiBmb3JtRGF0YQogICAgICB9KQogICAgICAgIC50aGVuKCgpID0+IHsKICAgICAgICAgIHRoaXMuaXNGb2xsb3dCdXR0b24gPSBmYWxzZQogICAgICAgICAgdGhpcy5nZXRSZWxhdGlvbnNoaXBzKCdmb2xsb3dlcnMnLCAndG90YWxfZm9sbG93ZXJzJywgewogICAgICAgICAgICBmb2xsb3dpbmdfaWQ6IHRoaXMuJHJvdXRlLnBhcmFtcy5pZAogICAgICAgICAgfSkKICAgICAgICAgIC8vU2VuZCBtZXNzYWdlCiAgICAgICAgfSkKICAgICAgICAuZmluYWxseSgoKSA9PiAodGhpcy5idXR0b25Mb2FkaW5nID0gZmFsc2UpKQogICAgfSwKICAgIGhhbmRsZVVuRm9sbG93KCkgewogICAgICB0aGlzLmJ1dHRvbkxvYWRpbmcgPSB0cnVlCiAgICAgIGxldCBmb3JtRGF0YSA9IG5ldyBGb3JtRGF0YSgpCiAgICAgIGZvcm1EYXRhLmFwcGVuZCgnZm9sbG93aW5nJywgdGhpcy4kcm91dGUucGFyYW1zLmlkKQogICAgICBmb3JtRGF0YS5hcHBlbmQoJ2ZvbGxvd2VyJywgdGhpcy5zZWxmLmlkKQoKICAgICAgdGhpcy5oYW5kbGVSZXF1ZXN0KHsKICAgICAgICBuYW1lOiAndXNlcnMvdW5mb2xsb3cnLAogICAgICAgIGFjdGlvbjogJ2NyZWF0ZScsCiAgICAgICAgZGF0YTogZm9ybURhdGEKICAgICAgfSkKICAgICAgICAudGhlbigoKSA9PiB7CiAgICAgICAgICB0aGlzLmlzRm9sbG93QnV0dG9uID0gdHJ1ZQogICAgICAgICAgdGhpcy5nZXRSZWxhdGlvbnNoaXBzKCdmb2xsb3dlcnMnLCAndG90YWxfZm9sbG93ZXJzJywgewogICAgICAgICAgICBmb2xsb3dpbmdfaWQ6IHRoaXMuJHJvdXRlLnBhcmFtcy5pZAogICAgICAgICAgfSkKICAgICAgICAgIC8vU2VuZCBtZXNzYWdlCiAgICAgICAgfSkKICAgICAgICAuZmluYWxseSgoKSA9PiAodGhpcy5idXR0b25Mb2FkaW5nID0gZmFsc2UpKQogICAgfSwKICAgIHNob3dGb2xsb3dpbmdPckZvbGxvd2VycyhuYW1lKSB7CiAgICAgIGNvbnNvbGUubG9nKCcxJykKICAgICAgdGhpcy5saXN0TmFtZSA9IG5hbWUKICAgICAgdGhpcy5kaWFsb2dWaXNpYmxlID0gdHJ1ZQogICAgfQogIH0sCiAgd2F0Y2g6IHsKICAgIHNlbGYoKSB7CiAgICAgIHRoaXMuZ2V0UG9zdHMoKQogICAgICB0aGlzLmNoZWNrUmVsYXRpb25zaGlwKCkKICAgIH0KICB9LAogIGNvbXBvbmVudHM6IHsKICAgIENyaXRpY2lzbSwKICAgIEZvbGxvd2luZ0ZvbGxvd2VycwogIH0KfQo="},{"version":3,"sources":["UserProfile.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAoFA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"UserProfile.vue","sourceRoot":"src/components","sourcesContent":["<template>\n  <div class=\"user-profile\">\n    <div class=\"profile\">\n      <el-card v-if=\"!loading\">\n        <div>\n          <img\n            class=\"profile-picture\"\n            v-if=\"user.image\"\n            :src=\"'http://127.0.0.1:8000' + user.image\"\n          />\n          <img\n            v-else\n            class=\"profile-picture\"\n            src=\"https://img.icons8.com/cotton/64/000000/person-male--v2.png\"\n          />\n        </div>\n        <div class=\"user-information\">\n          <div>\n            <div class=\"name\">\n              <span> {{ user.persian_username }} </span>\n            </div>\n          </div>\n          <div class=\"following_followers\">\n            <div @click=\"showFollowingOrFollowers('following')\">\n              <span> {{ $t('following') }} </span>\n              <span> {{ total_following }} </span>\n            </div>\n            <div @click=\"showFollowingOrFollowers('follower')\">\n              <span> {{ $t('followers') }} </span>\n              <span> {{ total_followers }} </span>\n            </div>\n          </div>\n          <div class=\"buttons\">\n            <el-button\n              v-if=\"isFollowButton\"\n              :loading=\"buttonLoading\"\n              size=\"mini\"\n              type=\"primary\"\n              @click=\"handleFollow()\"\n            >\n              {{ $t('follow') }}\n            </el-button>\n            <el-button\n              v-else\n              :loading=\"buttonLoading\"\n              size=\"mini\"\n              type=\"danger\"\n              @click=\"handleUnFollow()\"\n            >\n              {{ $t('unfollow') }}\n            </el-button>\n            <el-button\n              size=\"mini\"\n              @click=\"\n                $router.push({\n                  name: 'ChatID',\n                  params: { id: $route.params.id }\n                })\n              \"\n            >\n              {{ $t('send_message') }}\n            </el-button>\n          </div>\n        </div>\n      </el-card>\n    </div>\n    <div class=\"view-book\">\n      <el-card class=\"post\" v-if=\"posts.length\">\n        <div slot=\"header\" class=\"clearfix\">\n          <span>{{ $t('criticisms') }}</span>\n        </div>\n        <Criticism v-for=\"p in posts\" :key=\"p.id\" :post=\"p\" :isMyPosts=\"true\" />\n      </el-card>\n    </div>\n    <FollowingFollowers\n      :users=\"listName === 'following' ? following : followers\"\n      :listName=\"listName\"\n      :dialogVisible=\"dialogVisible\"\n      @close-dialog=\"dialogVisible = false\"\n    />\n  </div>\n</template>\n\n<script>\n  import { mapGetters, mapActions } from 'vuex'\n  import Criticism from '@/components/post/Criticism'\n  import FollowingFollowers from '@/components/FollowingFollowers'\n\n  export default {\n    data() {\n      return {\n        user: {},\n        loading: false,\n        buttonLoading: false,\n        isFollowButton: true,\n        following: [],\n        followers: [],\n        total_following: 0,\n        total_followers: 0,\n        posts: [],\n        dialogVisible: false,\n        listName: ''\n      }\n    },\n    async created() {\n      await this.getUser()\n      await this.getRelationships('following', 'total_following', {\n        follower_id: this.$route.params.id\n      })\n      await this.getRelationships('followers', 'total_followers', {\n        following_id: this.$route.params.id\n      })\n      if (this.self) {\n        await this.getPosts()\n        await this.checkRelationship()\n      }\n    },\n    computed: {\n      ...mapGetters(['self'])\n    },\n    methods: {\n      ...mapActions(['handleRequest']),\n      getUser() {\n        this.loading = true\n        this.handleRequest({\n          name: 'users',\n          action: 'getOne',\n          data: {\n            id: this.$route.params.id\n          }\n        }).then((res) => {\n          this.user = res.data.user\n        })\n      },\n      getRelationships(param, total, query) {\n        this.handleRequest({\n          name: 'users/getRelationships',\n          action: 'getAll',\n          data: {\n            query\n          }\n        }).then((res) => {\n          this[param] = res.data.relationships\n          this[total] = res.total\n        })\n      },\n      checkRelationship() {\n        let formData = new FormData()\n        formData.append('following', this.$route.params.id)\n        formData.append('follower', this.self.id)\n\n        this.handleRequest({\n          name: 'users/checkRelationship',\n          action: 'create',\n          data: formData\n        })\n          .then(() => {\n            console.log\n            this.isFollowButton = false\n          })\n          .catch(() => (this.isFollowButton = true))\n          .finally(() => (this.loading = false))\n      },\n      getPosts() {\n        this.loading = true\n        this.handleRequest({\n          name: 'posts/',\n          action: 'getAll',\n          data: {\n            query: {\n              user_id: this.$route.params.id\n            }\n          }\n        }).then((res) => {\n          this.posts = res.data.posts\n        })\n      },\n      handleFollow() {\n        this.buttonLoading = true\n        let formData = new FormData()\n        formData.append('following', this.$route.params.id)\n        formData.append('follower', this.self.id)\n\n        this.handleRequest({\n          name: 'users/follow',\n          action: 'create',\n          data: formData\n        })\n          .then(() => {\n            this.isFollowButton = false\n            this.getRelationships('followers', 'total_followers', {\n              following_id: this.$route.params.id\n            })\n            //Send message\n          })\n          .finally(() => (this.buttonLoading = false))\n      },\n      handleUnFollow() {\n        this.buttonLoading = true\n        let formData = new FormData()\n        formData.append('following', this.$route.params.id)\n        formData.append('follower', this.self.id)\n\n        this.handleRequest({\n          name: 'users/unfollow',\n          action: 'create',\n          data: formData\n        })\n          .then(() => {\n            this.isFollowButton = true\n            this.getRelationships('followers', 'total_followers', {\n              following_id: this.$route.params.id\n            })\n            //Send message\n          })\n          .finally(() => (this.buttonLoading = false))\n      },\n      showFollowingOrFollowers(name) {\n        console.log('1')\n        this.listName = name\n        this.dialogVisible = true\n      }\n    },\n    watch: {\n      self() {\n        this.getPosts()\n        this.checkRelationship()\n      }\n    },\n    components: {\n      Criticism,\n      FollowingFollowers\n    }\n  }\n</script>\n"]}]}
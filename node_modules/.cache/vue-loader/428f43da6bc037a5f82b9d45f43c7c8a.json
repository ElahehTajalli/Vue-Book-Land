{"remainingRequest":"/home/elaheh/Documents/University/project/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/elaheh/Documents/University/project/src/components/auth/Login.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/elaheh/Documents/University/project/src/components/auth/Login.vue","mtime":1625857119125},{"path":"/home/elaheh/Documents/University/project/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/elaheh/Documents/University/project/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/home/elaheh/Documents/University/project/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/elaheh/Documents/University/project/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCB7IG1hcEFjdGlvbnMgfSBmcm9tICd2dWV4JwpleHBvcnQgZGVmYXVsdCB7CiAgZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIGxvYWRpbmc6IGZhbHNlLAogICAgICBsb2dpbkZvcm06IHsKICAgICAgICBlbWFpbDogJycsCiAgICAgICAgcGFzc3dvcmQ6ICcnCiAgICAgIH0sCiAgICAgIGZvcm1zOiBbJ2xvZ2luRm9ybSddLAogICAgICBjYWxsYmFja3M6IFt0aGlzLmhhbmRsZUxvZ2luRm9ybV0sCiAgICAgIHJ1bGVzOiB7CiAgICAgICAgZW1haWw6IFsKICAgICAgICAgIHsKICAgICAgICAgICAgbWVzc2FnZTogdGhpcy4kaTE4bi50KCdpbnNlcnRfeW91cl9lbWFpbCcpLAogICAgICAgICAgICByZXF1aXJlZDogdHJ1ZSwKICAgICAgICAgICAgdHJpZ2dlcjogJ2JsdXInCiAgICAgICAgICB9CiAgICAgICAgXSwKICAgICAgICBwYXNzd29yZDogWwogICAgICAgICAgewogICAgICAgICAgICBtZXNzYWdlOiB0aGlzLiRpMThuLnQoJ2luc2VydF95b3VyX3Bhc3N3b3JkJyksCiAgICAgICAgICAgIHJlcXVpcmVkOiB0cnVlLAogICAgICAgICAgICB0cmlnZ2VyOiAnYmx1cicKICAgICAgICAgIH0KICAgICAgICBdCiAgICAgIH0KICAgIH0KICB9LAogIC8vIGNvbXB1dGVkOiB7CiAgLy8gICAuLi5tYXBHZXR0ZXJzKFsnbGFzdFJlcXVlc3RlZFBhdGgnXSkKICAvLyB9LAogIG1ldGhvZHM6IHsKICAgIC4uLm1hcEFjdGlvbnMoWydoYW5kbGVSZXF1ZXN0J10pLAogICAgZGlzYWJsZUxvYWRpbmcoKSB7CiAgICAgIHRoaXMubG9hZGluZyA9IGZhbHNlCiAgICB9LAogICAgaGFuZGxlTG9naW5Gb3JtU3VibWl0KCkgewogICAgICB0aGlzLiRyZWZzLmxvZ2luRm9ybS52YWxpZGF0ZSgodmFsaWQpID0+IHsKICAgICAgICBpZiAodmFsaWQpIHsKICAgICAgICAgIHRoaXMubG9hZGluZyA9IHRydWUKICAgICAgICAgIHRoaXMuaGFuZGxlTG9naW5Gb3JtKCkKICAgICAgICB9IGVsc2UgewogICAgICAgICAgcmV0dXJuIGZhbHNlCiAgICAgICAgfQogICAgICB9KQogICAgfSwKICAgIGhhbmRsZUxvZ2luRm9ybSgpIHsKICAgICAgbGV0IGZvcm1EYXRhID0gbmV3IEZvcm1EYXRhKCkKICAgICAgZm9ybURhdGEuYXBwZW5kKCdlbWFpbCcsIHRoaXMubG9naW5Gb3JtLmVtYWlsKQogICAgICBmb3JtRGF0YS5hcHBlbmQoJ3Bhc3N3b3JkJywgdGhpcy5sb2dpbkZvcm0ucGFzc3dvcmQpCiAgICAgIHRoaXMuaGFuZGxlUmVxdWVzdCh7CiAgICAgICAgbmFtZTogJ3VzZXJzL2xvZ2luJywKICAgICAgICBhY3Rpb246ICdjcmVhdGUnLAogICAgICAgIGRhdGE6IGZvcm1EYXRhCiAgICAgIH0pCiAgICAgICAgLnRoZW4oKHJlcykgPT4gewogICAgICAgICAgdGhpcy5kaXNhYmxlTG9hZGluZygpCiAgICAgICAgICB0aGlzLnNldFRva2VucyhyZXMudG9rZW4pCiAgICAgICAgICB0aGlzLiRyb3V0ZXIucHVzaCh7CiAgICAgICAgICAgIHBhdGg6IGAvaG9tZWAKICAgICAgICAgIH0pCiAgICAgICAgfSkKICAgICAgICAuY2F0Y2goKGVycm9yKSA9PiB7CiAgICAgICAgICB0aGlzLiRtZXNzYWdlKHsKICAgICAgICAgICAgdHlwZTogJ2Vycm9yJywKICAgICAgICAgICAgbWVzc2FnZTogdGhpcy4kaTE4bi50KGVycm9yLnJlc3BvbnNlLmRhdGEuZXJyb3JzKSwKICAgICAgICAgICAgY3VzdG9tQ2xhc3M6ICdiZy1lcnJvci1kYXJrJwogICAgICAgICAgfSkKICAgICAgICAgIHRoaXMuZGlzYWJsZUxvYWRpbmcoKQogICAgICAgIH0pCiAgICB9LAogICAgaGFuZGxlS2V5UHJlc3MoZSkgewogICAgICBsZXQgeyBrZXkgfSA9IGUKICAgICAgaWYgKGtleSA9PT0gJ0VudGVyJykgewogICAgICAgIGUucHJldmVudERlZmF1bHQoKQogICAgICAgIHRoaXMuaGFuZGxlTG9naW5Gb3JtU3VibWl0KCkKICAgICAgfQogICAgfSwKICAgIGNoYW5nZVJvdXRlKG5hbWUpIHsKICAgICAgdGhpcy4kcm91dGVyLnB1c2goeyBuYW1lIH0pCiAgICB9CiAgfSwKICBjcmVhdGVkKCkgewogICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigna2V5cHJlc3MnLCB0aGlzLmhhbmRsZUtleVByZXNzKQogIH0sCiAgYmVmb3JlRGVzdHJveSgpIHsKICAgIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2tleXByZXNzJywgdGhpcy5oYW5kbGVLZXlQcmVzcykKICB9Cn0K"},{"version":3,"sources":["Login.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAyEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Login.vue","sourceRoot":"src/components/auth","sourcesContent":["<template>\n  <div class=\"login-page\">\n    <div class=\"logo text-center mb-10\" @click=\"changeRoute('Dashboard')\">\n      {{ $t('book_land') }}\n    </div>\n    <el-card>\n      <div slot=\"header\" class=\"clearfix\">\n        <span>{{ $t('login') }}</span>\n      </div>\n      <div>\n        <el-form\n          :model=\"loginForm\"\n          ref=\"loginForm\"\n          label-position=\"top\"\n          :rules=\"rules\"\n          :disabled=\"loading\"\n        >\n          <el-form-item prop=\"email\">\n            <el-input\n              autocomplete=\"new-email\"\n              class=\"ltr text-right\"\n              :placeholder=\"$t('email')\"\n              v-model=\"loginForm.email\"\n            >\n            </el-input>\n          </el-form-item>\n          <el-form-item prop=\"password\">\n            <el-input\n              autocomplete=\"new-password\"\n              type=\"password\"\n              class=\"ltr text-right\"\n              :placeholder=\"$t('password')\"\n              v-model=\"loginForm.password\"\n            >\n            </el-input>\n          </el-form-item>\n          <el-form-item class=\"flexbox align-center justify-center no_margin\">\n            <el-button\n              type=\"primary\"\n              @click=\"handleLoginFormSubmit\"\n              :loading=\"loading\"\n            >\n              {{ $t('login') }}\n            </el-button>\n          </el-form-item>\n          <div class=\"text-center buttons_div\">\n            <el-button type=\"text\" @click=\"changeRoute('Dashboard')\">\n              {{ $t('main_page') }}\n            </el-button>\n            |\n            <el-button\n              type=\"text\"\n              @click=\"changeRoute('SignUp')\"\n              class=\"no_margin\"\n            >\n              {{ $t('signup') }}\n            </el-button>\n            |\n            <el-button\n              type=\"text\"\n              class=\"no_margin\"\n              @click=\"changeRoute('ForgotPassword')\"\n            >\n              {{ $t('forgot_password') }}\n            </el-button>\n          </div>\n        </el-form>\n      </div>\n    </el-card>\n  </div>\n</template>\n\n<script>\n  import { mapActions } from 'vuex'\n  export default {\n    data() {\n      return {\n        loading: false,\n        loginForm: {\n          email: '',\n          password: ''\n        },\n        forms: ['loginForm'],\n        callbacks: [this.handleLoginForm],\n        rules: {\n          email: [\n            {\n              message: this.$i18n.t('insert_your_email'),\n              required: true,\n              trigger: 'blur'\n            }\n          ],\n          password: [\n            {\n              message: this.$i18n.t('insert_your_password'),\n              required: true,\n              trigger: 'blur'\n            }\n          ]\n        }\n      }\n    },\n    // computed: {\n    //   ...mapGetters(['lastRequestedPath'])\n    // },\n    methods: {\n      ...mapActions(['handleRequest']),\n      disableLoading() {\n        this.loading = false\n      },\n      handleLoginFormSubmit() {\n        this.$refs.loginForm.validate((valid) => {\n          if (valid) {\n            this.loading = true\n            this.handleLoginForm()\n          } else {\n            return false\n          }\n        })\n      },\n      handleLoginForm() {\n        let formData = new FormData()\n        formData.append('email', this.loginForm.email)\n        formData.append('password', this.loginForm.password)\n        this.handleRequest({\n          name: 'users/login',\n          action: 'create',\n          data: formData\n        })\n          .then((res) => {\n            this.disableLoading()\n            this.setTokens(res.token)\n            this.$router.push({\n              path: `/home`\n            })\n          })\n          .catch((error) => {\n            this.$message({\n              type: 'error',\n              message: this.$i18n.t(error.response.data.errors),\n              customClass: 'bg-error-dark'\n            })\n            this.disableLoading()\n          })\n      },\n      handleKeyPress(e) {\n        let { key } = e\n        if (key === 'Enter') {\n          e.preventDefault()\n          this.handleLoginFormSubmit()\n        }\n      },\n      changeRoute(name) {\n        this.$router.push({ name })\n      }\n    },\n    created() {\n      document.addEventListener('keypress', this.handleKeyPress)\n    },\n    beforeDestroy() {\n      document.removeEventListener('keypress', this.handleKeyPress)\n    }\n  }\n</script>\n"]}]}
{"remainingRequest":"/home/elaheh/Documents/University/project/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/elaheh/Documents/University/project/src/components/book/View.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/elaheh/Documents/University/project/src/components/book/View.vue","mtime":1627416549918},{"path":"/home/elaheh/Documents/University/project/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/elaheh/Documents/University/project/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/home/elaheh/Documents/University/project/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/elaheh/Documents/University/project/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCB7IG1hcEFjdGlvbnMsIG1hcEdldHRlcnMgfSBmcm9tICd2dWV4JwppbXBvcnQgQ3JpdGljaXNtIGZyb20gJ0AvY29tcG9uZW50cy9wb3N0L0NyaXRpY2lzbScKZXhwb3J0IGRlZmF1bHQgewogIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBpZDogMCwKICAgICAgYm9vazoge30sCiAgICAgIHBvc3RzOiBbXSwKICAgICAgbG9hZGluZzogZmFsc2UsCiAgICAgIHJhdGU6IDAsCiAgICAgIGljb25DbGFzc2VzOiBbCiAgICAgICAgJ2ljb24tcmF0ZS1mYWNlLTEnLAogICAgICAgICdpY29uLXJhdGUtZmFjZS0yJywKICAgICAgICAnaWNvbi1yYXRlLWZhY2UtMycKICAgICAgXSwKICAgICAgbGlzdDogewogICAgICAgIGlzUmVhZDogZmFsc2UsCiAgICAgICAgaXNSZWFkaW5nOiBmYWxzZSwKICAgICAgICBpc1dhbnRzVG9SZWFkOiBmYWxzZQogICAgICB9CiAgICB9CiAgfSwKICBhc3luYyBjcmVhdGVkKCkgewogICAgYXdhaXQgdGhpcy5nZXRCb29rKCkKICAgIHRoaXMuc2VsZiA/IGF3YWl0IHRoaXMuZ2V0UGxhbigpIDogJycKICAgIHRoaXMuaXNBdXRoZW50aWNhdGVkID8gYXdhaXQgdGhpcy5nZXRQb3N0cygpIDogJycKICB9LAogIGNvbXB1dGVkOiB7CiAgICAuLi5tYXBHZXR0ZXJzKFsnaXNBdXRoZW50aWNhdGVkJywgJ3NlbGYnXSkKICB9LAogIG1ldGhvZHM6IHsKICAgIC4uLm1hcEFjdGlvbnMoWydoYW5kbGVSZXF1ZXN0J10pLAogICAgZ2V0Qm9vaygpIHsKICAgICAgdGhpcy5sb2FkaW5nID0gdHJ1ZQogICAgICB0aGlzLmhhbmRsZVJlcXVlc3QoewogICAgICAgIG5hbWU6ICdib29rcycsCiAgICAgICAgYWN0aW9uOiAnZ2V0T25lJywKICAgICAgICBkYXRhOiB7CiAgICAgICAgICBpZDogdGhpcy4kcm91dGUucGFyYW1zLmlkCiAgICAgICAgfQogICAgICB9KS50aGVuKChyZXMpID0+IHsKICAgICAgICB0aGlzLmJvb2sgPSByZXMuZGF0YQogICAgICB9KQogICAgfSwKICAgIGdldFBvc3RzKCkgewogICAgICB0aGlzLmhhbmRsZVJlcXVlc3QoewogICAgICAgIG5hbWU6ICdwb3N0cy8nLAogICAgICAgIGFjdGlvbjogJ2dldEFsbCcsCiAgICAgICAgZGF0YTogewogICAgICAgICAgcXVlcnk6IHsKICAgICAgICAgICAgYm9va19pZDogdGhpcy4kcm91dGUucGFyYW1zLmlkCiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9KQogICAgICAgIC50aGVuKChyZXMpID0+IHsKICAgICAgICAgIHRoaXMucG9zdHMgPSByZXMuZGF0YS5wb3N0cwogICAgICAgIH0pCiAgICAgICAgLmZpbmFsbHkoKCkgPT4gewogICAgICAgICAgdGhpcy5sb2FkaW5nID0gZmFsc2UKICAgICAgICB9KQogICAgfSwKICAgIGdldFBsYW4oKSB7CiAgICAgIHRoaXMuaGFuZGxlUmVxdWVzdCh7CiAgICAgICAgbmFtZTogJ2Jvb2tzL3BsYW4nLAogICAgICAgIGFjdGlvbjogJ2dldEFsbCcsCiAgICAgICAgZGF0YTogewogICAgICAgICAgcXVlcnk6IHsKICAgICAgICAgICAgdXNlcjogdGhpcy5zZWxmLmlkLAogICAgICAgICAgICBib29rOiB0aGlzLiRyb3V0ZS5wYXJhbXMuaWQKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0pCiAgICAgICAgLnRoZW4oKHJlcykgPT4gewogICAgICAgICAgdGhpcy5saXN0ID0gcmVzCiAgICAgICAgfSkKICAgICAgICAuY2F0Y2goKHJlcykgPT4gewogICAgICAgICAgdGhpcy5saXN0ID0gcmVzLnJlc3BvbnNlLmRhdGEKICAgICAgICB9KQogICAgICAgIC5maW5hbGx5KCgpID0+IHsKICAgICAgICAgICF0aGlzLmlzQXV0aGVudGljYXRlZCA/ICh0aGlzLmxvYWRpbmcgPSBmYWxzZSkgOiAnJwogICAgICAgIH0pCiAgICB9LAogICAgc2V0UmF0ZSgpIHsKICAgICAgbGV0IGZvcm1EYXRhID0gbmV3IEZvcm1EYXRhKCkKICAgICAgZm9ybURhdGEuYXBwZW5kKCdib29rJywgdGhpcy4kcm91dGUucGFyYW1zLmlkKQogICAgICBmb3JtRGF0YS5hcHBlbmQoJ3VzZXInLCB0aGlzLnNlbGYuaWQpCiAgICAgIGZvcm1EYXRhLmFwcGVuZCgncmF0ZScsIHRoaXMucmF0ZSkKCiAgICAgIHRoaXMuaGFuZGxlUmVxdWVzdCh7CiAgICAgICAgbmFtZTogJ2Jvb2tzL3JhdGUnLAogICAgICAgIGFjdGlvbjogJ2NyZWF0ZScsCiAgICAgICAgZGF0YTogZm9ybURhdGEKICAgICAgfSkKICAgICAgICAudGhlbigoKSA9PiB7CiAgICAgICAgICB0aGlzLiRtZXNzYWdlKHsKICAgICAgICAgICAgdHlwZTogJ3N1Y2Nlc3MnLAogICAgICAgICAgICBtZXNzYWdlOiB0aGlzLiRpMThuLnQoJ3lvdXJfcmF0ZV93YXNfc3VjY2Vzc2Z1bGx5X2FkZGVkJyksCiAgICAgICAgICAgIGN1c3RvbUNsYXNzOiAnYmctc3VjY2Vzcy1kYXJrJwogICAgICAgICAgfSkKICAgICAgICB9KQogICAgICAgIC5jYXRjaCgoZXJyb3IpID0+IHsKICAgICAgICAgIHRoaXMuJG1lc3NhZ2UoewogICAgICAgICAgICB0eXBlOiAnZXJyb3InLAogICAgICAgICAgICBtZXNzYWdlOiB0aGlzLiRpMThuLnQoZXJyb3IucmVzcG9uc2UuZGF0YS5lcnJvcnMpLAogICAgICAgICAgICBjdXN0b21DbGFzczogJ2JnLWVycm9yLWRhcmsnCiAgICAgICAgICB9KQogICAgICAgIH0pCiAgICB9LAogICAgYWRkVG9QbGFuKGxpc3QpIHsKICAgICAgbGV0IGZvcm1EYXRhID0gbmV3IEZvcm1EYXRhKCkKICAgICAgZm9ybURhdGEuYXBwZW5kKCdib29rJywgdGhpcy4kcm91dGUucGFyYW1zLmlkKQogICAgICBmb3JtRGF0YS5hcHBlbmQoJ3VzZXInLCB0aGlzLnNlbGYuaWQpCiAgICAgIGZvcm1EYXRhLmFwcGVuZCgnbGlzdCcsIGxpc3QpCgogICAgICB0aGlzLmhhbmRsZVJlcXVlc3QoewogICAgICAgIG5hbWU6ICdib29rcy9wbGFuJywKICAgICAgICBhY3Rpb246ICdjcmVhdGUnLAogICAgICAgIGRhdGE6IGZvcm1EYXRhCiAgICAgIH0pLnRoZW4oKCkgPT4gewogICAgICAgIHRoaXMuZ2V0UGxhbigpCiAgICAgIH0pCiAgICB9CiAgfSwKICB3YXRjaDogewogICAgcmF0ZSgpIHsKICAgICAgdGhpcy5zZXRSYXRlKCkKICAgIH0sCiAgICBzZWxmKCkgewogICAgICB0aGlzLmdldFBsYW4oKQogICAgfQogIH0sCiAgY29tcG9uZW50czogewogICAgQ3JpdGljaXNtCiAgfQp9Cg=="},{"version":3,"sources":["View.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAwEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"View.vue","sourceRoot":"src/components/book","sourcesContent":["<template>\n  <div class=\"view-book\" v-loading.fullscreen.lock=\"loading\">\n    <el-card v-if=\"!loading\">\n      <div>\n        <img v-if=\"book.image\" :src=\"'http://127.0.0.1:8000' + book.image\" />\n        <img v-else src=\"../../assets/images/noBook.png\" />\n      </div>\n      <div class=\"book-information\">\n        <div class=\"information\">\n          <span class=\"name\"> {{ book.name }} </span>\n          <el-rate\n            v-model=\"rate\"\n            :icon-classes=\"iconClasses\"\n            void-icon-class=\"icon-rate-face-off\"\n            :colors=\"['#99A9BF', '#F7BA2A', '#FF9900']\"\n          >\n          </el-rate>\n          <span v-if=\"book.author\">\n            {{ $t('book.author') }}: {{ book.author.name }}\n          </span>\n          <span v-if=\"book.translator\">\n            {{ $t('book.translator') }}: {{ book.translator.name }}\n          </span>\n          <span> {{ $t('book.publisher') }}: {{ book.publisher }} </span>\n          <span> {{ $t('book.genre') }}: {{ book.genre }} </span>\n          <span>\n            {{ $t('book.publication_year') }}: {{ book.publication_year }}\n          </span>\n        </div>\n        <div class=\"buttons\" v-if=\"isAuthenticated\">\n          <el-button\n            :type=\"list.isWantsToRead ? 'primary' : 'light'\"\n            size=\"mini\"\n            @click=\"addToPlan('wants_to_read')\"\n          >\n            {{ $t('want_to_read') }}</el-button\n          >\n          <el-button\n            :type=\"list.isReading ? 'primary' : 'light'\"\n            size=\"mini\"\n            @click=\"addToPlan('reading')\"\n          >\n            {{ $t('currently_reading') }}</el-button\n          >\n          <el-button\n            :type=\"list.isRead ? 'primary' : 'light'\"\n            size=\"mini\"\n            @click=\"addToPlan('read')\"\n          >\n            {{ $t('read') }}</el-button\n          >\n        </div>\n      </div>\n    </el-card>\n    <div class=\"post-summary\">\n      <el-card v-if=\"book.summary\">\n        <div slot=\"header\" class=\"clearfix\">\n          <span>{{ $t('book.summary') }}</span>\n        </div>\n        <span class=\"summary\"> {{ book.summary }} </span>\n      </el-card>\n      <el-card class=\"post\" v-if=\"isAuthenticated && posts.length\">\n        <div slot=\"header\" class=\"clearfix\">\n          <span>{{ $t('criticisms') }}</span>\n        </div>\n        <Criticism v-for=\"p in posts\" :key=\"p.id\" :post=\"p\" />\n      </el-card>\n    </div>\n  </div>\n</template>\n\n<script>\n  import { mapActions, mapGetters } from 'vuex'\n  import Criticism from '@/components/post/Criticism'\n  export default {\n    data() {\n      return {\n        id: 0,\n        book: {},\n        posts: [],\n        loading: false,\n        rate: 0,\n        iconClasses: [\n          'icon-rate-face-1',\n          'icon-rate-face-2',\n          'icon-rate-face-3'\n        ],\n        list: {\n          isRead: false,\n          isReading: false,\n          isWantsToRead: false\n        }\n      }\n    },\n    async created() {\n      await this.getBook()\n      this.self ? await this.getPlan() : ''\n      this.isAuthenticated ? await this.getPosts() : ''\n    },\n    computed: {\n      ...mapGetters(['isAuthenticated', 'self'])\n    },\n    methods: {\n      ...mapActions(['handleRequest']),\n      getBook() {\n        this.loading = true\n        this.handleRequest({\n          name: 'books',\n          action: 'getOne',\n          data: {\n            id: this.$route.params.id\n          }\n        }).then((res) => {\n          this.book = res.data\n        })\n      },\n      getPosts() {\n        this.handleRequest({\n          name: 'posts/',\n          action: 'getAll',\n          data: {\n            query: {\n              book_id: this.$route.params.id\n            }\n          }\n        })\n          .then((res) => {\n            this.posts = res.data.posts\n          })\n          .finally(() => {\n            this.loading = false\n          })\n      },\n      getPlan() {\n        this.handleRequest({\n          name: 'books/plan',\n          action: 'getAll',\n          data: {\n            query: {\n              user: this.self.id,\n              book: this.$route.params.id\n            }\n          }\n        })\n          .then((res) => {\n            this.list = res\n          })\n          .catch((res) => {\n            this.list = res.response.data\n          })\n          .finally(() => {\n            !this.isAuthenticated ? (this.loading = false) : ''\n          })\n      },\n      setRate() {\n        let formData = new FormData()\n        formData.append('book', this.$route.params.id)\n        formData.append('user', this.self.id)\n        formData.append('rate', this.rate)\n\n        this.handleRequest({\n          name: 'books/rate',\n          action: 'create',\n          data: formData\n        })\n          .then(() => {\n            this.$message({\n              type: 'success',\n              message: this.$i18n.t('your_rate_was_successfully_added'),\n              customClass: 'bg-success-dark'\n            })\n          })\n          .catch((error) => {\n            this.$message({\n              type: 'error',\n              message: this.$i18n.t(error.response.data.errors),\n              customClass: 'bg-error-dark'\n            })\n          })\n      },\n      addToPlan(list) {\n        let formData = new FormData()\n        formData.append('book', this.$route.params.id)\n        formData.append('user', this.self.id)\n        formData.append('list', list)\n\n        this.handleRequest({\n          name: 'books/plan',\n          action: 'create',\n          data: formData\n        }).then(() => {\n          this.getPlan()\n        })\n      }\n    },\n    watch: {\n      rate() {\n        this.setRate()\n      },\n      self() {\n        this.getPlan()\n      }\n    },\n    components: {\n      Criticism\n    }\n  }\n</script>\n"]}]}
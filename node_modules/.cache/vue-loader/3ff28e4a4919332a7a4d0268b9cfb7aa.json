{"remainingRequest":"/home/elaheh/Documents/University/Vue-Book-Land/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/elaheh/Documents/University/Vue-Book-Land/src/components/book/View.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/elaheh/Documents/University/Vue-Book-Land/src/components/book/View.vue","mtime":1630240142364},{"path":"/home/elaheh/Documents/University/Vue-Book-Land/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/home/elaheh/Documents/University/Vue-Book-Land/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/elaheh/Documents/University/Vue-Book-Land/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCB7IG1hcEFjdGlvbnMsIG1hcEdldHRlcnMgfSBmcm9tICd2dWV4JwppbXBvcnQgQ3JpdGljaXNtIGZyb20gJ0AvY29tcG9uZW50cy9wb3N0L0NyaXRpY2lzbScKZXhwb3J0IGRlZmF1bHQgewogIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBpZDogMCwKICAgICAgYm9vazoge30sCiAgICAgIHBvc3RzOiBbXSwKICAgICAgbG9hZGluZzogZmFsc2UsCiAgICAgIGJ1dHRvbkxvYWRpbmc6IGZhbHNlLAogICAgICByYXRlOiAwLAogICAgICBsaXN0OiB7CiAgICAgICAgaXNSZWFkOiBmYWxzZSwKICAgICAgICBpc1JlYWRpbmc6IGZhbHNlLAogICAgICAgIGlzV2FudHNUb1JlYWQ6IGZhbHNlCiAgICAgIH0sCiAgICAgIGlzRmF2b3JpdGU6IGZhbHNlLAogICAgICBzaG93UmF0ZURpYWxvZzogZmFsc2UsCiAgICAgIGVkaXRCb29rOiB7CiAgICAgICAgcmF0ZTogMAogICAgICB9LAogICAgICBydWxlczogewogICAgICAgIHJhdGU6IFsKICAgICAgICAgIHsKICAgICAgICAgICAgcmVxdWlyZWQ6IHRydWUsCiAgICAgICAgICAgIG1lc3NhZ2U6IHRoaXMuJGkxOG4udCgnZmllbGRfcmVxdWlyZWQnKSwKICAgICAgICAgICAgdHJpZ2dlcjogJ2JsdXInCiAgICAgICAgICB9CiAgICAgICAgXQogICAgICB9CiAgICB9CiAgfSwKICBhc3luYyBjcmVhdGVkKCkgewogICAgYXdhaXQgdGhpcy5nZXRCb29rKCkKICAgIHRoaXMuc2VsZiA/IGF3YWl0IHRoaXMuZ2V0UGxhbigpIDogJycKICAgIHRoaXMuc2VsZiA/IGF3YWl0IHRoaXMuZ2V0RmF2b3JpdGUoKSA6ICcnCiAgICB0aGlzLmlzQXV0aGVudGljYXRlZCA/IGF3YWl0IHRoaXMuZ2V0UG9zdHMoKSA6ICh0aGlzLmxvYWRpbmcgPSBmYWxzZSkKICB9LAogIGNvbXB1dGVkOiB7CiAgICAuLi5tYXBHZXR0ZXJzKFsnaXNBdXRoZW50aWNhdGVkJywgJ3NlbGYnXSkKICB9LAogIG1ldGhvZHM6IHsKICAgIC4uLm1hcEFjdGlvbnMoWydoYW5kbGVSZXF1ZXN0J10pLAogICAgZ2V0Qm9vaygpIHsKICAgICAgdGhpcy5sb2FkaW5nID0gdHJ1ZQogICAgICB0aGlzLmhhbmRsZVJlcXVlc3QoewogICAgICAgIG5hbWU6ICdib29rcycsCiAgICAgICAgYWN0aW9uOiAnZ2V0T25lJywKICAgICAgICBkYXRhOiB7CiAgICAgICAgICBpZDogdGhpcy4kcm91dGUucGFyYW1zLmlkCiAgICAgICAgfQogICAgICB9KS50aGVuKChyZXMpID0+IHsKICAgICAgICB0aGlzLmJvb2sgPSByZXMuZGF0YQogICAgICB9KQogICAgfSwKICAgIGdldFBvc3RzKCkgewogICAgICB0aGlzLmhhbmRsZVJlcXVlc3QoewogICAgICAgIG5hbWU6ICdwb3N0cy8nLAogICAgICAgIGFjdGlvbjogJ2dldEFsbCcsCiAgICAgICAgZGF0YTogewogICAgICAgICAgcXVlcnk6IHsKICAgICAgICAgICAgYm9va19pZDogdGhpcy4kcm91dGUucGFyYW1zLmlkCiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9KQogICAgICAgIC50aGVuKChyZXMpID0+IHsKICAgICAgICAgIHRoaXMucG9zdHMgPSByZXMuZGF0YS5wb3N0cwogICAgICAgIH0pCiAgICAgICAgLmZpbmFsbHkoKCkgPT4gewogICAgICAgICAgdGhpcy5sb2FkaW5nID0gZmFsc2UKICAgICAgICB9KQogICAgfSwKICAgIGdldFBsYW4oKSB7CiAgICAgIHRoaXMuaGFuZGxlUmVxdWVzdCh7CiAgICAgICAgbmFtZTogJ2Jvb2tzL3BsYW4nLAogICAgICAgIGFjdGlvbjogJ2dldEFsbCcsCiAgICAgICAgZGF0YTogewogICAgICAgICAgcXVlcnk6IHsKICAgICAgICAgICAgdXNlcjogdGhpcy5zZWxmLmlkLAogICAgICAgICAgICBib29rOiB0aGlzLiRyb3V0ZS5wYXJhbXMuaWQKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0pCiAgICAgICAgLnRoZW4oKHJlcykgPT4gewogICAgICAgICAgdGhpcy5saXN0ID0gcmVzCiAgICAgICAgfSkKICAgICAgICAuY2F0Y2goKHJlcykgPT4gewogICAgICAgICAgdGhpcy5saXN0ID0gcmVzLnJlc3BvbnNlLmRhdGEKICAgICAgICB9KQogICAgICAgIC5maW5hbGx5KCgpID0+IHsKICAgICAgICAgICF0aGlzLmlzQXV0aGVudGljYXRlZCA/ICh0aGlzLmxvYWRpbmcgPSBmYWxzZSkgOiAnJwogICAgICAgIH0pCiAgICB9LAogICAgZ2V0RmF2b3JpdGUoKSB7CiAgICAgIHRoaXMuaGFuZGxlUmVxdWVzdCh7CiAgICAgICAgbmFtZTogJ2Jvb2tzL2Zhdm9yaXRlJywKICAgICAgICBhY3Rpb246ICdnZXRBbGwnLAogICAgICAgIGRhdGE6IHsKICAgICAgICAgIHF1ZXJ5OiB7CiAgICAgICAgICAgIGJvb2s6IHRoaXMuJHJvdXRlLnBhcmFtcy5pZAogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfSkKICAgICAgICAudGhlbigoKSA9PiB7CiAgICAgICAgICB0aGlzLmlzRmF2b3JpdGUgPSB0cnVlCiAgICAgICAgfSkKICAgICAgICAuY2F0Y2goKCkgPT4gewogICAgICAgICAgdGhpcy5pc0Zhdm9yaXRlID0gZmFsc2UKICAgICAgICB9KQogICAgICAgIC5maW5hbGx5KCgpID0+IHsKICAgICAgICAgICF0aGlzLmlzQXV0aGVudGljYXRlZCA/ICh0aGlzLmxvYWRpbmcgPSBmYWxzZSkgOiAnJwogICAgICAgIH0pCiAgICB9LAogICAgc2V0UmF0ZSgpIHsKICAgICAgdGhpcy5idXR0b25Mb2FkaW5nID0gdHJ1ZQogICAgICBsZXQgZm9ybURhdGEgPSBuZXcgRm9ybURhdGEoKQogICAgICBmb3JtRGF0YS5hcHBlbmQoJ2Jvb2snLCB0aGlzLiRyb3V0ZS5wYXJhbXMuaWQpCiAgICAgIGZvcm1EYXRhLmFwcGVuZCgndXNlcicsIHRoaXMuc2VsZi5pZCkKICAgICAgZm9ybURhdGEuYXBwZW5kKCdyYXRlJywgdGhpcy5lZGl0Qm9vay5yYXRlKQoKICAgICAgdGhpcy5oYW5kbGVSZXF1ZXN0KHsKICAgICAgICBuYW1lOiAnYm9va3MvcmF0ZScsCiAgICAgICAgYWN0aW9uOiAnY3JlYXRlJywKICAgICAgICBkYXRhOiBmb3JtRGF0YQogICAgICB9KQogICAgICAgIC50aGVuKChyZXMpID0+IHsKICAgICAgICAgIHRoaXMuYm9vay5yYXRlID0gcmVzLnJhdGUKICAgICAgICAgIHRoaXMuJG1lc3NhZ2UoewogICAgICAgICAgICB0eXBlOiAnc3VjY2VzcycsCiAgICAgICAgICAgIG1lc3NhZ2U6IHRoaXMuJGkxOG4udCgneW91cl9yYXRlX3dhc19zdWNjZXNzZnVsbHlfYWRkZWQnKSwKICAgICAgICAgICAgY3VzdG9tQ2xhc3M6ICdiZy1zdWNjZXNzLWRhcmsnCiAgICAgICAgICB9KQogICAgICAgICAgdGhpcy5zaG93UmF0ZURpYWxvZyA9IGZhbHNlCiAgICAgICAgfSkKICAgICAgICAuY2F0Y2goKGVycm9yKSA9PiB7CiAgICAgICAgICB0aGlzLiRtZXNzYWdlKHsKICAgICAgICAgICAgdHlwZTogJ2Vycm9yJywKICAgICAgICAgICAgbWVzc2FnZTogdGhpcy4kaTE4bi50KGVycm9yLnJlc3BvbnNlLmRhdGEuZXJyb3JzKSwKICAgICAgICAgICAgY3VzdG9tQ2xhc3M6ICdiZy1lcnJvci1kYXJrJwogICAgICAgICAgfSkKICAgICAgICB9KQogICAgICAgIC5maW5hbGx5KCgpID0+IHsKICAgICAgICAgIHRoaXMuYnV0dG9uTG9hZGluZyA9IGZhbHNlCiAgICAgICAgfSkKICAgIH0sCiAgICBhZGRUb1BsYW4obGlzdCkgewogICAgICBsZXQgZm9ybURhdGEgPSBuZXcgRm9ybURhdGEoKQogICAgICBmb3JtRGF0YS5hcHBlbmQoJ2Jvb2snLCB0aGlzLiRyb3V0ZS5wYXJhbXMuaWQpCiAgICAgIGZvcm1EYXRhLmFwcGVuZCgndXNlcicsIHRoaXMuc2VsZi5pZCkKICAgICAgZm9ybURhdGEuYXBwZW5kKCdsaXN0JywgbGlzdCkKCiAgICAgIHRoaXMuaGFuZGxlUmVxdWVzdCh7CiAgICAgICAgbmFtZTogJ2Jvb2tzL3BsYW4nLAogICAgICAgIGFjdGlvbjogJ2NyZWF0ZScsCiAgICAgICAgZGF0YTogZm9ybURhdGEKICAgICAgfSkudGhlbigoKSA9PiB7CiAgICAgICAgdGhpcy5nZXRQbGFuKCkKICAgICAgfSkKICAgIH0sCiAgICBzZXRGYXZvcml0ZSgpIHsKICAgICAgbGV0IGZvcm1EYXRhID0gbmV3IEZvcm1EYXRhKCkKICAgICAgZm9ybURhdGEuYXBwZW5kKCdib29rJywgdGhpcy4kcm91dGUucGFyYW1zLmlkKQoKICAgICAgdGhpcy5oYW5kbGVSZXF1ZXN0KHsKICAgICAgICBuYW1lOiAnYm9va3MvZmF2b3JpdGUnLAogICAgICAgIGFjdGlvbjogJ2NyZWF0ZScsCiAgICAgICAgZGF0YTogZm9ybURhdGEKICAgICAgfSkKICAgICAgICAudGhlbigoKSA9PiB7CiAgICAgICAgICB0aGlzLmlzRmF2b3JpdGUgPSAhdGhpcy5pc0Zhdm9yaXRlCiAgICAgICAgICAvLyB0aGlzLiRtZXNzYWdlKHsKICAgICAgICAgIC8vICAgdHlwZTogJ3N1Y2Nlc3MnLAogICAgICAgICAgLy8gICBtZXNzYWdlOiB0aGlzLiRpMThuLnQoJ3lvdXJfcmF0ZV93YXNfc3VjY2Vzc2Z1bGx5X2FkZGVkJyksCiAgICAgICAgICAvLyAgIGN1c3RvbUNsYXNzOiAnYmctc3VjY2Vzcy1kYXJrJwogICAgICAgICAgLy8gfSkKICAgICAgICB9KQogICAgICAgIC5jYXRjaCgoZXJyb3IpID0+IHsKICAgICAgICAgIHRoaXMuJG1lc3NhZ2UoewogICAgICAgICAgICB0eXBlOiAnZXJyb3InLAogICAgICAgICAgICBtZXNzYWdlOiB0aGlzLiRpMThuLnQoZXJyb3IucmVzcG9uc2UuZGF0YS5lcnJvcnMpLAogICAgICAgICAgICBjdXN0b21DbGFzczogJ2JnLWVycm9yLWRhcmsnCiAgICAgICAgICB9KQogICAgICAgIH0pCiAgICB9CiAgfSwKICB3YXRjaDogewogICAgc2VsZigpIHsKICAgICAgdGhpcy5nZXRQbGFuKCkKICAgICAgdGhpcy5nZXRGYXZvcml0ZSgpCiAgICB9CiAgfSwKICBjb21wb25lbnRzOiB7CiAgICBDcml0aWNpc20KICB9Cn0K"},{"version":3,"sources":["View.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAmIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"View.vue","sourceRoot":"src/components/book","sourcesContent":["<template>\n  <div class=\"view-book\" v-loading.fullscreen.lock=\"loading\">\n    <el-card v-if=\"!loading\">\n      <div class=\"main\">\n        <div>\n          <img\n            v-if=\"book.image\"\n            :src=\"'http://ketabland.pythonanywhere.com' + book.image\"\n          />\n          <img v-else src=\"../../assets/images/noBook.png\" />\n        </div>\n        <div class=\"book-information\">\n          <div class=\"information\">\n            <span class=\"name\"> {{ book.name }} </span>\n            <el-rate\n              :value=\"parseFloat((+book.rate).toFixed(2))\"\n              disabled\n              show-score\n              text-color=\"#ff9900\"\n            >\n            </el-rate>\n            <span v-if=\"book.author\">\n              {{ $t('book.author') }}: {{ book.author.name }}\n            </span>\n            <span v-if=\"book.translator\">\n              {{ $t('book.translator') }}: {{ book.translator.name }}\n            </span>\n            <span> {{ $t('book.publisher') }}: {{ book.publisher }} </span>\n            <span> {{ $t('book.genre') }}: {{ book.genre }} </span>\n            <span>\n              {{ $t('book.publication_year') }}: {{ book.publication_year }}\n            </span>\n          </div>\n          <div class=\"buttons\" v-if=\"isAuthenticated\">\n            <el-button\n              :type=\"list.isWantsToRead ? 'primary' : 'light'\"\n              size=\"mini\"\n              @click=\"addToPlan('wants_to_read')\"\n            >\n              {{ $t('want_to_read') }}</el-button\n            >\n            <el-button\n              :type=\"list.isReading ? 'primary' : 'light'\"\n              size=\"mini\"\n              @click=\"addToPlan('reading')\"\n            >\n              {{ $t('currently_reading') }}</el-button\n            >\n            <el-button\n              :type=\"list.isRead ? 'primary' : 'light'\"\n              size=\"mini\"\n              @click=\"addToPlan('read')\"\n            >\n              {{ $t('read') }}</el-button\n            >\n          </div>\n        </div>\n      </div>\n      <div class=\"favorite\" v-if=\"isAuthenticated\">\n        <el-button type=\"primary\" @click=\"showRateDialog = true\">\n          {{ $t('rate_to_book') }}\n        </el-button>\n        <img\n          v-if=\"isFavorite\"\n          @click=\"setFavorite()\"\n          class=\"favorite\"\n          src=\"../../assets/images/favorite_red.svg\"\n        />\n        <img\n          v-else\n          @click=\"setFavorite()\"\n          class=\"favorite\"\n          src=\"../../assets/images/favorite_border_black.svg\"\n        />\n      </div>\n    </el-card>\n    <div class=\"post-summary\">\n      <el-card v-if=\"book.summary\">\n        <div slot=\"header\" class=\"clearfix\">\n          <span>{{ $t('book.summary') }}</span>\n        </div>\n        <span class=\"summary\"> {{ book.summary }} </span>\n      </el-card>\n      <div\n        class=\"post flexbox column-direction align-center\"\n        v-if=\"isAuthenticated && posts.length\"\n      >\n        <div class=\"criticisms-title\">\n          <span>{{ $t('criticisms') }}</span>\n        </div>\n        <Criticism v-for=\"p in posts\" :key=\"p.id\" :post=\"p\" />\n      </div>\n    </div>\n    <el-dialog\n      :title=\"$t('rating')\"\n      :visible.sync=\"showRateDialog\"\n      :close-on-click-modal=\"false\"\n      :close-on-escape=\"false\"\n      :show-close=\"false\"\n      width=\"40rem\"\n      top=\"7vh\"\n      class=\"small\"\n    >\n      <el-form :model=\"editBook\" ref=\"addRate\" :rules=\"rules\">\n        <el-form-item :label=\"$t('post.rate')\" prop=\"rate\">\n          <el-input-number\n            v-model=\"editBook.rate\"\n            :step=\"0.1\"\n            :min=\"0\"\n            :max=\"5\"\n          ></el-input-number>\n        </el-form-item>\n        <div class=\"text-center\">\n          <el-button\n            :loading=\"buttonLoading\"\n            class=\"ml-10\"\n            type=\"primary\"\n            @click=\"validateAndSubmitForm('addRate', setRate)\"\n          >\n            {{ $t('submit') }}\n          </el-button>\n          <el-button @click=\"showRateDialog = false\">\n            {{ $t('close') }}\n          </el-button>\n        </div>\n      </el-form>\n    </el-dialog>\n  </div>\n</template>\n\n<script>\n  import { mapActions, mapGetters } from 'vuex'\n  import Criticism from '@/components/post/Criticism'\n  export default {\n    data() {\n      return {\n        id: 0,\n        book: {},\n        posts: [],\n        loading: false,\n        buttonLoading: false,\n        rate: 0,\n        list: {\n          isRead: false,\n          isReading: false,\n          isWantsToRead: false\n        },\n        isFavorite: false,\n        showRateDialog: false,\n        editBook: {\n          rate: 0\n        },\n        rules: {\n          rate: [\n            {\n              required: true,\n              message: this.$i18n.t('field_required'),\n              trigger: 'blur'\n            }\n          ]\n        }\n      }\n    },\n    async created() {\n      await this.getBook()\n      this.self ? await this.getPlan() : ''\n      this.self ? await this.getFavorite() : ''\n      this.isAuthenticated ? await this.getPosts() : (this.loading = false)\n    },\n    computed: {\n      ...mapGetters(['isAuthenticated', 'self'])\n    },\n    methods: {\n      ...mapActions(['handleRequest']),\n      getBook() {\n        this.loading = true\n        this.handleRequest({\n          name: 'books',\n          action: 'getOne',\n          data: {\n            id: this.$route.params.id\n          }\n        }).then((res) => {\n          this.book = res.data\n        })\n      },\n      getPosts() {\n        this.handleRequest({\n          name: 'posts/',\n          action: 'getAll',\n          data: {\n            query: {\n              book_id: this.$route.params.id\n            }\n          }\n        })\n          .then((res) => {\n            this.posts = res.data.posts\n          })\n          .finally(() => {\n            this.loading = false\n          })\n      },\n      getPlan() {\n        this.handleRequest({\n          name: 'books/plan',\n          action: 'getAll',\n          data: {\n            query: {\n              user: this.self.id,\n              book: this.$route.params.id\n            }\n          }\n        })\n          .then((res) => {\n            this.list = res\n          })\n          .catch((res) => {\n            this.list = res.response.data\n          })\n          .finally(() => {\n            !this.isAuthenticated ? (this.loading = false) : ''\n          })\n      },\n      getFavorite() {\n        this.handleRequest({\n          name: 'books/favorite',\n          action: 'getAll',\n          data: {\n            query: {\n              book: this.$route.params.id\n            }\n          }\n        })\n          .then(() => {\n            this.isFavorite = true\n          })\n          .catch(() => {\n            this.isFavorite = false\n          })\n          .finally(() => {\n            !this.isAuthenticated ? (this.loading = false) : ''\n          })\n      },\n      setRate() {\n        this.buttonLoading = true\n        let formData = new FormData()\n        formData.append('book', this.$route.params.id)\n        formData.append('user', this.self.id)\n        formData.append('rate', this.editBook.rate)\n\n        this.handleRequest({\n          name: 'books/rate',\n          action: 'create',\n          data: formData\n        })\n          .then((res) => {\n            this.book.rate = res.rate\n            this.$message({\n              type: 'success',\n              message: this.$i18n.t('your_rate_was_successfully_added'),\n              customClass: 'bg-success-dark'\n            })\n            this.showRateDialog = false\n          })\n          .catch((error) => {\n            this.$message({\n              type: 'error',\n              message: this.$i18n.t(error.response.data.errors),\n              customClass: 'bg-error-dark'\n            })\n          })\n          .finally(() => {\n            this.buttonLoading = false\n          })\n      },\n      addToPlan(list) {\n        let formData = new FormData()\n        formData.append('book', this.$route.params.id)\n        formData.append('user', this.self.id)\n        formData.append('list', list)\n\n        this.handleRequest({\n          name: 'books/plan',\n          action: 'create',\n          data: formData\n        }).then(() => {\n          this.getPlan()\n        })\n      },\n      setFavorite() {\n        let formData = new FormData()\n        formData.append('book', this.$route.params.id)\n\n        this.handleRequest({\n          name: 'books/favorite',\n          action: 'create',\n          data: formData\n        })\n          .then(() => {\n            this.isFavorite = !this.isFavorite\n            // this.$message({\n            //   type: 'success',\n            //   message: this.$i18n.t('your_rate_was_successfully_added'),\n            //   customClass: 'bg-success-dark'\n            // })\n          })\n          .catch((error) => {\n            this.$message({\n              type: 'error',\n              message: this.$i18n.t(error.response.data.errors),\n              customClass: 'bg-error-dark'\n            })\n          })\n      }\n    },\n    watch: {\n      self() {\n        this.getPlan()\n        this.getFavorite()\n      }\n    },\n    components: {\n      Criticism\n    }\n  }\n</script>\n"]}]}